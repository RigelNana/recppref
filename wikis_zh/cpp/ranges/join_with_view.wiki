{{cpp/ranges/view title|join_with}}
{{cpp/ranges/join_with_view/navbar}}

{{dcl begin}}
{{dcl header|ranges}}
{{dcl|num=1|since=c++23|
template&lt; ranges::input_range V, ranges::forward_range Pattern &gt;
  requires ranges::view&lt;V&gt; &amp;&amp;
           ranges::input_range&lt;ranges::range_reference_t&lt;V&gt;&gt; &amp;&amp;
           ranges::view&lt;Pattern&gt; &amp;&amp;
           /*concatable*/&lt;ranges::range_reference_t&lt;V&gt;, Pattern&gt;
class join_with_view : 
    ranges::view_interface&lt;join_with_view&lt;V, Pattern&gt;&gt;
}}
{{dcl|num=2|since=c++23|1=
namespace views {
    inline constexpr /* 未指定 */ join_with = /* 未指定 */;
}
}}
{{dcl h|调用签名}}
{{dcl|since=c++23|1=
template&lt; ranges::viewable_range R, class Pattern &gt;
    requires /* 见下文 */
constexpr ranges::view auto join_with( R&amp;&amp; r, Pattern&amp;&amp; pattern );
}}
{{dcl|since=c++23|1=
template&lt; class Pattern &gt;
constexpr /* 范围适配器闭包 */ join_with( Pattern&amp;&amp; pattern );
}}
{{dcl end}}

@1@ 表示 {{lconcept|view}} 的范围适配器，由拉平范围的视图得到的序列组成，每个元素视图元素之间插入了分隔符。分隔符可以是单个元素，也可以是元素视图。
@@ {{c/core|/*concatable*/}} 的定义见 {{l2tt std|cpp/ranges/concat_view}}。

@2@ {{named req|RangeAdaptorObject}}。对于任何合适的子表达式 {{c|e}} 和 {{c|f}} 来说，{{c|views::join_with(e, f)}} {{ls|cpp/language/expressions#表达式等价}}于 {{c|join_with_view(e, f)}}。

{{tt|join_with_view}} 实现 {{lconcept|input_range}}。

{{tt|join_with_view}} 实现 {{lconcept|forward_range}}，仅当：
* {{c/core|ranges::range_reference_t&lt;V&gt;}} 是引用，且
* {{tt|V}} 和 {{c/core|ranges::range_reference_t&lt;V&gt;}} 都实现 {{lconcept|forward_range}}。

{{tt|join_with_view}} 实现 {{lconcept|bidirectional_range}}，仅当：
* {{c/core|ranges::range_reference_t&lt;V&gt;}} 是引用，且
* {{tt|V}}，{{c/core|ranges::range_reference_t&lt;V&gt;}} 和 {{tt|Pattern}} 都实现 {{lconcept|bidirectional_range}}，且
* {{c/core|ranges::range_reference_t&lt;V&gt;}} 和 {{tt|Pattern}} 都实现 {{lconcept|common_range}}。

{{tt|join_with_view}} 实现 {{lconcept|common_range}}，仅当：
* {{c/core|ranges::range_reference_t&lt;V&gt;}} 是引用，
* {{tt|V}} 和 {{c/core|ranges::range_reference_t&lt;V&gt;}} 都实现 {{lconcept|forward_range}} 和 {{lconcept|common_range}}。

===嵌套类型===
{{dsc begin}}
{{dsc hitem|类型|定义}}
{{dsc expos mem type|InnerRng|id=InnerRng|{{c/core|ranges::range_reference_t&lt;V&gt;}}}}
{{dsc end}}

===数据成员===
{{dsc begin}}
{{dsc hitem|成员|定义}}
{{dsc expos mem obj|spec={{tt|V}}|base_|id=base|底层（适配的）视图}}
{{dsc expos mem obj|spec={{tt|Pattern}}|pattern_|id=pattern|模式对象}}
{{dsc expos mem obj|spec={{rlpi|non-propagating-cache}}{{sep}}{{c/core|&lt;ranges::iterator_t&lt;V&gt;&gt;}}|outer_it_|id=outer_it|maybe=（仅当 {{tt|V}} 未实现 {{lconcept|forward_range}} 时提供）|外部输出迭代器缓存}}
{{dsc expos mem obj|spec={{rlpi|non-propagating-cache}}{{sep}}{{c/core|&lt;std::remove_cv_t&lt;}}{{tti|InnerRng}}{{sep}}{{c/core|&gt;&gt;}}|inner_|id=inner|maybe=（仅当 {{box|{{c/core|std::is_reference_v&lt;}}{{tti|InnerRng}}{{sep}}{{c/core|&gt;}}}} 是 {{c|false}} 时提供）|内部范围缓存}}
{{dsc end}}

===成员函数===
{{dsc begin}}
{{dsc inc|cpp/ranges/adaptor/dsc constructor|join_with_view}}
{{dsc inc|cpp/ranges/adaptor/dsc base|join_with_view}}
{{dsc inc|cpp/ranges/adaptor/dsc begin|join_with_view}}
{{dsc inc|cpp/ranges/adaptor/dsc end|join_with_view}}

{{cpp/ranges/view_interface/inherit|embedded=yes|data=invalid|size=invalid|operator[]=invalid}}
{{dsc end}}

==={{rl|deduction guides|推导指引}}===

===嵌套类===
{{dsc begin}}
{{dsc expos mem tclass|cpp/ranges/join_with_view/iterator|迭代器类型}}
{{dsc expos mem tclass|cpp/ranges/join_with_view/sentinel|哨位类型}}
{{dsc end}}

===注解===
{{ftm begin}}
{{ftm|__cpp_lib_ranges_join_with|value=202202L|std=C++23|{{tt|std::ranges::join_with_view}}}}
{{ftm end}}

===示例===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;ranges&gt;
#include &lt;string_view&gt;
#include &lt;vector&gt;

int main()
{
    using namespace std::literals;
    
    std::vector v{"This"sv, "is"sv, "a"sv, "test."sv};
    auto joined = v {{!}} std::views::join_with(' ');
    
    for (auto c : joined)
        std::cout &lt;&lt; c;
    std::cout &lt;&lt; '\n';
}
|output=
This is a test.
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|dr=4074|std=C++23|before={{tt|join_with_view}} 的约束不足|after=更新约束}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/ranges/dsc join_view}}
{{dsc inc|cpp/ranges/dsc concat_view}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}