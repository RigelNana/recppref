{{cpp/ranges/view title|single}}
{{cpp/ranges/navbar}}

{{dcl begin}}
{{dcl header|ranges}}
{{dcl rev multi|num=1|since1=c++20|dcl1=
template&lt; std::copy_constructible T &gt;
    requires std::is_object_v&lt;T&gt;
class single_view
    : public ranges::view_interface&lt;single_view&lt;T&gt;&gt;
|since2=c++23|dcl2=
template&lt; std::move_constructible T &gt;
    requires std::is_object_v&lt;T&gt;
class single_view
    : public ranges::view_interface&lt;single_view&lt;T&gt;&gt;
}}
{{dcl|num=2|since=c++20|1=
namespace views {
    inline constexpr /* æœªæŒ‡å®š */ single = /* æœªæŒ‡å®š */;
}
}}
{{dcl h|è°ƒç”¨ç­¾å}}
{{dcl|since=c++20|1=
template&lt; class T &gt;
    requires /* è§ä¸‹æ–‡ */
constexpr /* è§ä¸‹æ–‡ */ single( T&amp;&amp; t );
}}
{{dcl end}}

@1@ äº§ç”Ÿå‡†ç¡®å«æœ‰ä¸€ä¸ªå…·æœ‰æŒ‡å®šå€¼çš„å…ƒç´ çš„ {{lconcept|view}}ã€‚
@2@ è¡¨è¾¾å¼ {{c|views::single(e)}} å¯¹ä»»ä½•é€‚åˆçš„å­è¡¨è¾¾å¼ {{c|e}} [[cpp/language/expressions#è¡¨è¾¾å¼ç­‰ä»·|è¡¨è¾¾å¼ç­‰ä»·]]äº {{c|single_view&lt;std::decay_t&lt;decltype((e))&gt;&gt;(e)}}ã€‚

å…ƒç´ çš„ç”Ÿå­˜æœŸä¸çˆ¶ {{tt|single_view}} ç»‘å®šã€‚å¤åˆ¶ {{tt|single_view}} ä¼šäº§ç”Ÿå…ƒç´ çš„å‰¯æœ¬ã€‚

{{cpp/ranges/cpo|views|single}}

===æ•°æ®æˆå‘˜===
{{dsc begin}}
{{dsc hitem|æˆå‘˜å|å®šä¹‰}}
{{dsc expos mem obj|spec={{rlpi|copyable_wrapper|copyable-box}}{{sep}}{{tt|&lt;T&gt;}}|value_|è§†å›¾åŒ…å«çš„å•ä¸ªå…ƒç´ |notes={{mark until c++23}}}}
{{dsc expos mem obj|spec={{rlpi|copyable_wrapper|movable-box}}{{sep}}{{tt|&lt;T&gt;}}|value_|è§†å›¾åŒ…å«çš„å•ä¸ªå…ƒç´ |notes={{mark since c++23}}}}
{{dsc end}}

===æˆå‘˜å‡½æ•°===
{{dsc begin}}
{{dsc mem ctor|{{PAGENAME}}#ctor|æ„é€  {{tt|single_view}}}}
{{dsc mem fun|{{PAGENAME}}#begin|title=begin|è¿”å›æŒ‡å‘å…ƒç´ çš„æŒ‡é’ˆ}}
{{dsc mem fun|{{PAGENAME}}#end|title=end|è¿”å›å…ƒç´ åä¸€ä½ç½®çš„æŒ‡é’ˆ}}
{{dsc mem sfun|{{PAGENAME}}#empty|title=empty|è¿”å› {{c|false}}}}
{{dsc mem sfun|{{PAGENAME}}#size|title=size|è¿”å› {{c|1}}}}
{{dsc mem fun|{{PAGENAME}}#data|title=data|è¿”å›æŒ‡å‘å…ƒç´ çš„æŒ‡é’ˆ}}

{{cpp/ranges/view_interface/inherit|embedded=yes|data=yes|empty=invalid|size=invalid}}
{{dsc end}}

{{anchor|ctor}}
{{member|{{small|std::ranges::single_view::}}single_view|
{{dcl begin}}
{{dcl|num=1|since=c++20|1=
single_view() requires std::default_initializable&lt;T&gt; = default;&lt;!--P2325R3--&gt;
}}
{{dcl rev multi|num=2|since1=c++20|dcl1=
constexpr explicit single_view( const T&amp; t );
|since2=c++23|dcl2=
constexpr explicit single_view( const T&amp; t )
    requires std::copy_constructible&lt;T&gt;;
}}
{{dcl|num=3|since=c++20|1=
constexpr explicit single_view( T&amp;&amp; t );
}}
{{dcl|num=4|since=c++20|1=
template&lt; class... Args &gt;
    requires std::constructible_from&lt;T, Args...&gt;
constexpr explicit single_view( std::in_place_t, Args&amp;&amp;... args );
}}
{{dcl end}}

æ„é€  {{tt|single_view}}ã€‚

@1@ é»˜è®¤åˆå§‹åŒ– {{tti|value_}}ï¼Œå®ƒä¼šå€¼åˆå§‹åŒ–å…¶æ‰€å«çš„å€¼ã€‚
@2@ ä»¥ {{c|t}} åˆå§‹åŒ– {{tti|value_}}ã€‚
@3@ ä»¥ {{c|std::move(t)}} åˆå§‹åŒ– {{tti|value_}}ã€‚
@4@ å¦‚åŒä»¥ {{c|value_{std::in_place, std::forward&lt;Args&gt;(args)...}&lt;!----&gt;}} åˆå§‹åŒ– {{tti|value_}}ã€‚
}}

{{anchor|begin}}
{{member|{{small|std::ranges::single_view::}}begin|
{{ddcl|since=c++20|
constexpr T* begin() noexcept;
constexpr const T* begin() const noexcept;
}}

ç­‰ä»·äº {{c|return data();}}ã€‚
}}

{{anchor|end}}
{{member|{{small|std::ranges::single_view::}}end|
{{ddcl|since=c++20|
constexpr T* end() noexcept;
constexpr const T* end() const noexcept;
}}

ç­‰ä»·äº {{c|return data() + 1;}}ã€‚
}}

{{anchor|empty}}
{{member|{{small|std::ranges::single_view::}}empty|
{{ddcl|since=c++20|
static constexpr bool empty() noexcept;
}}

ç­‰ä»·äº {{c|return false;}}ã€‚
}}

{{anchor|size}}
{{member|{{small|std::ranges::single_view::}}size|
{{ddcl|since=c++20|
static constexpr std::size_t size() noexcept;
}}

ç­‰ä»·äº {{c|return 1;}}ã€‚

è¿™ä½¿å¾— {{tt|single_view}} å®ç° {{rlpt|split_view}} æ‰€è¦æ±‚çš„ {{c|/*tiny-range*/}}ã€‚
}}

{{anchor|data}}
{{member|{{small|std::ranges::single_view::}}data|
{{ddcl|since=c++20|
constexpr T* data() noexcept;
constexpr const T* data() const noexcept;
}}

è¿”å›æŒ‡å‘ {{tti|value_}} çš„æ‰€å«å€¼çš„æŒ‡é’ˆã€‚å¦‚æœ {{tti|value_}} ä¸å«å€¼ï¼Œé‚£ä¹ˆè¡Œä¸ºæœªå®šä¹‰ã€‚
}}

===æ¨å¯¼æŒ‡å¼•===
{{ddcl|since=c++20|1=
template&lt; class T &gt;
single_view( T ) -&gt; single_view&lt;T&gt;;
}}

===æ³¨è§£===
å¯¹äºä¸€ä¸ª {{ttt|single_view}}ï¼Œç»§æ‰¿çš„ {{tt|empty}} æˆå‘˜å‡½æ•°å§‹ç»ˆè¿”å› {{c|false}}ï¼Œè€Œç»§æ‰¿çš„ {{c|operator bool}} è½¬æ¢å‡½æ•°å§‹ç»ˆè¿”å› {{c|true}}ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;ranges&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;

int main()
{
    constexpr std::ranges::single_view sv1{3.1415}; // ä½¿ç”¨ (const T&amp;) æ„é€ å‡½æ•°
    static_assert(sv1);
    static_assert(not sv1.empty());
    
    std::cout &lt;&lt; "1) *sv1.data()ï¼š" &lt;&lt; *sv1.data() &lt;&lt; '\n'
              &lt;&lt; "2) *sv1.begin()ï¼š" &lt;&lt; *sv1.begin() &lt;&lt; '\n'
              &lt;&lt; "3)  sv1.size()ï¼š" &lt;&lt; sv1.size() &lt;&lt; '\n'
              &lt;&lt; "4)  è·ç¦»ï¼š" &lt;&lt; std::distance(sv1.begin(), sv1.end()) &lt;&lt; '\n';
    
    std::string str{"C++20"};
    std::cout &lt;&lt; "5)  str = " &lt;&lt; std::quoted(str) &lt;&lt; '\n';
    std::ranges::single_view sv2{std::move(str)}; // ä½¿ç”¨ (T&amp;&amp;) æ„é€ å‡½æ•°
    std::cout &lt;&lt; "6) *sv2.data()ï¼š" &lt;&lt; std::quoted(*sv2.data()) &lt;&lt; '\n'
              &lt;&lt; "7)  str = " &lt;&lt; std::quoted(str) &lt;&lt; '\n';
    
    std::ranges::single_view&lt;std::tuple&lt;int, double, std::string&gt;&gt;
        sv3{std::in_place, 42, 3.14, "ğŸ˜„"}; // ä½¿ç”¨ (std::in_place_t, Args&amp;&amp;... args)
    
    std::cout &lt;&lt; "8)  sv3 æŒæœ‰ä¸€ä¸ªå…ƒç»„ï¼š{ "
              &lt;&lt; std::get&lt;0&gt;(sv3[0]) &lt;&lt; ", "
              &lt;&lt; std::get&lt;1&gt;(sv3[0]) &lt;&lt; ", "
              &lt;&lt; std::get&lt;2&gt;(sv3[0]) &lt;&lt; " }\n";
}
|output=
1) *sv1.data()ï¼š3.1415
2) *sv1.begin()ï¼š3.1415
3)  sv1.size()ï¼š1
4)  è·ç¦»ï¼š1
5)  str = "C++20"
6) *sv2.data()ï¼š"C++20"
7)  str = ""
8)  sv3 æŒæœ‰ä¸€ä¸ªå…ƒç»„ï¼š{ 42, 3.14, ğŸ˜„ }
}}

===ç¼ºé™·æŠ¥å‘Š===
{{dr list begin}}
{{dr list item|wg=lwg|dr=3428|std=C++20|before={{tt|single_view}} å¯ä» {{lc|std::in_place_t}} è½¬æ¢|after=ä½¿è¯¥æ„é€ å‡½æ•°ä¸º explicit}}
{{dr list item|wg=lwg|dr=4035|std=C++20|before={{tt|single_view}} æ²¡æœ‰æä¾›æˆå‘˜å‡½æ•° {{tt|empty()}}|after=æä¾› {{tt|empty()}}}}
{{dr list item|paper=P2367R0|std=C++20|before={{tt|single_view}} çš„æ¨å¯¼æŒ‡å¼•æ— æ³•è¡°å˜å‚æ•°ï¼›&lt;br&gt;{{tt|views::single}} å¤åˆ¶ä½†ä¸åŒ…è£… {{tt|single_view}}|after=æä¾›è¡°å˜çš„æ¨å¯¼æŒ‡å¼•ï¼›&lt;br&gt;ä½¿ä¹‹å§‹ç»ˆåŒ…è£…}}
{{dr list end}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/utility/dsc optional}}
{{dsc inc|cpp/ranges/dsc empty_view}}
{{dsc inc|cpp/ranges/dsc split_view}}
{{dsc end}}

{{langlinks|en|es|ja|ru}}