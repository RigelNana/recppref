{{cpp/title|codecvt}}
{{cpp/locale/codecvt/navbar}}
{{ddcl|header=locale|
template&lt; 
    class InternT, 
    class ExternT, 
    class StateT
&gt; class codecvt;
}}

ç±»æ¨¡æ¿ {{tt|std::codecvt}} å°è£…å­—ç¬¦ä¸²çš„è½¬æ¢ï¼ŒåŒ…æ‹¬å®½å’Œå¤šå­—èŠ‚ï¼Œä»ä¸€ç§ç¼–ç åˆ°å¦ä¸€ç§ã€‚é€šè¿‡ {{c/core|std::basic_fstream&lt;CharT&gt;}} è¿›è¡Œçš„æ‰€æœ‰è¾“å…¥/è¾“å‡ºæ“ä½œéƒ½ä½¿ç”¨æµä¸­æµ¸æŸ“çš„ {{c/core|std::codecvt&lt;CharT, char, std::mbstate_t&gt;}} æœ¬åœ°ç¯å¢ƒåˆ»é¢ã€‚

{{inheritance diagram/std-codecvt}}

===ç‰¹åŒ–===
æ ‡å‡†åº“ä¿è¯æä¾›ä»¥ä¸‹ç‰¹åŒ–ï¼ˆ{{rlp|locale|æ‰€æœ‰æœ¬åœ°ç¯å¢ƒå¯¹è±¡éƒ½éœ€è¦å®ç°}}è¿™äº›ç‰¹åŒ–ï¼‰ï¼š
{{dsc begin}}
{{dsc header|locale}}
{{dsc|{{c/core|std::codecvt&lt;char, char, std::mbstate_t&gt;}}|æ’ç­‰è½¬æ¢}}
{{dsc|{{c/core|std::codecvt&lt;char16_t, char, std::mbstate_t&gt;}}&lt;br&gt;{{mark life|since=c++11|deprecated=c++20}}|åœ¨ UTF-16 å’Œ UTF-8 é—´è½¬æ¢}}
{{dsc|{{c/core|std::codecvt&lt;char16_t, char8_t, std::mbstate_t&gt;}}&lt;br&gt;{{mark since c++20}}|åœ¨ UTF-16 å’Œ UTF-8 é—´è½¬æ¢}}
{{dsc|{{c/core|std::codecvt&lt;char32_t, char, std::mbstate_t&gt;}}&lt;br&gt;{{mark life|since=c++11|deprecated=c++20}}|åœ¨ UTF-32 å’Œ UTF-8 é—´è½¬æ¢}}
{{dsc|{{c/core|std::codecvt&lt;char32_t, char8_t, std::mbstate_t&gt;}}&lt;br&gt;{{mark since c++20}}|åœ¨ UTF-32 å’Œ UTF-8 é—´è½¬æ¢}}
{{dsc|{{c/core|std::codecvt&lt;wchar_t, char, std::mbstate_t&gt;}}|åœ¨ç³»ç»ŸåŸç”Ÿå®½å’Œå•å­—èŠ‚çª„å­—ç¬¦é›†é—´è½¬æ¢}}
{{dsc end}}

===åµŒå¥—ç±»å‹===
{{dsc begin}}
{{dsc hitem|ç±»å‹|å®šä¹‰}}
{{dsc|{{tt|intern_type}}|{{tt|InternT}}}}
{{dsc|{{tt|extern_type}}|{{tt|ExternT}}}}
{{dsc|{{tt|state_type}}|{{tt|StateT}}}}
{{dsc end}}

{{cpp/locale/facet data members}}

===æˆå‘˜å‡½æ•°===
{{dsc begin}}
{{dsc mem ctor|cpp/locale/codecvt/codecvt|æ„é€ æ–°çš„ {{tt|codecvt}} åˆ»é¢}}
{{dsc inc|cpp/locale/codecvt/dsc out}}
{{dsc inc|cpp/locale/codecvt/dsc in}}
{{dsc inc|cpp/locale/codecvt/dsc unshift}}
{{dsc inc|cpp/locale/codecvt/dsc encoding}}
{{dsc inc|cpp/locale/codecvt/dsc always_noconv}}
{{dsc inc|cpp/locale/codecvt/dsc length}}
{{dsc inc|cpp/locale/codecvt/dsc max_length}}
{{dsc end}}

===å—ä¿æŠ¤æˆå‘˜å‡½æ•°===
{{dsc begin}}
{{dsc prot mem dtor|cpp/locale/codecvt/~codecvt|é”€æ¯ {{tt|codecvt}} åˆ»é¢}}
{{dsc inc|cpp/locale/codecvt/dsc do_out}}
{{dsc inc|cpp/locale/codecvt/dsc do_in}}
{{dsc inc|cpp/locale/codecvt/dsc do_unshift}}
{{dsc inc|cpp/locale/codecvt/dsc do_encoding}}
{{dsc inc|cpp/locale/codecvt/dsc do_always_noconv}}
{{dsc inc|cpp/locale/codecvt/dsc do_length}}
{{dsc inc|cpp/locale/codecvt/dsc do_max_length}}
{{dsc end}}

{{cpp/locale/codecvt_base/inherit}}

===ç¤ºä¾‹===
{{example
|ä¸‹ä¾‹ç¤ºä¾‹ç”¨åœ¨ {{c/core|codecvt&lt;wchar_t, char, std::mbstate_t&gt;}} å®ç° UTF-8 è½¬æ¢çš„æœ¬åœ°ç¯å¢ƒè¯»å– UTF-8 ç¯å¢ƒï¼Œå¹¶ç”¨ {{tt|std::codecvt}} çš„æ ‡å‡†ç‰¹åŒ–è½¬æ¢ UTF-8 å­—ç¬¦ä¸²åˆ° UTF-16ã€‚
|code=
#include &lt;codecvt&gt;
#include &lt;cstdint&gt;
#include &lt;fstream&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;locale&gt;
#include &lt;string&gt;

// å·¥å…·åŒ…è£…å™¨ï¼Œç”¨äºä¸º wstring/wbuffer é€‚é…ç»‘å®šåˆ°æœ¬åœ°ç¯å¢ƒçš„åˆ»é¢
template&lt;class Facet&gt;
struct deletable_facet : Facet
{
    template&lt;class... Args&gt;
    deletable_facet(Args&amp;&amp;... args) : Facet(std::forward&lt;Args&gt;(args)...) {}
    ~deletable_facet() {}
};

int main()
{
    // UTF-8 çª„å¤šå­—èŠ‚ç¼–ç 
    std::string data = reinterpret_cast&lt;const char*&gt;(+u8"z\u00df\u6c34\U0001f34c");
                       // æˆ– reinterpret_cast&lt;const char*&gt;(+u8"zÃŸæ°´ğŸŒ")
                       // æˆ– "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9f\x8d\x8c"
    
    std::ofstream("text.txt") &lt;&lt; data;
    
    // ä½¿ç”¨ç³»ç»Ÿæä¾›çš„æœ¬åœ°ç¯å¢ƒçš„ codecvt åˆ»é¢
    std::wifstream fin("text.txt");
    // ä» wifstream çš„è¯»å–å°†ä½¿ç”¨ codecvt&lt;wchar_t, char, std::mbstate_t&gt;
    // æ­¤æœ¬åœ°ç¯å¢ƒçš„ codecvt ä» UTF-8 è½¬æ¢åˆ° UCS4ï¼ˆåœ¨å¦‚ Linux çš„ç³»ç»Ÿä¸Šï¼‰
    fin.imbue(std::locale("en_US.UTF-8"));
    std::cout &lt;&lt; "æ­¤ UTF-8 æ–‡ä»¶åŒ…å«ä»¥ä¸‹ UCS4 ç¼–ç å•å…ƒï¼š\n" &lt;&lt; std::hex;
    for (wchar_t c; fin &gt;&gt; c;)
        std::cout &lt;&lt; "U+" &lt;&lt; std::setw(4) &lt;&lt; std::setfill('0')
                  &lt;&lt; static_cast&lt;uint32_t&gt;(c) &lt;&lt; ' ';
    
    // ä½¿ç”¨æ ‡å‡†ï¼ˆæœ¬åœ°ç¯å¢ƒæ— å…³ï¼‰codecvt åˆ»é¢
    std::wstring_convert&lt;
        deletable_facet&lt;std::codecvt&lt;char16_t, char, std::mbstate_t&gt;&gt;, char16_t&gt; conv16;
    std::u16string str16 = conv16.from_bytes(data);
    
    std::cout &lt;&lt; "\n\næ­¤ UTF-8 æ–‡ä»¶åŒ…å«ä»¥ä¸‹ UTF-16 ç¼–ç å•å…ƒï¼š\n"
              &lt;&lt; std::hex;
    for (char16_t c : str16)
        std::cout &lt;&lt; "U+" &lt;&lt; std::setw(4) &lt;&lt; std::setfill('0')
                  &lt;&lt; static_cast&lt;uint16_t&gt;(c) &lt;&lt; ' ';
    std::cout &lt;&lt; '\n';
}
|output=
æ­¤ UTF-8 æ–‡ä»¶åŒ…å«ä»¥ä¸‹ UCS4 ç¼–ç å•å…ƒï¼š
U+007a U+00df U+6c34 U+1f34c

æ­¤ UTF-8 æ–‡ä»¶åŒ…å«ä»¥ä¸‹ UTF-16 ç¼–ç å•å…ƒï¼š
U+007a U+00df U+6c34 U+d83c U+df4c
}}

===å‚é˜…===
{{cpp/locale/unicode string conversions}}
{{dsc begin}}
{{dsc inc|cpp/locale/dsc codecvt_base}}
{{dsc inc|cpp/locale/dsc codecvt_byname}}
{{dsc inc|cpp/locale/dsc codecvt_utf8}}
{{dsc inc|cpp/locale/dsc codecvt_utf16}}
{{dsc inc|cpp/locale/dsc codecvt_utf8_utf16}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}