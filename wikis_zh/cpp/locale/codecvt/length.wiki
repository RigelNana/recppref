{{cpp/locale/codecvt/title|length, do_length}}
{{cpp/locale/codecvt/navbar}}
{{dcl begin}}
{{dcl header|locale}}
{{dcl|num=1|1=
public:
int length( StateT&amp; state, const ExternT* from, const ExternT* from_end,
            std::size_t max ) const;
}}
{{dcl|num=2|1=
protected:
virtual int do_length( StateT&amp; state, const ExternT* from, const ExternT* from_end,
                       std::size_t max ) const;
}}
{{dcl end}}

@1@ å…¬å¼€æˆå‘˜å‡½æ•°ï¼Œè°ƒç”¨æœ€ç»ˆæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•° {{tt|do_length}}ã€‚

@2@ ç»™å®šåˆå§‹è½¬æ¢çŠ¶æ€ {{c|state}}ï¼Œå°è¯•å°†æ¥è‡ª {{range|from|from_end}} å®šä¹‰çš„å­—ç¬¦æ•°ç»„çš„ {{tt|ExternT}} å­—ç¬¦ï¼Œè½¬æ¢åˆ°æœ€å¤š {{c|max}} ä¸ª {{tt|InternT}} å­—ç¬¦ï¼Œå¹¶è¿”å›è¿™ç§è½¬æ¢ä¼šæ¶ˆè€—çš„ {{tt|ExternT}} å­—ç¬¦æ•°ã€‚å¦‚åŒä»¥å¯¹æŸè™šæ„çš„ {{tt|[to, to + max)}} è¾“å‡ºç¼“å†²åŒºæ‰§è¡Œ {{c|do_in(state, from, from_end, from, to, to + max, to)}} ä¸€èˆ¬ä¿®æ”¹ {{c|state}}ã€‚

===è¿”å›å€¼===
å‡å¦‚ä»¥ {{lc|do_in()}} è½¬æ¢ç›´è‡³æ¶ˆè€—æ‰€æœ‰ {{c|from_end - from}} ä¸ªå­—ç¬¦ï¼Œæˆ–äº§ç”Ÿ {{c|max}} ä¸ª {{tt|InternT}} å­—ç¬¦ï¼Œæˆ–å‡ºç°è½¬æ¢é”™è¯¯æ—¶ï¼Œæ¶ˆè€—çš„ {{tt|ExternT}} å­—ç¬¦æ•°ã€‚

æ— è½¬æ¢ç‰¹åŒ– {{c|std::codecvt&lt;char, char, std::mbstate_t&gt;}} è¿”å› {{c|std::min(max, from_end - from)}}ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;locale&gt;
#include &lt;string&gt;

int main()
{
    using facet_type = std::codecvt&lt;wchar_t, char, std::mbstate_t&gt;;
    
    // çª„å¤šå­—èŠ‚ç¼–ç 
    std::string s = "z\u00df\u6c34\U0001d10b"; // æˆ– u8"zÃŸæ°´ğ„‹"
              // æˆ– "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9d\x84\x8b";
    
    std::locale loc("en_US.UTF-8");
    facet_type const&amp; codecvt_facet = std::use_facet&lt;facet_type&gt;(loc);
    std::mbstate_t mb = std::mbstate_t();
    std::cout &lt;&lt; s.size() &lt;&lt; " ä¸ªå­—èŠ‚ä¸­åªæœ‰å¼€å¤´çš„ "
              &lt;&lt; codecvt_facet.length(mb, &amp;s[0], &amp;s[s.size()], 2)
              &lt;&lt; " ä¸ªå­—èŠ‚ä¼šè¢«æ¶ˆè€—ï¼Œä»¥äº§ç”Ÿå¼€å¤´çš„ 2 ä¸ªå­—ç¬¦\n";
}
|output=
10 ä¸ªå­—èŠ‚ä¸­åªæœ‰å¼€å¤´çš„ 3 ä¸ªå­—èŠ‚ä¼šè¢«æ¶ˆè€—ï¼Œä»¥äº§ç”Ÿå¼€å¤´çš„ 2 ä¸ªå­—ç¬¦
}}

===ç¼ºé™·æŠ¥å‘Š===
{{dr list begin}}
{{dr list item|wg=lwg|dr=75|std=C++98|before=æœªæŒ‡æ˜å¯¹ {{tt|state}} çš„å½±å“|after=å·²æŒ‡æ˜}}
{{dr list item|wg=lwg|dr=305|std=C++98|before={{tt|std::codecvt&lt;char, char, std::mbstate_t&gt;::do_length}}&lt;br&gt;è¦æ±‚è¿”å› {{c|std::min(max, from_end - from)}}|after=ä¸å†è¦æ±‚}}
{{dr list end}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/locale/codecvt/dsc do_in}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}