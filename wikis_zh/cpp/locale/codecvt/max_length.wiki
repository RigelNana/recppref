{{cpp/locale/codecvt/title|max_length, do_max_length}}
{{cpp/locale/codecvt/navbar}}
{{dcl begin}}
{{dcl header|locale}}
{{dcl rev multi|num=1|until1=c++11|dcl1=
public:
int max_length() const throw();
|dcl2=
public:
int max_length() const noexcept;
}}
{{dcl rev multi|num=2|until1=c++11|dcl1=
protected:
virtual int do_max_length() const throw();
|dcl2=
protected:
virtual int do_max_length() const noexcept;
}}
{{dcl end}}

@1@ 公开成员函数，调用最终派生类的成员函数 {{tt|do_max_length}}。

@2@ 返回对于任何合法范围 {{range|from|from_end}} 和任何合法 {{tt|state}}，{{c|do_length(state, from, from_end, 1)}} 所能返回的最大值。

===返回值===
若以 {{lc|in()}} 转换生成一个 {{tt|InternT}} 字符，能消耗的最大 {{tt|ExternT}} 字符数。

无转换特化 {{c|std::codecvt&lt;char, char, std::mbstate_t&gt;}} 返回 {{c|1}}。

===注解===
若编码依赖状态（{{c|1=encoding() == -1}}），则为生成一个内部字符可能消耗多于 {{tt|max_length()}} 个外部字符。

===示例===
{{example
|code=
#include &lt;codecvt&gt;
#include &lt;iostream&gt;
#include &lt;locale&gt;

int main()
{
    std::cout &lt;&lt; "在 codecvt_utf8 中，最长多字节字符为 "
              &lt;&lt; std::codecvt_utf8&lt;wchar_t&gt;().max_length() &lt;&lt; " 字节\n";

    std::cout &lt;&lt; "在消耗头部的 codecvt_utf8 中，最长多字节字符为 "
              &lt;&lt; std::codecvt_utf8&lt;wchar_t,
                                   0x10ffff,
                                   std::consume_header&gt;().max_length() &lt;&lt; " 字节\n";

    std::cout &lt;&lt; "在本系统的 en_US.utf8 中，最长多字节字符为 "
              &lt;&lt; std::use_facet&lt;std::codecvt&lt;wchar_t, char, std::mbstate_t&gt;&gt;(
                     std::locale("en_US.utf8")
                 ).max_length() &lt;&lt; " 字节\n";

    std::cout &lt;&lt; "在本系统的 zh_CN.gb18030 中，最长多字节字符为 "
              &lt;&lt; std::use_facet&lt;std::codecvt&lt;wchar_t, char, std::mbstate_t&gt;&gt;(
                     std::locale("zh_CN.gb18030")
                 ).max_length() &lt;&lt; " 字节\n";
}
|output=
在 codecvt_utf8 中，最长多字节字符为 4 字节
在消耗头部的 codecvt_utf8 中，最长多字节字符为 7 字节
在本系统的 en_US.utf8 中，最长多字节字符为 6 字节
在本系统的 zh_CN.gb18030 中，最长多字节字符为 4 字节
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc MB_CUR_MAX}}
{{dsc inc|cpp/locale/codecvt/dsc do_encoding}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}