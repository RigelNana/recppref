{{cpp/locale/codecvt/title|in|do_in}}
{{cpp/locale/codecvt/navbar}}
{{dcl begin}}
{{dcl header|locale}}
{{dcl|num=1|1=
public:
result in( StateT&amp; state,
           const ExternT* from,
           const ExternT* from_end,
           const ExternT*&amp; from_next,
           InternT* to,
           InternT* to_end,
           InternT*&amp; to_next ) const;
}}
{{dcl|num=2|1=
protected:
virtual result do_in( StateT&amp; state,
                      const ExternT* from,
                      const ExternT* from_end,
                      const ExternT*&amp; from_next,
                      InternT* to,
                      InternT* to_end,
                      InternT*&amp; to_next ) const;
}}
{{dcl end}}

@1@ å…¬å¼€æˆå‘˜å‡½æ•°ï¼Œè°ƒç”¨æœ€ç»ˆæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•° {{tt|do_in}}ã€‚

@2@ å¦‚æœæ­¤ {{tt|codecvt}} åˆ»é¢å®šä¹‰ä¸€ç§è½¬æ¢ï¼Œé‚£ä¹ˆå°†æ¥è‡ªæºèŒƒå›´ {{range|from|from_end}} çš„å¤–éƒ¨å­—ç¬¦ç¿»è¯‘åˆ°å†…éƒ¨å­—ç¬¦ï¼Œå°†ç»“æœç½®äºä» {{c|to}} å¼€å§‹çš„åç»§ä½ç½®ã€‚æœ€å¤šè½¬æ¢ {{c|from_end - from}} ä¸ªå¤–éƒ¨å­—ç¬¦ï¼Œæœ€å¤šå†™å…¥ {{c|to_end - to}} ä¸ªå†…éƒ¨å­—ç¬¦ã€‚ä»¤ {{c|from_next}} å’Œ {{c|to_next}} æŒ‡å‘æœ€åæˆåŠŸè½¬æ¢å…ƒç´ çš„åä¸€ä½ç½®ã€‚

å¦‚æœæ­¤ {{tt|codecvt}} åˆ»é¢ä¸å®šä¹‰è½¬æ¢ï¼Œé‚£ä¹ˆä¸ä¼šè½¬æ¢å­—ç¬¦ã€‚è®¾ç½® {{c|to_next}} ç­‰äº {{c|to}}ï¼Œä¸æ›´æ”¹ {{c|state}}ï¼Œå¹¶è¿”å› {{lc|std::codecvt_base::noconv}}ã€‚

å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œ{{c|do_in(state, from, from_end, from_next, to, to + 1, to_next)}} å¿…é¡»è¿”å› {{tt|ok}}ï¼š
* æ­¤ {{tt|codecvt}} åˆ»é¢ç”¨äº {{ltt|cpp/io/basic_filebuf}}ï¼Œå¹¶ä¸”
* {{c|do_in(state, from, from_end, from_next, to, to_end, to_next)}} åœ¨ {{c|1=from != from_end}} æ—¶ä¼šè¿”å› {{tt|ok}}ã€‚

===è¿”å›å€¼===
{{lc|std::codecvt_base::result}} ç±»å‹çš„å€¼ï¼ŒæŒ‰ä»¥ä¸‹æ–¹å¼æŒ‡ç¤ºæˆåŠŸçŠ¶å†µï¼š
{{dsc begin}}
{{dsc|{{tt|ok}}|è½¬æ¢å®Œæˆ}}
{{dsc|{{tt|partial}}|è¾“å‡ºç¼“å†²åŒºçš„ä¸­ç©ºé—´ä¸è¶³ï¼Œæˆ–æºç¼“å†²çš„æœªæœŸå¾…ç»“å°¾}}
{{dsc|{{tt|error}}|é‡åˆ°æ— æ³•è½¬æ¢çš„å­—ç¬¦}}
{{dsc|{{tt|noconv}}|æ­¤åˆ»é¢æ— è½¬æ¢ï¼Œä¸å†™å…¥è¾“å‡º}}
{{dsc end}}

æ— è½¬æ¢ç‰¹åŒ– {{c|std::codecvt&lt;char, char, std::mbstate_t&gt;}} å§‹ç»ˆè¿”å› {{lc|std::codecvt_base::noconv}}ã€‚

===æ³¨è§£===
è¦æ±‚ {{c|1=from &lt;= from_end &amp;&amp; to &lt;= to_end}} ä¸” {{c|state}} è¦ä¹ˆè¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ï¼Œè¦ä¹ˆä»¥è½¬æ¢åºåˆ—ä¸­å‰è¶‹çš„å­—ç¬¦è·å¾—ã€‚

{{c|state}} ä¸Šçš„æ•ˆæœæ˜¯æœ‰æ„æœªæŒ‡å®šçš„ã€‚æ ‡å‡†åˆ»é¢ä¸­ï¼Œå®ƒç”¨äºç»´æŠ¤è¯¸å¦‚è°ƒç”¨ {{lc|std::mbsrtowcs}} æ—¶çš„çŠ¶æ€ï¼Œä»è€Œè¢«æ›´æ–°ä¸ºåæ˜ æœ€åè¢«å¤„ç†å¤–éƒ¨å­—ç¬¦åçš„è½¬æ¢çŠ¶æ€ï¼Œä½†æ˜¯ç”¨æˆ·å®šä¹‰åˆ»é¢å¯ä»¥è‡ªç”±åœ°ç”¨å®ƒç»´æŠ¤ä»»ä½•å…¶ä»–çŠ¶æ€ï¼Œä¾‹å¦‚è®¡é‡é‡åˆ°çš„ç‰¹æ®Šå­—ç¬¦æ•°ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;locale&gt;
#include &lt;string&gt;

int main()
{
    std::locale::global(std::locale("en_US.utf8"));
    auto const&amp; f = std::use_facet&lt;std::codecvt&lt;wchar_t, char, std::mbstate_t&gt;&gt;
        (std::locale());
    std::string external = u8"z\u00df\u6c34\U0001d10b"; // æˆ– u8"zÃŸæ°´ğ„‹"
                          // æˆ– "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9d\x84\x8b";
    
    // æ³¨æ„ wstring_convert èƒ½è¿›è¡Œä¸‹åˆ—å†…å®¹
    std::mbstate_t mb = std::mbstate_t(); // åˆå§‹è¿ç§»çŠ¶æ€
    std::wstring internal(external.size(), '\0'); 
    const char* from_next;
    wchar_t* to_next;
    f.in(mb, &amp;external[0], &amp;external[external.size()], from_next,
             &amp;internal[0], &amp;internal[internal.size()], to_next);
    // ä¸ºç®€ç•¥è·³è¿‡é”™è¯¯æ£€æŸ¥
    internal.resize(to_next - &amp;internal[0]);
    
    std::wcout &lt;&lt; L"åœ¨å®½ç¼–ç ä¸‹çš„å­—ç¬¦ä¸²ï¼š" &lt;&lt; internal &lt;&lt; '\n';
}
|output=
åœ¨å®½ç¼–ç ä¸‹çš„å­—ç¬¦ä¸²ï¼šzÃŸæ°´ğ„‹
}}

===ç¼ºé™·æŠ¥å‘Š===
{{dr list begin}}
{{dr list item|wg=lwg|dr=76|std=C++98|before=ä¸æ˜ç¡®è½¬æ¢æ˜¯å¦éœ€è¦æ”¯æŒæ¯æ¬¡è½¬æ¢å•ä¸ªå†…éƒ¨å­—ç¬¦|after=åªæœ‰ç”¨äº {{ltt|cpp/io/basic_filebuf}} æ—¶æ‰éœ€è¦}}
{{dr list end}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/io/basic_filebuf/dsc underflow}}
{{dsc inc|cpp/locale/wstring_convert/dsc from_bytes}}
{{dsc inc|cpp/string/multibyte/dsc mbsrtowcs}}
{{dsc inc|cpp/locale/codecvt/dsc do_out}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}