{{cpp/locale/wstring_convert/title|to_bytes}}
{{cpp/locale/wstring_convert/navbar}}
{{dcl begin}}
{{dcl header|locale}}
{{dcl|num=1|
byte_string to_bytes( Elem wchar );
}}
{{dcl|num=2|
byte_string to_bytes( const Elem* wptr );
}}
{{dcl|num=3|
byte_string to_bytes( const wide_string&amp; wstr );
}}
{{dcl|num=4|
byte_string to_bytes( const Elem* first, const Elem* last );
}}
{{dcl end}}

用 {{rlpsi|/#cvtptr}} 指向的刻面将宽序列转换成字节字符串。

@1@ 宽序列只包含单个元素 {{c|byte}}。

@2@ 宽序列是从 {{c|ptr}} 开始的空终止序列。

@3@ 宽序列是 {{c|str}} 包含的序列。

@4@ 宽序列是范围 {{range|first|last}}。

在转换开始前，如果 {{c|*this}} '''不是'''以构造函数重载 {{rlp|wstring_convert|(3)}} 构造的，那么会将 {{rlpsi|/#cvtstate}} 设为它的默认值（初始转换状态）。

成功转换的输入元素数量会存储到 {{rlpsi|/#cvtcount}} 中。

===返回值===
如果转换成功，那么返回转换结果。否则，如果 {{c|*this}} 是以构造函数重载 {{rlp|wstring_convert|(4)}} 构造的，那么就会返回 {{box|{{rlpsi|/#byte_err_string}}}}。

===异常===
如果转换失败，并且 {{c|*this}} '''不是'''以构造函数重载 {{rlp|wstring_convert|(4)}} 构造的，那么就会抛出 {{lc|std::range_error}}。

===示例===
{{example
|code=
#include &lt;codecvt&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;locale&gt;
#include &lt;string&gt;

// 输出用的工具函数
void hex_print(const std::string&amp; s)
{
    std::cout &lt;&lt; std::hex &lt;&lt; std::setfill('0');
    for(unsigned char c : s)
        std::cout &lt;&lt; std::setw(2) &lt;&lt; static_cast&lt;int&gt;(c) &lt;&lt; ' ';
    std::cout &lt;&lt; std::dec &lt;&lt; '\n';
}

int main()
{
    // 宽字符数据
    std::wstring wstr = L"z\u00df\u6c34\U0001f34c"; // 或 L"zß水🍌"
    
    // 宽到 UTF-8
    std::wstring_convert&lt;std::codecvt_utf8&lt;wchar_t&gt;&gt; conv1;
    std::string u8str = conv1.to_bytes(wstr);
    std::cout &lt;&lt; "UTF-8 转换产生了 " &lt;&lt; u8str.size() &lt;&lt; " 个字节：\n";
    hex_print(u8str);
    
    // 宽到 UTF-16le
    std::wstring_convert&lt;std::codecvt_utf16&lt;wchar_t, 0x10ffff, std::little_endian&gt;&gt; conv2;
    std::string u16str = conv2.to_bytes(wstr);
    std::cout &lt;&lt; "UTF-16le 转换产生了 " &lt;&lt; u16str.size() &lt;&lt; " 个字节：\n";
    hex_print(u16str);
}
|output=
UTF-8 转换产生了 10 个字节：
7a c3 9f e6 b0 b4 f0 9f 8d 8c 
UTF-16le 转换产生了 10 个字节：
7a 00 df 00 34 6c 3c d8 4c df
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/locale/wstring_convert/dsc from_bytes}}
{{dsc inc|cpp/string/multibyte/dsc wcsrtombs}}
{{dsc inc|cpp/locale/codecvt/dsc do_out}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}