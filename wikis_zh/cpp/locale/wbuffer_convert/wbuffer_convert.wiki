{{cpp/locale/wbuffer_convert/title|wbuffer_convert}}
{{cpp/locale/wbuffer_convert/navbar}}
{{dcl begin}}
{{dcl|num=1|
wbuffer_convert() : wbuffer_convert(nullptr) {}
}}
{{dcl|num=2|1=
explicit wbuffer_convert( std::streambuf* bytebuf,
                          Codecvt* pcvt = new Codecvt,
                          state_type state = state_type() );
}}
{{dcl|num=3|since=c++14|1=
wbuffer_convert( const std::wbuffer_convert&amp; ) = delete;
}}
{{dcl end}}

{|class="wikitable" style="text-align: center;"
!rowspan=2|{{nbsp|2}}重载{{nbsp|2}}
!colspan=3|{{rlps|/#数据成员}}
|-
!style="font-weight: normal;"|{{tti|bufptr}}
!style="font-weight: normal;"|{{tti|cvtptr}}
!style="font-weight: normal;"|{{tti|cvtstate}}
|-
|{{v|1}}
|{{nbsp}}{{c|nullptr}}{{nbsp}}
|{{nbsp}}{{c|new Codecvt}}{{nbsp}}
|{{nbsp}}{{c|state_type()}}{{nbsp}}
|-
|{{v|2}}
|{{c|bytebuf}}
|{{c|pcvt}}
|{{c|state}}
|}

@2@ 如果 {{c|cvtptr}} 是空指针，那么行为未定义。

@3@ 复制构造函数被弃置。{{tt|wbuffer_convert}} 非{{named req|CopyConstructible|可复制构造}}。

===参数===
{{par begin}}
{{par|bytebuf|指向底层缓冲区的指针}}
{{par|pcvt|指向独立（不为本地环境所管理）刻面的指针}}
{{par|state|字符转换状态的初始值}}
{{par end}}

===示例===
{{example
|code=
#include &lt;codecvt&gt;
#include &lt;iostream&gt;
#include &lt;locale&gt;
#include &lt;sstream&gt;

int main()
{
    // 包装 UTF-8 字符串流于 UCS4 wbuffer_convert 中
    std::stringbuf utf8buf("z\u00df\u6c34\U0001f34c");  // 或 u8"zß水🍌"
                       // 或 "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9f\x8d\x8c";
    std::wbuffer_convert&lt;std::codecvt_utf8&lt;wchar_t&gt;&gt; conv_in(&amp;utf8buf);
    std::wistream ucsbuf(&amp;conv_in);
    std::cout &lt;&lt; "通过 wbuffer_convert 从 UTF-8 stringbuf 读取：";
              &lt;&lt; std::hex &lt;&lt; std::showbase;
    for (wchar_t c; ucsbuf.get(c);)
        std::cout &lt;&lt; static_cast&lt;std::wint_t&gt;(c) &lt;&lt; ' ';
    
    // 包装具 UTF-8 的 std::cout 于 UCS4 wbuffer_convert 中以输出 UCS4
    std::wbuffer_convert&lt;std::codecvt_utf8&lt;wchar_t&gt;&gt; conv_out(std::cout.rdbuf());
    std::wostream out(&amp;conv_out);
    std::cout &lt;&lt; "\n通过 wbuffer_convert 向 std::cout 发送 UCS4 数据：";
    out &lt;&lt; L"z\u00df\u6c34\U0001f34c\n";
}
|output=
通过 wbuffer_convert 从 UTF-8 stringbuf 读取：0x7a 0xdf 0x6c34 0x1f34c 
通过 wbuffer_convert 向 std::cout 发送 UCS4 数据：zß水🍌
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|dr=2175|std=C++11|before={{c|pcvt}} 可以是空指针|after=此时行为未定义}}
{{dr list item|wg=lwg|dr=2176|std=C++11|before=构造函数是隐式的|after=改成显式的}}
{{dr list item|paper=P0935R0|std=C++11|before=默认构造函数是显式的|after=改成隐式的}}
{{dr list end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}