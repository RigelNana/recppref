{{cpp/io/strstreambuf/title|freeze}}
{{cpp/io/strstreambuf/navbar}}
{{ddcl|deprecated=c++98|removed=c++26|1=
void freeze( bool freezefl = true );
}}

若缓冲区使用动态分配，则设置流的冻结状态为 {{c|freezefl}}。

流冻结时，{{lc|overflow()}} 不会重分配缓冲区，而{{rlpt|~strstreambuf|析构函数}}不会解分配缓冲区（因而导致内存泄漏）。

===参数===
{{par begin}}
{{par|freezefl|设置冻结状态到的新值}}
{{par end}}

===返回值===
（无）

===注解===
每次对 {{lc|str()}} 的调用都冻结流，以保持其所返回的指针的合法性。为允许析构函数解分配缓冲区，需要显式调用 {{c|freeze(false)}}。

===示例===
{{example
|此示例中，底层数组的初始分配为 16 字节。
|code=
#include &lt;iostream&gt;
#include &lt;strstream&gt;
 
int main()
{
    {
        std::strstream dyn; // 动态分配的读/写缓冲区
        dyn &lt;&lt; "Test: " &lt;&lt; 1.23; // 注意：无 std::ends，以演示后附行为
        std::cout &lt;&lt; "动态缓冲区持有 " &lt;&lt; dyn.pcount() &lt;&lt; " 个字符: '";
        std::cout.write(dyn.str(), dyn.pcount()) &lt;&lt; "'\n";
        // 缓冲区现在冻结，进一步输出将不使缓冲区增长
        dyn &lt;&lt; "more output, hopefully enough to run out of the allocated space"
            &lt;&lt; std::ends;
        std::cout &lt;&lt; "进行更多输出后，它持有 "
                  &lt;&lt; dyn.pcount() &lt;&lt; " 个字符: '" &lt;&lt; dyn.str() &lt;&lt; "'\n";
        dyn.freeze(false); // 在析构函数前解冻
    } // 析构函数释放内存
 
    {
        char arr[20];
        std::ostrstream st(arr, sizeof arr); // 固定大小缓冲区
        st &lt;&lt; 1.23; // 注意：无 std::ends，以演示后附行为
        std::cout &lt;&lt; "静态缓冲区持有 "
                  &lt;&lt; st.pcount() &lt;&lt; " 个字符: '";
        std::cout.write(st.str(), st.pcount());
        std::cout &lt;&lt; "'\n";
        st &lt;&lt; "more output, hopefully enough to run out of the allocated space"
           &lt;&lt; std::ends;
        std::cout &lt;&lt; "static buffer holds "
                  &lt;&lt; st.pcount() &lt;&lt; " characters: '";
        std::cout.write(st.str(), st.pcount());
        std::cout &lt;&lt; "'\n";
    } // 无待解分配者，无需解冻
}
|output=
动态缓冲区持有 10 个字符: 'Test: 1.23'
进行更多输出后，它持有 16 个字符: 'Test: 1.23more o'
静态缓冲区持有 4 个字符: '1.23'
静态缓冲区持有 20 个字符: '1.23more output, hop'
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/io/strstream/dsc freeze|strstream}}
{{dsc inc|cpp/io/strstream/dsc freeze|ostrstream}}
{{dsc inc|cpp/io/strstreambuf/dsc ~strstreambuf}}
{{dsc inc|cpp/io/strstreambuf/dsc overflow}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}