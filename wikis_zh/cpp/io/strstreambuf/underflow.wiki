{{cpp/io/strstreambuf/title|underflow}}
{{cpp/io/strstreambuf/navbar}}
{{ddcl|deprecated=c++98|removed=c++26|1=
protected:
virtual int_type underflow();
}}

从缓冲区的获取区读取下个字符。

若输入序列拥有可用读位置（{{c|gptr() &lt; egptr()}}），则返回 {{c|(unsigned char)(*gptr())}}。

否则，若 {{lc|pptr()}} 非空且 {{c|pptr() &gt; egptr()}}（存在放置区，且它位于获取区之后），则以增加 {{lc|egptr()}} 到 {{c|gptr()}} 和 {{lc|pptr()}} 间的某个值扩展获取区的结尾，以包含最近写入到放置区中的字符，然后返回 {{c|(unsigned char)(*gptr())}} 。

否则，返回 {{lc|EOF}} 以指示失败。

===参数===
（无）

===返回值===
成功时为获取区中下个字符 {{c|(unsigned char)(*gptr())}} ，失败时为 {{lc|EOF}} 。

===示例===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;strstream&gt;

struct mybuf : std::strstreambuf
{
    int_type overflow(int_type c) 
    {
        std::cout &lt;&lt; "overflow() 前：获取区的大小为 " &lt;&lt; egptr()-eback()
                  &lt;&lt; "，放置区的大小为 " &lt;&lt; epptr()-pbase() &lt;&lt; '\n';
        int_type rc = std::strstreambuf::overflow(c);
        std::cout &lt;&lt; "overflow() 后：获取区的大小为 " &lt;&lt; egptr()-eback()
                  &lt;&lt; "，放置区的大小为 " &lt;&lt; epptr()-pbase() &lt;&lt; '\n';
        return rc;
    }

    int_type underflow() 
    {
        std::cout &lt;&lt; "underflow() 前：获取区的大小为 " &lt;&lt; egptr()-eback()
                  &lt;&lt; "，放置区的大小为 " &lt;&lt; epptr()-pbase() &lt;&lt; '\n';
        int_type ch = std::strstreambuf::underflow();
        std::cout &lt;&lt; "underflow() 后：获取区的大小为 " &lt;&lt; egptr()-eback()
                  &lt;&lt; "，放置区的大小为 " &lt;&lt; epptr()-pbase() &lt;&lt; '\n';
        if (ch == EOF)
            std::cout &lt;&lt; "underflow() 返回 EOF\n";
        else
            std::cout &lt;&lt; "underflow() 返回 '" &lt;&lt; char(ch) &lt;&lt; "'\n";
        return ch;
    }
};

int main()
{
    mybuf sbuf; // 读写动态 strstreambuf
    std::iostream stream(&amp;sbuf);

    int n;
    stream &gt;&gt; n;
    stream.clear();
    stream &lt;&lt; "123";
    stream &gt;&gt; n;
    std::cout &lt;&lt; n &lt;&lt; '\n';
}
|p=true
|output=
underflow() 前：获取区的大小为 0，放置区的大小为 0
underflow() 后：获取区的大小为 0，放置区的大小为 0
underflow() 返回 EOF
overflow() 前：获取区的大小为 0，放置区的大小为 0
overflow() 后：获取区的大小为 0，放置区的大小为 32
underflow() 前：获取区的大小为 0，放置区的大小为 32
underflow() 后：获取区的大小为 3，放置区的大小为 32
underflow() 返回 '1'
underflow() 前：获取区的大小为 3，放置区的大小为 32
underflow() 后：获取区的大小为 3，放置区的大小为 32
underflow() 返回 EOF
123
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/io/basic_streambuf/dsc underflow}}
{{dsc inc|cpp/io/basic_stringbuf/dsc underflow}}
{{dsc inc|cpp/io/basic_filebuf/dsc underflow}}
{{dsc inc|cpp/io/basic_streambuf/dsc sgetc}}
{{dsc inc|cpp/io/basic_istream/dsc get}}
{{dsc end}}

{{langlinks|en|ja}}