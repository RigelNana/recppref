{{cpp/io/basic_spanbuf/title|setbuf}}
{{cpp/io/basic_spanbuf/navbar}}
{{ddcl|since=c++23|
protected:
std::basic_streambuf&lt;CharT, Traits&gt;* setbuf( CharT *s, std::streamsize n ) override;
}}

使 {{tt|basic_spanbuf}} 实施缓冲区 {{range|s|s + n}} 上的 I/O。等价地调用 {{c|this-&gt;span(std::span&lt;CharT&gt;(s, n))}} 然后返回 {{c|this}}。

{| class="wikitable"
|-
! rowspan="2" | 打开模式中设置的位&lt;br&gt;（影响指向获取区的指针）
! colspan="3" | 设置后的返回值
|-
| {{lc|std::basic_streambuf::eback|eback()}}
| {{lc|std::basic_streambuf::gptr|gptr()}}
| {{lc|std::basic_streambuf::egptr|egptr()}}
|-
| {{c|std::ios_base::in}}
| {{c|s}}
| {{c|s}}
| {{c|s + n}}
|-
| colspan="4" | &lt;nowiki/&gt;
|-
! rowspan="2" | 打开模式中设置的位&lt;br&gt;（影响指向放置区的指针）
! colspan="3" | 设置后的返回值
|-
| {{lc|std::basic_streambuf::pbase|pbase()}}
| {{lc|std::basic_streambuf::pptr|pptr()}}
| {{lc|std::basic_streambuf::epptr|epptr()}}
|-
| {{c|std::ios_base::out &amp;&amp; !std::ios_base::ate}}
| {{c|s}}
| {{c|s}}
| {{c|s + n}}
|-
| {{c|std::ios_base::out &amp;&amp; std::ios_base::ate}}
| {{c|s}}
| {{c|s + n}}
| {{c|s + n}}
|}

此函数为受保护的虚函数，只可以通过 {{tt|pubsetbuf()}} 或派生自 {{lc|std::basic_spanbuf}} 的用户定义类的成员函数调用它。

===参数===
{{par begin}}
{{par | s | 指向用户提供的缓冲区的首个 {{tt|CharT}} 的指针}}
{{par | n | 用户提供的缓冲区中的 {{tt|CharT}} 元素数量}}
{{par end}}

===返回值===
{{c|this}}

===注解===
弃用的流缓冲 {{lc|std::strstreambuf}} 或 boost.IOStreams 设备 [http://www.boost.org/doc/libs/release/libs/iostreams/doc/classes/array.html#array {{tt|boost::basic_array}}] 亦能实现用户提供的 {{c|char}} 数组上的 I/O 缓冲。

===示例===
{{example}}

===参阅===
{{dsc begin}}
{{dsc inc | cpp/io/basic_streambuf/dsc pubsetbuf}}
{{dsc inc | cpp/io/basic_stringbuf/dsc setbuf}}
{{dsc inc | cpp/io/strstreambuf/dsc setbuf}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}