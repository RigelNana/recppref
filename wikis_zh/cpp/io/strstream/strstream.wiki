{{cpp/io/strstream/title|strstream}}
{{cpp/io/strstream/navbar}}
{{dcl begin}}
{{dcl|num=1|deprecated=c++98|removed=c++26|1=
strstream();
}}
{{dcl|num=2|deprecated=c++98|removed=c++26|1=
strstream( char* s, int n, std::ios_base::openmode mode =
                               std::ios_base::in {{!}} std::ios_base::out );
}}
{{dcl end}}

构造新的输入/输出 strstream 和它底层的 {{lc|std::strstreambuf}}。

@1@ 默认构造底层 {{lc|std::strstreambuf}}，这会创建动态成长的缓冲区，并以该 strstreambuf 成员的地址初始化基类。

@2@ 以底层 {{lc|std::strstreambuf}} 成员的地址初始化基类，该成员通过以下两种方式之一初始化，两者都会使用用户提供的数组：
:@a@ 如果 {{c|1=(mode &amp; app) == 0}}（{{c|mode}} 中未设置 {{c|app}} 位），那么通过调用 {{c|strstreambuf(s, n, s)}} 构造缓冲区。如果以 {{c|s}} 指向首元素的数组中的元素少于 {{c|n}} 个，那么行为未定义。
:@b@ 如果 {{c|1=(mode &amp; app) != 0}}（{{c|mode}} 中设置了 {{c|app}} 位），那么通过调用 {{c|strstreambuf(s, n, s + std::strlen(s))}} 构造缓冲区。如果以 {{c|s}} 指向首元素的数组中的元素少于 {{c|n}} 个，或数组不含合法的空终止字符序列，那么行为未定义。

===参数===
{{par begin}}
{{par|s|用作输出缓冲区的 {{c|char}} 数组}}
{{par|n|用作输出缓冲区的数组大小}}
{{par|mode|指定流打开模式。它是位掩码类型，定义下列常量（尽管只会使用 {{c|app}}）：
{{cpp/io/ios_base/openmode consts}}}}
{{par end}}

===示例===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;strstream&gt;

int main()
{
    // 动态缓冲区
    std::strstream s1;
    s1 &lt;&lt; 1 &lt;&lt; ' ' &lt;&lt; 3.14 &lt;&lt; " example" &lt;&lt; std::ends;
    std::cout &lt;&lt; "缓冲区持有：'" &lt;&lt; s1.str() &lt;&lt; "'\n";
    s1.freeze(false);

    int n;
    double d;
    std::string w;
    s1 &gt;&gt; n &gt;&gt; d &gt;&gt; w;
    std::cout &lt;&lt; "读取: n = " &lt;&lt; n
              &lt;&lt; ", d = " &lt;&lt; d
              &lt;&lt; ", w = '" &lt;&lt; w &lt;&lt; "'\n";

    // 静态缓冲区
    char arr[20] = "-1 -3.14 ";
    std::strstream s2(arr, sizeof arr, std::ios_base::app);
    s2 &lt;&lt; "another" &lt;&lt; std::ends;
    std::cout &lt;&lt; "缓冲区持有：'" &lt;&lt; s2.str() &lt;&lt; "'\n";
    s2 &gt;&gt; n &gt;&gt; d &gt;&gt; w;
    std::cout &lt;&lt; "读取：n = " &lt;&lt; n
              &lt;&lt; " d = " &lt;&lt; d
              &lt;&lt; " w = '" &lt;&lt; w &lt;&lt; "'\n";
}
|output=
缓冲区持有：'1 3.14 example'
读取：n = 1 d = 3.14 w = 'example'
缓冲区持有：'-1 -3.14 another'
读取：n = -1 d = -3.14 w = 'another'
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|dr=115|std=C++98|before=重载 (2) 只会考虑 {{c|1=mode &amp; app == 0}}&lt;br&gt;这种情况（{{tt|1===}} 的优先级高于 {{tt|&amp;}}）|after=考虑 {{c|1=(mode &amp; app) == 0}} 和&lt;br&gt;{{c|1=(mode &amp; app) != 0}} 这两种情况}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/io/strstreambuf/dsc strstreambuf}}
{{dsc inc|cpp/io/strstream/dsc constructor|istrstream}}
{{dsc inc|cpp/io/strstream/dsc constructor|ostrstream}}
{{dsc end}}

{{langlinks|en|ja}}