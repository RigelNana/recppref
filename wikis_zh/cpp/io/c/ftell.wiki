{{cpp/title|ftell}}
{{cpp/io/c/navbar}}
{{ddcl|header=cstdio|
long ftell( std::FILE* stream );
}}

返回文件流 {{tt|stream}} 的文件位置指示器的当前值。

若流以二进制模式打开，则此函数获得的值是距文件起始的字节数。

若流以文本模式打开，则此函数的返回值是未指定的，而且仅若作为 {{lc|std::fseek}} 的输入才有意义。

===参数===
{{par begin}}
{{par|stream|要检验的文件流}}
{{par end}}

===返回值===
成功时为文件位置指示器，若失败出现则为 {{c|-1L}}。失败时亦设置 {{lc|errno}}。

===注解===
{{windows IO-extensions note}}

===示例===
{{example|演示带有错误检查的 {{tt|std::ftell()}}。在一个文件上写入并读取一些浮点数。
|code=
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;iostream&gt;

// 如果不满足条件，则输出错误消息并退出程序。
void check(bool condition, const char* func, int line)
{
    if (condition)
        return;
    std::perror(func);
    std::cerr &lt;&lt; func &lt;&lt; " failed in file " &lt;&lt; __FILE__ &lt;&lt; " at line # " &lt;&lt; line - 1
              &lt;&lt; '\n';
    std::exit(EXIT_FAILURE);
}

int main()
{
    // 准备一个浮点值的数组。
    constexpr int SIZE {5};
    double A[SIZE] = {1.1, 2.2, 3.3, 4.4, 5.5};

    // 将数组写入文件。
    const char* fname = "/tmp/test.bin";
    FILE* file = std::fopen(fname, "wb");
    check(file != NULL, "fopen()", __LINE__);

    const int write_count = std::fwrite(A, sizeof(double), SIZE, file);
    check(write_count == SIZE, "fwrite()", __LINE__);

    std::fclose(file);

    // 将这些浮点值读入数组 B。
    double B[SIZE];
    file = std::fopen(fname, "rb");
    check(file != NULL, "fopen()", __LINE__);

    long pos = std::ftell(file); // 文件起始的位置指示器
    check(pos != -1L, "ftell()", __LINE__);
    std::cout &lt;&lt; "pos: " &lt;&lt; pos &lt;&lt; '\n';

    const int read_count = std::fread(B, sizeof(double), 1, file); // 读取一个浮点值
    check(read_count == 1, "fread()", __LINE__);

    pos = std::ftell(file); // 文件起始的位置指示器
    check(pos != -1L, "ftell()", __LINE__);
    std::cout &lt;&lt; "pos: " &lt;&lt; pos &lt;&lt; '\n';
    std::cout &lt;&lt; "B[0]: " &lt;&lt; B[0] &lt;&lt; '\n'; // 打印一个浮点值

    return EXIT_SUCCESS;
}
|p=true
|output=
pos: 0
pos: 8
B[0]: 1.1
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/io/c/dsc fgetpos}}
{{dsc inc|cpp/io/c/dsc fseek}}
{{dsc inc|cpp/io/c/dsc fsetpos}}
{{dsc inc|cpp/io/basic_istream/dsc tellg}}
{{dsc inc|cpp/io/basic_ostream/dsc tellp}}
{{dsc see c|c/io/ftell}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}