{{cpp/title|ungetwc}}
{{cpp/io/c/navbar}}
{{ddcl|header=cwchar|
std::wint_t ungetwc( std::wint_t ch, std::FILE* stream );
}}

若 {{tt|ch}} 不等于 {{lc|WEOF}}，则推入宽字符 {{tt|ch}} 到与流 {{tt|stream}} 关联的输入缓冲区，其方式使得 {{tt|stream}} 的后继读取操作将取得该宽字符。不修改与流关联的外部设备。

流重寻位操作 {{lc|std::fseek}}、{{lc|std::fsetpos}} 和 {{lc|std::rewind}} 丢弃 {{tt|ungetwc}} 的效果。

若调用 {{tt|ungetwc}} 多于一次，而无中间读取或重寻位，则可能失败（换言之，保证大小为 1 的回放缓冲区，但任何更大的缓冲区是实现定义的）。若成功进行了多次 {{tt|ungetwc}}，则读取操作以 {{tt|ungetwc}} 的逆序取得回放的宽字符。

若 {{tt|ch}} 等于 {{lc|WEOF}}，则操作失败而不影响流。

对 {{tt|ungetwc}} 的成功调用清除文件尾状态标志 {{lc|feof}}。

在流（无论文本还是二进制）上对 {{tt|ungetwc}} 的成功调用以未指定方式修改流位置指示器，但保证在以读取操作取得所有回放的宽字符后，流位置指示器等于其在 {{tt|ungetwc}} 之前的值。

===参数===
{{par begin}}
{{par|ch|要推入输入流缓冲区的宽字符}}
{{par|stream|要回放宽字符的文件流}}
{{par end}}

===返回值===
成功时返回 {{tt|ch}}。

失败时返回 {{c|WEOF}}，而给定的流保持不变。

===参阅===
{{dsc begin}}
{{dsc inc|cpp/io/c/dsc ungetc}}
{{dsc inc|cpp/io/c/dsc fgetwc}}
{{dsc see c|c/io/ungetwc}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}