{{cpp/io/basic_stringbuf/title|seekpos}}
{{cpp/io/basic_stringbuf/navbar}}
{{ddcl|1=
protected:
virtual pos_type seekpos( pos_type sp,
                          std::ios_base::openmode which = std::ios_base::in {{!}} std::ios_base::out );
}}

在可能时重寻位 {{lc|std::basic_streambuf::gptr}} 和/或 {{lc|std::basic_streambuf::pptr}} 到 {{c|sp}} 指示的位置。

相当于执行 {{c|seekoff(off_type(sp), std::ios_base::beg, which)}}。

===参数===
{{par begin}}
{{par|sp|流位置，例如由 {{lc|seekoff()}} 或 {{tt|seekpos()}} 获得者}}
{{par|which|定义会影响到的输入和/或输出序列。它可以是下列常量之一或它们的组合：
{{cpp/io/ios_base/openmode streambuf consts}}}}
{{par end}}

===返回值===
成功时返回 {{c|sp}}，失败时返回 {{c|pos_type(off_type(-1))}}。

===注解===
{{tt|seekpos()}} 会被 {{lc|std::basic_streambuf::pubseekpos()}} 调用，它又会被 {{lc|std::basic_istream::seekg()}} 和 {{lc|std::basic_ostream::seekp()}} 的单实参版本调用。

===示例===
{{example
|
|code=
#include &lt;sstream&gt;
#include &lt;iostream&gt;

struct mybuf : std::stringbuf
{
    mybuf(const std::string&amp; str) : std::stringbuf(str) {}
    
    pos_type seekpos(pos_type sp, std::ios_base::openmode which)
    {
        std::cout &lt;&lt; "在 seekpos(" &lt;&lt; sp &lt;&lt; ") 前，读取区域的大小是 "
                  &lt;&lt; egptr() - eback() &lt;&lt; "，其中有 "
                  &lt;&lt; egptr() - gptr() &lt;&lt; " 个可用读取位置。\n";
        
        pos_type rc = std::stringbuf::seekpos(sp, which);
        
        std::cout &lt;&lt; "seekpos() 返回 " &lt;&lt; rc &lt;&lt; "。\n在调用后，"
                  &lt;&lt; "读取区域的大小是 "
                  &lt;&lt; egptr() - eback() &lt;&lt; "，其中有 "
                  &lt;&lt; egptr() - gptr() &lt;&lt; " 个可用读取位置。\n";
        
        return rc;
    }
};

int main()
{
    mybuf buf("12345");
    std::iostream stream(&amp;buf);
    stream.seekg(2);
}
|output=
在 seekpos(2) 前，读取区域的大小是 5，其中有 5 个可用读取位置。
seekpos() 返回 2。
在调用后，读取区域的大小是 5，其中有 3 个可用读取位置。
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|dr=375|std=C++98|before={{lc|std::ios_base}} 的静态常量成员被误指定为 {{lc|std::basic_ios}} 的成员|after=已修正}}
{{dr list item|wg=lwg|dr=564|std=C++98|before=不明确如何重寻位 {{tt|gptr}} 和/或 {{tt|pptr}}|after=通过 {{lc|seekoff()}} 重寻位}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/io/basic_streambuf/dsc pubseekpos}}
{{dsc inc|cpp/io/basic_stringbuf/dsc seekoff}}
{{dsc inc|cpp/io/basic_filebuf/dsc seekpos}}
{{dsc inc|cpp/io/strstreambuf/dsc seekpos}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}