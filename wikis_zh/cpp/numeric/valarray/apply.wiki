{{cpp/numeric/valarray/title|apply}}
{{cpp/numeric/valarray/navbar}}
{{dcl begin}}
{{dcl| 
valarray&lt;T&gt; apply( T func(T) ) const;
}}
{{dcl|
valarray&lt;T&gt; apply( T func(const T&amp;) ) const;
}}
{{dcl end}}

返回同大小的新 {{tt|valarray}}，拥有通过应用 {{tt|func}} 函数到元素先前值取得的值。

===参数===
{{par begin}}
{{par|func|应用到值的函数}}
{{par end}}

===返回值===
作为结果的 {{tt|valarray}}，拥有通过应用 {{tt|func}} 取得的值。

===注解===
{{cpp/numeric/valarray/notes_ret}}

===Possible implementation===&lt;!--Note: This is moved from separated pages--&gt;
可以用表达式模板替换下面的直接实现以获得更高效率。
{{eq fun|1=
template&lt;class T&gt;
valarray&lt;T&gt; valarray&lt;T&gt;::apply(T func(T)) const
{
    valarray&lt;T&gt; other = *this;
    for (T&amp; i : other)
        i = func(i);
    return other;
}

template&lt;class T&gt;
valarray&lt;T&gt; valarray&lt;T&gt;::apply(T func(const T&amp;)) const
{
    valarray&lt;T&gt; other = *this;
    for (T&amp; i : other)
        i = func(i);
    return other;
}
}}

===示例===
{{example
|计算并打印前 10 个正整数的阶乘。
|code=
#include &lt;cmath&gt;
#include &lt;iostream&gt;
#include &lt;valarray&gt;

int main()
{
    std::valarray&lt;int&gt; v = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    v = v.apply([](int n) -&gt; int
                {
                    return std::round(std::tgamma(n + 1));
                });
    for (auto n : v)
        std::cout &lt;&lt; n &lt;&lt; ' ';
    std::cout &lt;&lt; '\n';
}
|output=
1 2 6 24 120 720 5040 40320 362880 3628800
}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/algorithm/dsc for_each}}
{{dsc inc|cpp/algorithm/ranges/dsc for_each}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}