{{cpp/title|mbsinit}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cwchar|
int mbsinit( const std::mbstate_t* ps);
}}

若 {{c|ps}} 不是空指针，则 {{tt|mbsinit}} 函数确定被指向的 {{lc|std::mbstate_t}} 对象是否描述初始迁移状态。

===注解===
尽管零初始化的 {{lc|std::mbstate_t}} 始终表示初始转换状态，亦可能有其他 {{lc|std::mbstate_t}} 值表示初始转换状态。

===参数===
{{par begin}}
{{par|ps|指向要检验的 {{lc|std::mbstate_t}} 对象的指针}}
{{par end}}

===返回值===
若 {{c|ps}} 不是空指针且不表示初始迁移状态则为 {{c|0}}，否则为非零值。

===示例===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cwchar&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

int main()
{
    // 允许 mbrlen() 以 UTF-8 多字节编码工作
    std::setlocale(LC_ALL, "en_US.utf8");
    // UTF-8 窄多字节编码
    std::string str = u8"水"; // 或 u8"\u6c34" 或 "\xe6\xb0\xb4"
    std::mbstate_t mb = std::mbstate_t();
    (void)std::mbrlen(&amp;str[0], 1, &amp;mb);
    if (!std::mbsinit(&amp;mb))
        std::cout &lt;&lt; "处理 " &lt;&lt; str &lt;&lt; " 的第一个字节后，不是初始转换状态\n";

    (void)std::mbrlen(&amp;str[1], str.size() - 1, &amp;mb);
    if (std::mbsinit(&amp;mb))
        std::cout &lt;&lt; "处理 " &lt;&lt; str &lt;&lt; " 的剩余 2 个字节后，转换状态为初始转换状态\n";
}
|output=
处理 水 的第一个字节后，不是初始转换状态
处理 水 的剩余 2 个字节后，转换状态为初始转换状态
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbstate_t}}
{{dsc see c|c/string/multibyte/mbsinit}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}