{{cpp/title|mbrtoc32}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cuchar|since=c++11|
std::size_t mbrtoc32( char32_t* pc32,
                      const char* s,
                      std::size_t n,
                      std::mbstate_t* ps );
}}

å°†çª„å¤šå­—èŠ‚å­—ç¬¦è½¬æ¢ä¸ºå…¶ UTF-32 å­—ç¬¦è¡¨ç¤ºã€‚

è‹¥ {{c|s}} éç©ºï¼Œåˆ™æ£€æŸ¥ {{c|s}} æŒ‡å‘å­—èŠ‚å¼€å§‹çš„è‡³å¤š {{c|n}} å­—èŠ‚å¤šå­—èŠ‚å­—ç¬¦ä¸²ï¼Œä»¥åˆ¤æ–­è¡¥å®Œä¸‹ä¸ªå¤šå­—èŠ‚å­—ç¬¦æ‰€éœ€çš„å­—èŠ‚æ•°ï¼ˆå«ä»»æ„è¿ç§»åºåˆ—ï¼‰ã€‚è‹¥å‡½æ•°åˆ¤å®š {{tt|s}} ä¸­ä¸‹ä¸ªå¤šå­—èŠ‚å­—ç¬¦å®Œæ•´æœ‰æ•ˆï¼Œåˆ™å°†å®ƒè½¬æ¢æˆå¯¹åº” 32 ä½å®½å­—ç¬¦å­˜å‚¨äº {{c|*pc32}}ï¼ˆè‹¥ {{c|pc32}} éç©ºï¼‰ã€‚

è‹¥ {{c|*s}} ä¸­å¤šå­—èŠ‚å­—ç¬¦å¯¹åº”ä¸€ä¸ªå¤š {{tt|char32_t}} åºåˆ—ï¼ˆå¯¹ UTF-32 è€Œè¨€ä¸å¯èƒ½ï¼‰ï¼Œåˆ™åœ¨é¦–æ¬¡è°ƒç”¨æ­¤å‡½æ•°åæ›´æ–° {{c|*ps}} ä½¿å¾—ä¸‹æ¬¡è°ƒç”¨ {{tt|mbrtoc32}} æ—¶ä¸å¿…è€ƒè™‘ {{c|*s}} ä¹Ÿèƒ½å†™å…¥é™„åŠ çš„ {{c/core|char32_t}}ã€‚

è‹¥ {{c|s}} æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™å¿½ç•¥ {{c|n}} ä¸ {{c|pc32}} çš„å€¼ï¼Œè¯¥è°ƒç”¨ç­‰ä»·äº {{c|std::mbrtoc32(NULL, "", 1, ps)}}ã€‚

è‹¥äº§ç”Ÿçš„å®½å­—ç¬¦æ˜¯ç©ºå­—ç¬¦ï¼Œåˆ™è½¬æ¢çŠ¶æ€ {{c|*ps}} è¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ã€‚

æ­¤å‡½æ•°ä½¿ç”¨çš„å¤šå­—èŠ‚ç¼–ç ç”±å½“å‰æ´»è·ƒçš„ C æœ¬åœ°ç¯å¢ƒæŒ‡å®šã€‚

===å‚æ•°===
{{par begin}}
{{par|pc32|æŒ‡å‘å°†å†™å…¥äº§ç”Ÿçš„ 32 ä½å®½å­—ç¬¦çš„ä½ç½®çš„æŒ‡é’ˆ}}
{{par|s|æŒ‡å‘ç”¨ä½œè¾“å…¥çš„å¤šå­—èŠ‚å­—ç¬¦ä¸²çš„æŒ‡é’ˆ}}
{{par|n|{{c|s}} ä¸­èƒ½æ£€éªŒçš„å­—èŠ‚æ•°ä¸Šçš„é™åˆ¶}}
{{par|ps|æŒ‡å‘è½¬è¯‘å¤šå­—èŠ‚å­—ç¬¦ä¸²æ—¶æ‰€ç”¨çš„è½¬æ¢çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
ä¸‹åˆ—é¦–ä¸ªé€‚ç”¨è€…ï¼š
* è‹¥ä» {{c|s}} è½¬æ¢çš„å­—ç¬¦ä¸ºç©ºå­—ç¬¦ï¼ˆå¹¶å­˜å‚¨äº {{c|*pc32}} ä¸­ï¼Œè‹¥å®ƒéç©ºï¼‰åˆ™ä¸º {{c|0}}ã€‚
* æˆåŠŸä» {{c|s}} è½¬æ¢çš„å¤šå­—èŠ‚å­—ç¬¦çš„å­—èŠ‚æ•° {{c|[1...n]}}ã€‚
* è‹¥ç°å·²å°†æ¥è‡ªå¤š {{c/core|char32_t}} å­—ç¬¦çš„ä¸‹ä¸ª {{c/core|char32_t}} å†™å…¥ {{c|*pc32}}ï¼Œåˆ™ä¸º {{c|-3}}ã€‚æ­¤æƒ…å†µä¸‹ä¸ä»è¾“å…¥å¤„ç†å­—èŠ‚ã€‚
* è‹¥æ¥ä¸‹æ¥ {{c|n}} ä¸ªå­—èŠ‚ç»„æˆä¸å®Œæ•´ï¼Œä½†åˆ°æ­¤ä»åˆæ³•çš„å¤šå­—èŠ‚å­—ç¬¦åˆ™ä¸º {{c|-2}}ã€‚ä¸å†™å…¥å†…å®¹åˆ° {{c|*pc32}}ã€‚
* è‹¥å‡ºç°ç¼–ç é”™è¯¯åˆ™ä¸º {{c|-1}}ã€‚ä¸å†™å…¥å†…å®¹åˆ° {{c|*pc32}}ï¼Œå­˜å‚¨ {{lc|EILSEQ}} äº {{lc|errno}} ä¸” {{c|*ps}} çš„å€¼æœªæŒ‡å®šã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;cassert&gt;
#include &lt;clocale&gt;
#include &lt;cstring&gt;
#include &lt;cuchar&gt;
#include &lt;cwchar&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");

    std::string str = "z\u00df\u6c34\U0001F34C"; // å³ u8"zÃŸæ°´ğŸŒ"

    std::cout &lt;&lt; "å¤„ç† " &lt;&lt; str.size() &lt;&lt; " ä¸ªå­—èŠ‚: [ " &lt;&lt; std::showbase;
    for (unsigned char c : str)
        std::cout &lt;&lt; std::hex &lt;&lt; +c &lt;&lt; ' ';
    std::cout &lt;&lt; "]\n";

    std::mbstate_t state{}; // é›¶åˆå§‹åŒ–ä¸ºåˆå§‹çŠ¶æ€
    char32_t c32;
    const char* ptr = str.c_str(), *end = str.c_str() + str.size() + 1;

    while (std::size_t rc = std::mbrtoc32(&amp;c32, ptr, end - ptr, &amp;state))
    {
        std::cout &lt;&lt; "ä¸‹ä¸€ä¸ª UTF-32 å­—ç¬¦: " &lt;&lt; std::hex
                  &lt;&lt; static_cast&lt;int&gt;(c32) &lt;&lt; " æ¥è‡ª ";
        assert(rc != (std::size_t)-3); // UTF-32 ä¸­æ²¡æœ‰ä»£ç†å¯¹
        if (rc == (std::size_t)-1)
            break;
        if (rc == (std::size_t)-2)
            break;
        std::cout &lt;&lt; std::dec &lt;&lt; rc &lt;&lt; " ä¸ªå­—ç¬¦ [ ";
        for (std::size_t n = 0; n &lt; rc; ++n)
            std::cout &lt;&lt; std::hex &lt;&lt; +static_cast&lt;unsigned char&gt;(ptr[n]) &lt;&lt; ' ';
        std::cout &lt;&lt; "]\n";
        ptr += rc;
    }
}
|output=
å¤„ç† 10 ä¸ªå­—èŠ‚: [ 0x7a 0xc3 0x9f 0xe6 0xb0 0xb4 0xf0 0x9f 0x8d 0x8c ]
ä¸‹ä¸€ä¸ª UTF-32 å­—ç¬¦: 0x7a æ¥è‡ª 1 ä¸ªå­—ç¬¦ [ 0x7a ]
ä¸‹ä¸€ä¸ª UTF-32 å­—ç¬¦: 0xdf æ¥è‡ª 2 ä¸ªå­—ç¬¦ [ 0xc3 0x9f ]
ä¸‹ä¸€ä¸ª UTF-32 å­—ç¬¦: 0x6c34 æ¥è‡ª3 ä¸ªå­—ç¬¦ [ 0xe6 0xb0 0xb4 ]
ä¸‹ä¸€ä¸ª UTF-32 å­—ç¬¦: 0x1f34c æ¥è‡ª 4 ä¸ªå­—ç¬¦ [ 0xf0 0x9f 0x8d 0x8c ]
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc c32rtomb}}
{{dsc inc|cpp/locale/codecvt/dsc do_in|mem=std::codecvt&lt;char32_t, char, std::mbstate_t&gt;}}
{{dsc see c|c/string/multibyte/mbrtoc32}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}