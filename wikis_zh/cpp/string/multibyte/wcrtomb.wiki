{{cpp/title|wcrtomb}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cwchar|
std::size_t wcrtomb( char* s, wchar_t wc, std::mbstate_t* ps );
}}

è½¬æ¢å®½å­—ç¬¦ä¸ºå…¶çª„å¤šå­—èŠ‚è¡¨ç¤ºã€‚

è‹¥ {{c|s}} ä¸æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™å‡½æ•°æ£€æµ‹å­˜å‚¨ {{c|wc}} çš„å¤šå­—èŠ‚å­—ç¬¦è¡¨ç¤ºæ‰€éœ€çš„å­—èŠ‚æ•°ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼Œå¹¶è€ƒè™‘å½“å‰å¤šå­—èŠ‚è½¬æ¢çŠ¶æ€ {{c|*ps}}ï¼Œå¹¶å­˜å‚¨å¤šå­—èŠ‚å­—ç¬¦è¡¨ç¤ºäºé¦–å…ƒç´ ä¸º {{c|s}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„ï¼ŒæŒ‰éœ€æ›´æ–° {{c|*ps}}ã€‚æ­¤å‡½æ•°è‡³å¤šèƒ½å†™å…¥ {{c|MB_CUR_MAX}} å­—èŠ‚ã€‚

è‹¥ {{c|s}} ä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™è°ƒç”¨ç­‰ä»·äºå¯¹æŸå†…éƒ¨ç¼“å†²åŒº {{tt|buf}} çš„ {{c|std::wcrtomb(buf, L'\0', ps)}}ã€‚

è‹¥ {{c|wc}} æ˜¯ç©ºå®½å­—ç¬¦ {{c|L'\0'}}ï¼Œåˆ™å­˜å‚¨ç©ºå­—èŠ‚ï¼Œå‰æ¥ä»»ä½•æ¢å¤åˆ°åˆå§‹è¿ç§»çŠ¶æ€æ‰€éœ€çš„è¿ç§»åºåˆ—ï¼Œå¹¶æ›´æ–°è½¬æ¢çŠ¶æ€å½¢å‚ {{c|*ps}} ä»¥è¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ã€‚

===å‚æ•°===
{{par begin}}
{{par|s|æŒ‡å‘çª„å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆï¼Œå…¶ä¸­å°†å­˜å‚¨å¤šå­—èŠ‚å­—ç¬¦ä¸²}}
{{par|wc|è¦è½¬æ¢çš„å®½å­—ç¬¦}}
{{par|ps|æŒ‡å‘è½¬è¯‘å¤šå­—èŠ‚å­—ç¬¦ä¸²æ—¶æ‰€ç”¨çš„è½¬æ¢çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
æˆåŠŸæ—¶ï¼Œè¿”å›å†™å…¥é¦–å…ƒç´ ä¸º {{c|s}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„çš„å­—èŠ‚æ•°ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼‰ã€‚

å¤±è´¥æ—¶ï¼ˆè‹¥ {{c|wc}} ä¸æ˜¯åˆæ³•å®½å­—ç¬¦ï¼‰ï¼Œè¿”å› {{c|static_cast&lt;std::size_t&gt;(-1)}}ï¼Œå­˜å‚¨ {{lc|EILSEQ}} äº {{lc|errno}}ï¼Œå¹¶ä½¿ {{c|*ps}} ç•™åœ¨æœªæŒ‡å®šçŠ¶æ€ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cwchar&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

void print_wide(const std::wstring&amp; wstr)
{
    std::mbstate_t state{};
    for (wchar_t wc : wstr)
    {
        std::string mb(MB_CUR_MAX, '\0');
        std::size_t ret = std::wcrtomb(&amp;mb[0], wc, &amp;state);
        std::cout &lt;&lt; "å¤šå­—èŠ‚å­—ç¬¦ " &lt;&lt; mb &lt;&lt; " æœ‰ " &lt;&lt; ret &lt;&lt; " ä¸ªå­—ç¬¦\n";
    }
}

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    std::wstring wstr = L"z\u00df\u6c34\U0001f34c"; // æˆ– L"zÃŸæ°´ğŸŒ"
    print_wide(wstr);
}
|output=
å¤šå­—èŠ‚å­—ç¬¦ z æœ‰ 1 ä¸ªå­—ç¬¦
å¤šå­—èŠ‚å­—ç¬¦ ÃŸ æœ‰ 2 ä¸ªå­—ç¬¦
å¤šå­—èŠ‚å­—ç¬¦ æ°´ æœ‰ 3 ä¸ªå­—ç¬¦
å¤šå­—èŠ‚å­—ç¬¦ ğŸŒ æœ‰ 4 ä¸ªå­—ç¬¦
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc wctomb}}
{{dsc inc|cpp/string/multibyte/dsc mbrtowc}}
{{dsc inc|cpp/locale/codecvt/dsc do_out}}
{{dsc see c|c/string/multibyte/wcrtomb}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}