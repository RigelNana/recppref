{{cpp/title|mbrtowc}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cwchar|
std::size_t mbrtowc( wchar_t* pwc,
                     const char* s,
                     std::size_t n,
                     std::mbstate_t* ps );
}}

è½¬æ¢çª„å¤šå­—èŠ‚å­—ç¬¦ä¸ºå®½å­—ç¬¦ã€‚

è‹¥ {{c|s}} ä¸æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™ä» {{c|s}} æ‰€æŒ‡å‘çš„å­—èŠ‚èµ·ï¼Œå®¡æŸ¥å¤šå­—èŠ‚å­—ç¬¦ä¸²çš„è‡³å¤š {{c|n}} ä¸ªå­—èŠ‚ï¼Œä»¥ç¡®å®šå®Œæˆä¸‹ä¸ªå¤šå­—èŠ‚å­—ç¬¦ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼‰çš„å­—èŠ‚æ•°ã€‚è‹¥è¯¥å‡½æ•°ç¡®å®š {{c|s}} çš„ä¸‹ä¸ªå¤šå­—èŠ‚å­—ç¬¦å®Œæ•´ä¸”åˆæ³•ï¼Œåˆ™å°†å®ƒè½¬æ¢ä¸ºå¯¹åº”çš„å®½å­—ç¬¦ï¼Œå¹¶å­˜å‚¨ä¹‹äº {{c|*pwc}}ï¼ˆè‹¥ {{c|pwc}} éç©ºï¼‰ã€‚

è‹¥ {{c|s}} æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™å¿½ç•¥ {{c|n}} å’Œ {{c|pwc}} çš„å€¼ï¼Œè€Œè°ƒç”¨ç­‰ä»·äº {{c|std::mbrtowc(NULL, "", 1, ps)}}ã€‚

è‹¥äº§ç”Ÿçš„å®½å­—ç¬¦æ˜¯ç©ºå­—ç¬¦ï¼Œåˆ™å­˜å‚¨äº {{c|*ps}} çš„è½¬æ¢çŠ¶æ€ä¸ºåˆå§‹è¿ç§»çŠ¶æ€ã€‚

===å‚æ•°===
{{par begin}}
{{par|pwc|æŒ‡å‘è¦å†™å…¥ç»“æœå®½å­—ç¬¦ä½ç½®çš„æŒ‡é’ˆ}}
{{par|s|æŒ‡å‘ç”¨ä½œè¾“å…¥çš„å¤šå­—èŠ‚å­—ç¬¦ä¸²çš„æŒ‡é’ˆ}}
{{par|n|{{c|s}} ä¸­èƒ½è¢«æ£€éªŒçš„å­—èŠ‚æ•°é™åˆ¶}}
{{par|ps|æŒ‡å‘è½¬è¯‘å¤šå­—èŠ‚å­—ç¬¦ä¸²æ—¶çš„è½¬æ¢çŠ¶æ€çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
ä¸‹åˆ—é¦–ä¸ªä½¿ç”¨è€…ï¼š
* è‹¥è½¬æ¢è‡ª {{c|s}} çš„å­—ç¬¦ä¸ºç©ºå­—ç¬¦ï¼Œåˆ™ä¸º {{c|0}} ï¼ˆè‹¥ {{c|pwc}} éç©ºåˆ™å­˜å‚¨äº {{tt|*pwc}}ï¼‰
* æˆåŠŸåœ° {{c|s}} ä»è½¬æ¢çš„å¤šå­—èŠ‚å­—ç¬¦ {{c|[1...n]}} çš„å­—èŠ‚æ•°
* è‹¥æ¥ä¸‹æ¥çš„ {{c|n}} å­—èŠ‚ç»„æˆä¸å®Œæ•´ï¼Œä½†è¯¥éƒ¨åˆ†åˆæ³•çš„å®½å­—ç¬¦ï¼Œåˆ™ä¸º {{c|static_cast&lt;std::size_t&gt;(-2)}}ã€‚ä¸å†™å…¥ {{c|*pwc}}ã€‚
* è‹¥å‡ºç°ç¼–ç é”™è¯¯åˆ™ä¸º {{c|static_cast&lt;std::size_t&gt;(-1)}}ã€‚ä¸å†™å…¥ {{c|*pwc}}ï¼Œå­˜å‚¨å€¼ {{lc|EILSEQ}} äº {{lc|errno}}ï¼Œå¹¶ä¸”ç½® {{c|*ps}} çš„å€¼ä¸ºæœªæŒ‡å®šã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cstring&gt;
#include &lt;cwchar&gt;
#include &lt;iostream&gt;
 
void print_mb(const char* ptr)
{
    std::mbstate_t state = std::mbstate_t(); // åˆå§‹çŠ¶æ€
    const char* end = ptr + std::strlen(ptr);
    int len;
    wchar_t wc;
    while ((len = std::mbrtowc(&amp;wc, ptr, end-ptr, &amp;state)) &gt; 0)
    {
        std::wcout &lt;&lt; "å " &lt;&lt; len &lt;&lt; " ä¸ªå­—èŠ‚ä¸ºå­—ç¬¦ " &lt;&lt; wc &lt;&lt; '\n';
        ptr += len;
    }
}

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    // UTF-8 çª„å¤šå­—èŠ‚ç¼–ç 
    const char* str = u8"z\u00df\u6c34\U0001d10b"; // æˆ– u8"zÃŸæ°´ğ„‹"
                      // æˆ– "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9d\x84\x8b";
    print_mb(str);
}
|output=
å 1 ä¸ªå­—èŠ‚ä¸ºå­—ç¬¦ z
å 2 ä¸ªå­—èŠ‚ä¸ºå­—ç¬¦ ÃŸ
å 3 ä¸ªå­—èŠ‚ä¸ºå­—ç¬¦ æ°´
å 4 ä¸ªå­—èŠ‚ä¸ºå­—ç¬¦ ğ„‹
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbtowc}}
{{dsc inc|cpp/string/multibyte/dsc wcrtomb}}
{{dsc inc|cpp/locale/codecvt/dsc do_in}}
{{dsc see c|c/string/multibyte/mbrtowc}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}