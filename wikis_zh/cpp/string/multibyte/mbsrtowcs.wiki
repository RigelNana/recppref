{{cpp/title|mbsrtowcs}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cwchar|
std::size_t mbsrtowcs( wchar_t* dst,
                       const char** src,
                       std::size_t len,
                       std::mbstate_t* ps );
}}

è½¬æ¢å§‹äº {{c|*ps}} æ‰€æè¿°çš„è½¬æ¢çŠ¶æ€ï¼Œæ¥è‡ªé¦–å…ƒç´ ä¸º {{c|*src}} æ‰€æŒ‡å‘çš„æ•°ç»„çš„ç©ºç»ˆæ­¢å¤šå­—èŠ‚å­—ç¬¦åºåˆ—ï¼Œåˆ°å…¶å®½å­—ç¬¦è¡¨ç¤ºã€‚è‹¥ {{c|dst}} éç©ºï¼Œåˆ™å­˜å‚¨è½¬æ¢åçš„å­—ç¬¦äº {{c|dst}} æ‰€æŒ‡å‘çš„ {{tt|wchar_t}} æ•°ç»„çš„ç›¸ç»§å…ƒç´ ã€‚ä¸å†™å…¥å¤šäº {{c|len}} ä¸ªå®½å­—ç¬¦åˆ°ç›®æ ‡æ•°ç»„ã€‚

å¦‚åŒä»¥è°ƒç”¨ {{lc|std::mbrtowc}} è½¬æ¢æ¯ä¸ªå¤šå­—èŠ‚å­—ç¬¦ã€‚è‹¥æ»¡è¶³ä¸‹åˆ—æ¡ä»¶åˆ™è½¬æ¢ç»ˆæ­¢ï¼š
* è½¬æ¢å¹¶å­˜å‚¨äº†å¤šå­—èŠ‚ç©ºå­—ç¬¦ã€‚è®¾ç½® {{c|*src}} ä¸ºç©ºæŒ‡é’ˆå¹¶ä»¤ {{tt|*ps}} è¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ã€‚
* é‡åˆ°ä»»ä½•éæ³•å¤šå­—èŠ‚å­—ç¬¦ï¼ˆæŒ‰ç…§å½“å‰ C æœ¬åœ°ç¯å¢ƒï¼‰ã€‚è®¾ç½® {{c|*src}} æŒ‡å‘é¦–ä¸ªæœªè½¬æ¢çš„å¤šå­—èŠ‚å­—ç¬¦çš„èµ·å§‹ã€‚
* å°†å­˜å‚¨çš„ä¸‹ä¸ªå®½å­—ç¬¦å°†è¶…å‡º {{c|len}}ã€‚è®¾ç½® {{c|*src}} æŒ‡å‘é¦–ä¸ªæœªè½¬æ¢çš„å¤šå­—èŠ‚å­—ç¬¦çš„èµ·å§‹ã€‚è‹¥ {{c|dst}} ä¸ºç©ºæŒ‡é’ˆåˆ™ä¸æ£€æŸ¥æ­¤æ¡ä»¶ã€‚

===å‚æ•°===
{{par begin}}
{{par|dst|æŒ‡å‘å°†å­˜å‚¨ç»“æœçš„å®½å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆ}}
{{par|src|æŒ‡å‘ç©ºç»ˆæ­¢å¤šå­—èŠ‚å­—ç¬¦ä¸²é¦–å…ƒç´ çš„æŒ‡é’ˆ}}
{{par|len|{{c|dst}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„ä¸­å¯ç”¨çš„å®½å­—ç¬¦æ•°}}
{{par|ps|æŒ‡å‘è½¬æ¢çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
æˆåŠŸæ—¶è¿”å›å†™å…¥å­—ç¬¦æ•°ç»„çš„å®½å­—ç¬¦æ•°ï¼Œæ’é™¤ç»ˆæ­¢çš„ {{c|L'\0'}}ã€‚è‹¥ {{c|dst}} ä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™è¿”å›ç»™å®šæ— é™å®šé•¿åº¦åˆ™æœ¬ä¼šå†™å…¥çš„å®½å­—ç¬¦æ•°ã€‚

è½¬æ¢é”™è¯¯æ—¶ï¼ˆè‹¥é‡åˆ°éæ³•å¤šå­—èŠ‚å­—ç¬¦ï¼‰è¿”å› {{c|static_cast&lt;std::size_t&gt;(-1)}}ï¼Œå­˜å‚¨ {{lc|EILSEQ}} äº {{lc|errno}}ï¼Œå¹¶ä»¤ {{c|*ps}} ç•™åœ¨æœªæŒ‡å®šçŠ¶æ€ã€‚

===æ³¨è§£===
æ­¤å‡½æ•°ç§»åŠ¨ {{c|src}} æŒ‡é’ˆæŒ‡å‘è¢«è½¬æ¢çš„å¤šå­—èŠ‚å­—ç¬¦ä¸²ç»“å°¾ã€‚è‹¥ {{c|dst}} ä¸ºç©ºæŒ‡é’ˆåˆ™è¿™ä¸å‘ç”Ÿã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cwchar&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;

void print_as_wide(const char* mbstr)
{
    std::mbstate_t state = std::mbstate_t();
    std::size_t len = 1 + std::mbsrtowcs(nullptr, &amp;mbstr, 0, &amp;state);
    std::vector&lt;wchar_t&gt; wstr(len);
    std::mbsrtowcs(&amp;wstr[0], &amp;mbstr, wstr.size(), &amp;state);
    std::wcout &lt;&lt; "å®½å­—ç¬¦ä¸²: " &lt;&lt; &amp;wstr[0] &lt;&lt; '\n'
               &lt;&lt; "å…¶åŒ…æ‹¬ '\\0' çš„é•¿åº¦ä¸º: " &lt;&lt; wstr.size() &lt;&lt; '\n';
}

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    const char* mbstr = u8"z\u00df\u6c34\U0001f34c"; // æˆ– u8"zÃŸæ°´ğŸŒ"
    print_as_wide(mbstr);
}
|output=
å®½å­—ç¬¦ä¸²: zÃŸæ°´ğŸŒ
å…¶åŒ…æ‹¬ '\\0' çš„é•¿åº¦ä¸º: 5
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbrtowc}}
{{dsc inc|cpp/string/multibyte/dsc wcsrtombs}}
{{dsc inc|cpp/locale/codecvt/dsc do_in}}
{{dsc see c|c/string/multibyte/mbsrtowcs}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}