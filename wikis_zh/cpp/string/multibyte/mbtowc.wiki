{{cpp/title|mbtowc}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cstdlib|
int mbtowc( wchar_t* pwc, const char* s, std::size_t n );
}}

å°† {{c|s}} æŒ‡å‘å…¶é¦–å­—èŠ‚çš„å¤šå­—èŠ‚å­—ç¬¦è½¬æ¢æˆå®½å­—ç¬¦ï¼Œè‹¥ {{c|pwc}} éç©ºåˆ™å†™å…¥ {{c|*pwc}}ã€‚

è‹¥ {{c|s}} ä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™é‡ç½®å…¨å±€è½¬æ¢çŠ¶æ€å¹¶ç¡®å®šæ˜¯å¦ä½¿ç”¨è¿ç§»åºåˆ—ã€‚

===å‚æ•°===
{{par begin}}
{{par|s|æŒ‡å‘å¤šå­—èŠ‚å­—ç¬¦çš„æŒ‡é’ˆ}}
{{par|n|{{c|s}} ä¸­èƒ½è¢«æ£€éªŒçš„å­—èŠ‚æ•°çš„é™åˆ¶}}
{{par|pwc|æŒ‡å‘è¾“å‡ºç”¨å®½å­—ç¬¦çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
è‹¥ {{c|s}} ä¸æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™è¿”å›å¤šå­—èŠ‚å­—ç¬¦æ‰€å«çš„å­—èŠ‚æ•°ï¼Œæˆ–è‹¥ {{c|s}} æ‰€æŒ‡çš„é¦–å­—èŠ‚ä¸ç»„æˆåˆæ³•å¤šå­—èŠ‚å­—ç¬¦åˆ™è¿”å› {{c|-1}}ï¼Œæˆ–è‹¥ {{c|s}} æŒ‡å‘ç©ºå­—ç¬¦ {{c|'\0'}} åˆ™è¿”å› {{c|0}}ã€‚

è‹¥ {{c|s}} æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™é‡ç½®å†…éƒ¨è½¬æ¢çŠ¶æ€ä¸ºåˆå§‹è¿ç§»çŠ¶æ€ï¼Œå¹¶è‹¥å½“å‰å¤šå­—èŠ‚ç¼–ç éçŠ¶æ€ä¾èµ–ï¼ˆä¸ä½¿ç”¨è¿ç§»åºåˆ—ï¼‰åˆ™è¿”å› {{c|0}}ï¼Œæˆ–è‹¥å½“å‰å¤šå­—èŠ‚ç¼–ç ä¸ºçŠ¶æ€ä¾èµ–ï¼ˆä½¿ç”¨è¿ç§»åºåˆ—ï¼‰åˆ™è¿”å›éé›¶å€¼ã€‚

===æ³¨è§£===
æ¯æ¬¡å¯¹ {{tt|mbtowc}} çš„è°ƒç”¨æ›´æ–°å†…éƒ¨å…¨å±€è½¬æ¢çŠ¶æ€ï¼ˆ{{lc|std::mbstate_t}} ç±»å‹çš„é™æ€å¯¹è±¡ï¼Œåªä¸ºæ­¤å‡½æ•°æ‰€çŸ¥ï¼‰ã€‚è‹¥å¤šå­—èŠ‚ç¼–ç ä½¿ç”¨è¿ç§»çŠ¶æ€ï¼Œåˆ™å¿…é¡»ç•™æ„ä»¥é¿å…å›æ’¤æˆ–å¤šæ¬¡æ‰«æã€‚ä»»ä½•æƒ…å†µä¸‹ï¼Œå¤šçº¿ç¨‹ä¸åº”è°ƒç”¨ {{tt|mbtowc}} è€Œä¸åŒæ­¥ï¼šå¯ç”¨ {{lc|std::mbrtowc}} ä»£æ›¿ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;

int print_mb(const char* ptr)
{
    std::mbtowc(nullptr, 0, 0); // é‡ç½®è½¬æ¢çŠ¶æ€
    const char* end = ptr + std::strlen(ptr);
    int ret;
    for (wchar_t wc; (ret = std::mbtowc(&amp;wc, ptr, end - ptr)) &gt; 0; ptr += ret)
        std::wcout &lt;&lt; wc;
    std::wcout &lt;&lt; '\n';
    return ret;
}

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    // UTF-8 çª„å¤šå­—èŠ‚ç¼–ç 
    const char* str = "z\u00df\u6c34\U0001d10b"; // æˆ– "zÃŸæ°´ğŸŒ"
                      // æˆ– "\x7a\xc3\x9f\xe6\xb0\xb4\xf0\x9d\x84\x8b";
    print_mb(str);
}
|output=
zÃŸæ°´ğŸŒ
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbrtowc}}
{{dsc inc|cpp/string/multibyte/dsc mblen}}
{{dsc inc|cpp/locale/codecvt/dsc do_in}}
{{dsc see c|c/string/multibyte/mbtowc}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}