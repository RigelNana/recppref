{{cpp/title|wcsrtombs}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cwchar|
std::size_t wcsrtombs( char* dst,
                       const wchar_t** src,
                       std::size_t len,
                       std::mbstate_t* ps );
}}

è½¬æ¢æ¥è‡ªå…ƒç´ ä¸º {{c|*src}} æ‰€æŒ‡å‘çš„å®½å­—ç¬¦åºåˆ—ä¸ºå…¶çª„å¤šå­—èŠ‚è¡¨ç¤ºï¼Œå§‹äº {{c|*ps}} æ‰€æè¿°çš„è½¬æ¢çŠ¶æ€ã€‚è‹¥ {{c|dst}} éç©ºï¼Œåˆ™å­˜å‚¨è½¬æ¢åçš„å­—ç¬¦äº {{c|dst}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„çš„ç›¸æ¥å…ƒç´ ã€‚ä¸å†™å…¥å¤šäº {{c|len}} ä¸ªå­—èŠ‚åˆ°ç›®æ ‡æ•°ç»„ã€‚

å¦‚åŒä»¥è°ƒç”¨ {{lc|std::wcrtomb}} è½¬æ¢æ¯ä¸ªå­—ç¬¦ã€‚è‹¥é‡åˆ°ä¸‹åˆ—æ¡ä»¶åˆ™åœæ­¢è½¬æ¢ï¼š
* è½¬æ¢å¹¶å­˜å‚¨äº†ç©ºå­—ç¬¦ {{c|L'\0'}}ã€‚æ­¤æƒ…å†µä¸‹å­˜å‚¨çš„å­—èŠ‚æ˜¯åè¿ç§»åºåˆ—ï¼ˆè‹¥éœ€è¦ï¼‰åéš {{c|'\0'}}ï¼Œè®¾ç½® {{c|*src}} ä¸ºç©ºæŒ‡é’ˆå¹¶ä»¤ {{c|*ps}} è¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ã€‚
* æ‰¾åˆ°å½“å‰ C æœ¬åœ°ç¯å¢ƒä¸­ä¸å¯¹åº”åˆæ³•å­—ç¬¦çš„ {{c|wchar_t}}ã€‚è®¾ç½® {{c|*src}} æŒ‡å‘é¦–ä¸ªæœªè½¬æ¢çš„å®½å­—ç¬¦ã€‚
* ä¸‹ä¸ªå¤šå­—èŠ‚å­—ç¬¦å°†è¶…å‡º {{c|len}}ã€‚è®¾ç½® {{c|*src}} æŒ‡å‘é¦–ä¸ªæœªè½¬æ¢çš„å®½å­—ç¬¦ã€‚è‹¥ {{c|dst}} ä¸ºç©ºæŒ‡é’ˆåˆ™ä¸æ£€æŸ¥æ­¤æ¡ä»¶ã€‚

===å‚æ•°===
{{par begin}}
{{par|dst|æŒ‡å‘çª„å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆï¼Œå…¶ä¸­å°†å­˜å‚¨å¤šå­—èŠ‚å­—ç¬¦}}
{{par|src|æŒ‡å‘æŒ‡å‘ç©ºç»ˆæ­¢å®½å­—ç¬¦ä¸²é¦–å…ƒç´ çš„æŒ‡é’ˆçš„æŒ‡é’ˆ}}
{{par|len|{{c|dst}} æ‰€æŒ‡å‘çš„æ•°ç»„ä¸­å¯ç”¨çš„å­—èŠ‚æ•°}}
{{par|ps|æŒ‡å‘è½¬æ¢çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
æˆåŠŸæ—¶ï¼Œè¿”å›å†™å…¥é¦–å…ƒç´ ä¸º {{c|dst}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„çš„å­—èŠ‚æ•°ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼Œä½†ä¸åŒ…å«ç»ˆæ­¢ {{c|'\0'}}ï¼‰ã€‚è‹¥ {{c|dst}} ä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™è¿”å›æœ¬ä¼šå†™å…¥çš„å­—èŠ‚æ•°ã€‚

è½¬æ¢é”™è¯¯æ—¶ï¼ˆè‹¥é‡åˆ°éæ³•å®½å­—ç¬¦ï¼‰ï¼Œè¿”å› {{c|static_cast&lt;std::size_t&gt;(-1)}}ï¼Œå­˜å‚¨ {{lc|EILSEQ}} äº {{lc|errno}}ï¼Œå¹¶ä»¤ {{c|*ps}} ç•™åœ¨æœªæŒ‡å®šçŠ¶æ€ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cwchar&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;

void print_wide(const wchar_t* wstr)
{
    std::mbstate_t state = std::mbstate_t();
    std::size_t len = 1 + std::wcsrtombs(nullptr, &amp;wstr, 0, &amp;state);
    std::vector&lt;char&gt; mbstr(len);
    std::wcsrtombs(&amp;mbstr[0], &amp;wstr, mbstr.size(), &amp;state);
    std::cout &lt;&lt; "å¤šå­—èŠ‚å­—ç¬¦ä¸²: " &lt;&lt; &amp;mbstr[0] &lt;&lt; '\n'
              &lt;&lt; "åŒ…æ‹¬ '\0' çš„é•¿åº¦: " &lt;&lt; mbstr.size() &lt;&lt; '\n';
}

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    // UTF-8 çª„å¤šå­—èŠ‚ç¼–ç 
    const wchar_t* wstr = L"z\u00df\u6c34\U0001d10b"; // æˆ– L"zÃŸæ°´ğ„‹"
    print_wide(wstr);
}
|output=
å¤šå­—èŠ‚å­—ç¬¦ä¸²: zÃŸæ°´ğ„‹
åŒ…æ‹¬ '\0' çš„é•¿åº¦: 11
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc wcrtomb}}
{{dsc inc|cpp/string/multibyte/dsc mbsrtowcs}}
{{dsc inc|cpp/locale/codecvt/dsc do_out}}
{{dsc see c|c/string/multibyte/wcsrtombs}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}