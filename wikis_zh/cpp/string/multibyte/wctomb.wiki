{{cpp/title|wctomb}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cstdlib|
int wctomb( char* s, wchar_t wc );
}}

è½¬æ¢å®½å­—ç¬¦ {{c|wc}} ä¸ºå¤šå­—èŠ‚ç¼–ç å¹¶å­˜å‚¨ä¹‹ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼‰äºé¦–å…ƒç´ ä¸º {{c|s}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„ã€‚ä¸å­˜å‚¨å¤šäº {{c|MB_CUR_MAX}} ä¸ªå­—ç¬¦ã€‚è½¬æ¢å—å½“å‰æœ¬åœ°ç¯å¢ƒçš„ LC_CTYPE ç±»åˆ«å½±å“ã€‚

è‹¥ {{c|wc}} æ˜¯ç©ºå­—ç¬¦ï¼Œåˆ™å°†ç©ºå­—èŠ‚å†™å…¥ {{c|s}}ï¼Œå‰é™„ä»»ä½•éœ€è¦æ¢å¤åˆ°åˆå§‹è¿ç§»çŠ¶æ€çš„è¿ç§»åºåˆ—ã€‚

è‹¥ {{c|s}} æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™é‡ç½®å…¨å±€è½¬æ¢çŠ¶æ€å¹¶ç¡®å®šæ˜¯å¦ä½¿ç”¨è¿ç§»åºåˆ—ã€‚

===å‚æ•°===
{{par begin}}
{{par|s|æŒ‡å‘è¾“å‡ºçš„å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆ}}
{{par|wc|è¦è½¬æ¢çš„å®½å­—ç¬¦}}
{{par end}}

===è¿”å›å€¼===
è‹¥ {{c|s}} ä¸æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™è¿”å› {{c|wc}} çš„å¤šå­—èŠ‚è¡¨ç¤ºä¸­çš„å­—èŠ‚æ•°ï¼Œæˆ–è‹¥ {{c|wc}} ä¸æ˜¯åˆæ³•å­—ç¬¦åˆ™ä¸º {{c|-1}}ã€‚

è‹¥ {{c|s}} æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™é‡ç½®å…¶å†…éƒ¨è½¬æ¢çŠ¶æ€ä¸ºè¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ï¼Œä¸”è‹¥å½“å‰å¤šå­—èŠ‚ç¼–ç ä¸ä¾èµ–çŠ¶æ€ï¼ˆä¸ä½¿ç”¨è¿ç§»åºåˆ—ï¼‰åˆ™è¿”å› {{c|0}}ï¼Œæˆ–è‹¥å½“å‰å¤šå­—èŠ‚ç¼–ç ä»¥æ¥çŠ¶æ€ï¼ˆä½¿ç”¨è¿ç§»åºåˆ—ï¼‰åˆ™è¿”å›éé›¶å€¼ã€‚

===æ³¨è§£===
æ¯æ¬¡åˆ° {{tt|wctomb}} çš„è°ƒç”¨æ›´æ–°å…¨å±€è½¬æ¢çŠ¶æ€ï¼ˆ{{lc|std::mbstate_t}} ç±»å‹é™æ€å¯¹è±¡ï¼Œä»…ä¸ºæ­¤å‡½æ•°æ‰€çŸ¥ï¼‰ã€‚è‹¥å¤šå­—èŠ‚ç¼–ç ä½¿ç”¨è¿ç§»çŠ¶æ€ï¼Œåˆ™æ­¤å‡½æ•°ä¸å¯é‡å…¥ã€‚ä»»ä½•æƒ…å†µä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹ä¸åº”è°ƒç”¨ {{tt|wctomb}} è€Œä¸åŒæ­¥ï¼šå¯ç”¨ {{lc|std::wcrtomb}} æ›¿ä»£ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cstdlib&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

void print_wide(const std::wstring&amp; wstr)
{
    bool shifts = std::wctomb(nullptr, 0); // é‡ç½®è½¬æ¢çŠ¶æ€
    std::cout &lt;&lt; (shifts ? "" : "ä¸" )
              &lt;&lt; "ä½¿ç”¨è¿ç§»åºåˆ—\n" &lt;&lt; std::uppercase &lt;&lt; std::setfill('0');
    for (const wchar_t wc : wstr)
    {
        std::string mb(MB_CUR_MAX, '\0');
        const int ret = std::wctomb(&amp;mb[0], wc);
        // const char* s = ret &gt; 1 ? "s" : "";
        std::cout &lt;&lt; "å¤šå­—èŠ‚å­—ç¬¦ '" &lt;&lt; mb &lt;&lt; "' æœ‰ " &lt;&lt; ret
                  &lt;&lt; " ä¸ªå­—èŠ‚" &lt;&lt; ": [" &lt;&lt; std::hex;
        for (int i{0}; i != ret; ++i)
        {
            const int c = 0xFF &amp; mb[i];
            std::cout &lt;&lt; (i ? " " : "") &lt;&lt; std::setw(2) &lt;&lt; c;
        }
        std::cout &lt;&lt; "]\n" &lt;&lt; std::dec;
    }
}

int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    // UTF-8 çª„å¤šå­—èŠ‚ç¼–ç 
    std::wstring wstr = L"z\u00df\u6c34\U0001d10b"; // æˆ– L"zÃŸæ°´ğ„‹"
    print_wide(wstr);
}
|output=
ä¸ä½¿ç”¨è¿ç§»åºåˆ—
å¤šå­—èŠ‚å­—ç¬¦ 'z' æœ‰ 1 ä¸ªå­—èŠ‚: [7A]
å¤šå­—èŠ‚å­—ç¬¦ 'ÃŸ' æœ‰ 2 ä¸ªå­—èŠ‚: [C3 9F]
å¤šå­—èŠ‚å­—ç¬¦ 'æ°´' æœ‰ 3 ä¸ªå­—èŠ‚: [E6 B0 B4]
å¤šå­—èŠ‚å­—ç¬¦ 'ğ„‹' æœ‰ 4 ä¸ªå­—èŠ‚: [F0 9D 84 8B]
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbtowc}}
{{dsc inc|cpp/string/multibyte/dsc wcrtomb}}
{{dsc inc|cpp/locale/codecvt/dsc do_out}}
{{dsc see c|c/string/multibyte/wctomb}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}