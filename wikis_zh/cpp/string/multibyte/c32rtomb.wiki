{{cpp/title|c32rtomb}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cuchar|since=c++11|
std::size_t c32rtomb( char* s, char32_t c32, std::mbstate_t* ps );
}}

è½¬æ¢ UTF-32 å­—ç¬¦åˆ°å…¶çª„å¤šå­—èŠ‚è¡¨ç¤ºã€‚

è‹¥ {{c|s}} ä¸æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™å‡½æ•°ç¡®å®šå­˜å‚¨ {{c|c32}} çš„å¤šå­—èŠ‚å­—ç¬¦è¡¨ç¤ºæ‰€éœ€çš„å­—èŠ‚æ•°ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼Œå¹¶è€ƒè™‘å½“å‰çš„å¤šå­—èŠ‚è½¬æ¢çŠ¶æ€ {{c|*ps}}ï¼‰ï¼Œå¹¶å­˜å‚¨å¤šå­—èŠ‚å­—ç¬¦è¡¨ç¤ºäºé¦–å…ƒç´ ä¸º {{c|s}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„ï¼ŒæŒ‰éœ€æ›´æ–° {{c|*ps}}ã€‚æ­¤å‡½æ•°è‡³å¤šèƒ½å†™ {{lc|MB_CUR_MAX}} ä¸ªå­—ç¬¦ã€‚

è‹¥ {{c|s}} æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™è°ƒç”¨ç­‰ä»·äºå¯¹æŸå†…éƒ¨å­˜å‚¨ {{tt|buf}} çš„ {{c|std::c32rtomb(buf, U'\0', ps)}}ã€‚

è‹¥ {{c|c32}} æ˜¯ç©ºå®½å­—ç¬¦ {{c|U'\0'}}ï¼Œåˆ™å­˜å‚¨ç©ºå­—èŠ‚ï¼Œå‰é™„æ¢å¤åˆ°åˆå§‹è¿ç§»çŠ¶æ€æ‰€éœ€çš„ä»»ä½•è¿ç§»åºåˆ—ï¼Œå¹¶æ›´æ–°è½¬æ¢çŠ¶æ€å‚æ•° {{c|*ps}} ä»¥è¡¨ç¤ºåˆå§‹è¿ç§»çŠ¶æ€ã€‚

æ­¤å‡½æ•°æ‰€ç”¨çš„å¤šå­—èŠ‚å­—ç¬¦ç¼–ç ä¸ºå½“å‰æ´»è·ƒçš„ C æœ¬åœ°ç¯å¢ƒæ‰€æŒ‡å®šã€‚

===å‚æ•°===
{{par begin}}
{{par|s|æŒ‡å‘å°†å­˜å‚¨å¤šå­—èŠ‚å­—ç¬¦çš„çª„å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆ}}
{{par|c32|è¦è½¬æ¢çš„ 32 ä½å®½å­—ç¬¦}}
{{par|ps|æŒ‡å‘è½¬è¯‘å¤šå­—èŠ‚å­—ç¬¦ä¸²æ‰€ç”¨çš„è½¬æ¢çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆ}}
{{par end}}

===è¿”å›å€¼===
æˆåŠŸæ—¶ï¼Œè¿”å›å†™å…¥é¦–å…ƒç´ ä¸º {{c|s}} æ‰€æŒ‡å‘çš„å­—ç¬¦æ•°ç»„çš„å­—èŠ‚æ•°ï¼ˆåŒ…å«ä»»ä½•è¿ç§»åºåˆ—ï¼‰ã€‚æ­¤å€¼å¯ä¸º {{c|0}}ï¼Œä¾‹å¦‚åœ¨å¤„ç†å¤š {{c/core|char32_t}} å•å…ƒåºåˆ—ä¸­çš„å‰å¯¼ {{c/core|char32_t}} å•å…ƒæ—¶ï¼ˆUTF-32 ä¸­ä¸å‡ºç°ï¼‰ã€‚

å¤±è´¥æ—¶ï¼ˆè‹¥ {{c|c32}} ä¸æ˜¯åˆæ³•çš„ 32 ä½å®½å­—ç¬¦ï¼‰ï¼Œè¿”å› {{c|-1}}ï¼Œå­˜å‚¨ {{lc|EILSEQ}} äº {{lc|errno}}ï¼Œå¹¶ç½® {{c|*ps}} äºæœªæŒ‡å®šçŠ¶æ€ã€‚

===ç¤ºä¾‹===
{{example
|code=
#include &lt;climits&gt;
#include &lt;clocale&gt;
#include &lt;cuchar&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;string_view&gt;
 
int main()
{
    std::setlocale(LC_ALL, "en_US.utf8");
    std::u32string_view strv = U"zÃŸæ°´ğŸŒ"; // æˆ– z\u00df\u6c34\U0001F34C
    std::cout &lt;&lt; "å¤„ç† " &lt;&lt; strv.size() &lt;&lt; " UTF-32 ä»£ç å•å…ƒ: [ ";
    for (char32_t c : strv)
        std::cout &lt;&lt; std::showbase &lt;&lt; std::hex &lt;&lt; static_cast&lt;int&gt;(c) &lt;&lt; ' ';
    std::cout &lt;&lt; "]\n";
 
    std::mbstate_t state{};
    char out[MB_LEN_MAX]{};
    for (char32_t c : strv)
    {
        std::size_t rc = std::c32rtomb(out, c, &amp;state);
        std::cout &lt;&lt; static_cast&lt;int&gt;(c) &lt;&lt; " è½¬æ¢ä¸º [ ";
        if (rc != (std::size_t) - 1)
            for (unsigned char c8 : std::string_view{out, rc})
                std::cout &lt;&lt; +c8 &lt;&lt; ' ';
        std::cout &lt;&lt; "]\n";
    }
}
|output=
å¤„ç† 4 UTF-32 ä»£ç å•å…ƒ: [ 0x7a 0xdf 0x6c34 0x1f34c ]
0x7a è½¬æ¢ä¸º [ 0x7a ]
0xdf è½¬æ¢ä¸º [ 0xc3 0x9f ]
0x6c34 è½¬æ¢ä¸º [ 0xe6 0xb0 0xb4 ]
0x1f34c è½¬æ¢ä¸º [ 0xf0 0x9f 0x8d 0x8c ]
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbrtoc32}}
{{dsc inc|cpp/locale/codecvt/dsc do_out|mem=std::codecvt&lt;char32_t, char, std::mbstate_t&gt;}}
{{dsc see c|c/string/multibyte/c32rtomb}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}