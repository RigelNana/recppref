{{cpp/title|sort_heap}}
{{cpp/algorithm/navbar}}
{{dcl begin}}
{{dcl header|algorithm}}
{{dcla|num=1|notes={{mark constexpr since c++20}}|
template&lt; class RandomIt &gt;
void sort_heap( RandomIt first, RandomIt last );
}}
{{dcla|num=2|notes={{mark constexpr since c++20}}|
template&lt; class RandomIt, class Compare &gt;
void sort_heap( RandomIt first, RandomIt last, Compare comp );
}}
{{dcl end}}

将{{rlp|/#堆操作|堆}} {{range|first|last}} 转换为有序范围。不再维持堆的性质。

@1@ 堆是关于 {{rev inl|until=c++20|{{c/core|operator&lt;}}}}{{rev inl|since=c++20|{{c|std::less{}&lt;!----&gt;}}}} 的，将会按 {{rev inl|until=c++20|{{c/core|operator&lt;}}}}{{rev inl|since=c++20|{{c|std::less{}&lt;!----&gt;}}}} 排序。
@2@ 堆是关于 {{c|comp}} 的，将会按 {{c|comp}} 排序。

如果满足以下任意条件，那么行为未定义：
* {{range|first|last}} 不是堆。
{{rev begin}}
{{rev|until=c++11|
* {{c|*first}} 的类型不{{named req|Swappable}}。
}}
{{rev|since=c++11|
* {{tt|RandomIt}} 不{{named req|ValueSwappable}}。
* {{c|*first}} 的类型不{{named req|MoveConstructible}}。
* {{c|*first}} 的类型不{{named req|MoveAssignable}}。
}}
{{rev end}}

===参数===
{{par begin}}
{{par range|3=构造有序范围的|range=二叉堆}}
{{par cmp|comp|p1=RandomIt}} 
{{par hreq}}
{{par req named|RandomIt|RandomAccessIterator}}
{{par req named|Compare|Compare}}
{{par end}}

===复杂度===
给定 {{mathjax-or|\(\scriptsize N\)|N}} 为 {{c|std::distance(first, last)}}：
@1@ 最多应用 {{mathjax-or|\(\scriptsize 2N \cdot \log(N)\)|2N⋅log(N)}} 次 {{rev inl|until=c++20|{{c/core|operator&lt;}}}}{{rev inl|since=c++20|{{c|std::less{}&lt;!----&gt;}}}} 进行比较。
@2@ 最多应用 {{mathjax-or|\(\scriptsize 2N \cdot \log(N)\)|2N⋅log(N)}} 次比较函数 {{c|comp}}。

===可能的实现===
{{eq impl
|title1=sort_heap (1)|ver1=1|1=
template&lt;class RandomIt&gt;
void sort_heap(RandomIt first, RandomIt last)
{
    while (first != last)
        std::pop_heap(first, last--);
}
|title2=sort_heap (2)|ver2=2|2=
template&lt;class RandomIt, class Compare&gt;
void sort_heap(RandomIt first, RandomIt last, Compare comp)
{
    while (first != last)
        std::pop_heap(first, last--, comp);
}
}}

===示例===
{{example
|
|code=
#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;string_view&gt;
#include &lt;vector&gt;

void println(std::string_view fmt, const auto&amp; v)
{
    for (std::cout &lt;&lt; fmt; const auto &amp;i : v)
        std::cout &lt;&lt; i &lt;&lt; ' ';
    std::cout &lt;&lt; '\n';
}

int main()
{
    std::vector&lt;int&gt; v{3, 1, 4, 1, 5, 9};
    
    std::make_heap(v.begin(), v.end());
    println("make_heap 后，v：", v);
    
    std::sort_heap(v.begin(), v.end());
    println("sort_heap 后，v：", v);
}
|output=
make_heap 后，v：9 5 4 1 1 3
sort_heap 后，v：1 1 3 4 5 9
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|std=C++98|dr=2444|before=最多允许 {{mathjax-or|\(\scriptsize N \cdot \log(N)\)|N⋅log(N)}} 次比较|after=增加到 {{mathjax-or|\(\scriptsize 2N \cdot \log(N)\)|2N⋅log(N)}} 次}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/algorithm/dsc is_heap}}
{{dsc inc|cpp/algorithm/dsc is_heap_until}}
{{dsc inc|cpp/algorithm/dsc make_heap}}
{{dsc inc|cpp/algorithm/dsc pop_heap}}
{{dsc inc|cpp/algorithm/dsc push_heap}}
{{dsc inc|cpp/algorithm/ranges/dsc sort_heap}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}