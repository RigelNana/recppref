{{title|受约束算法 {{mark since c++20}}}}
{{cpp/algorithm/ranges/navbar}}

C++20 在命名空间 {{tt|std::ranges}} 中提供大多数算法的[[cpp/language/constraints|受约束]]版本，可以[[cpp/iterator/input_or_output_iterator|迭代器]]-[[cpp/iterator/sentinel_for|哨位]]对或单个 {{lconcept|range}} 实参来指定范围，并且支持投影和指向成员指针可调用对象。另外还更改了大多数算法的返回类型，以返回算法执行过程中计算的所有潜在有用信息。

===算法函数对象===
''算法函数对象''（AFO）（非正式称呼为 ''niebloid''）是[[cpp/standard_library/cpo|定制点对象（CPO）]]，但以一个或多个函数模板重载的方式指定。“函数模板”的名字指代对应的算法函数对象。

对于算法函数对象 {{c|o}}，令 {{tt|S}} 为对应的函数模板参数集。则对于任何参数序列 {{c|args...}}， {{c|o(args...)}} [[cpp/language/expressions#表达式等价|表达式等价]]于 {{c|s(args...)}}，其中在重载集 {{tt|S}} 中查找名字 {{c|s}}。

命名空间 {{tt|std::ranges}} 中的算法被定义为算法函数对象。结果是：
* 不能在调用任一算法函数对象时指定显式模板实参列表。
* 它们均不对[[cpp/language/adl|实参依赖查找]]可见。
* 作为函数调用运算符的左侧名字，由[[cpp/language/unqualified lookup|通常无限定名称查找]]找到任一算法函数对象时，[[cpp/language/adl|实参依赖查找]]被抑制。

=== 受约束算法 ===
{{dsc begin}}
{{dsc header|algorithm}}
{{dsc namespace|std::ranges}}
{{dsc h2|不修改序列的操作}}
{{dsc inc|cpp/algorithm/ranges/dsc all_any_none_of}}
{{dsc inc|cpp/algorithm/ranges/dsc for_each}}
{{dsc inc|cpp/algorithm/ranges/dsc for_each_n}}
{{dsc inc|cpp/algorithm/ranges/dsc count}}
{{dsc inc|cpp/algorithm/ranges/dsc mismatch}}
{{dsc inc|cpp/algorithm/ranges/dsc equal}}
{{dsc inc|cpp/algorithm/ranges/dsc lexicographical_compare}}
{{dsc inc|cpp/algorithm/ranges/dsc find}}
{{dsc inc|cpp/algorithm/ranges/dsc find_last}}
{{dsc inc|cpp/algorithm/ranges/dsc find_end}}
{{dsc inc|cpp/algorithm/ranges/dsc find_first_of}}
{{dsc inc|cpp/algorithm/ranges/dsc adjacent_find}}
{{dsc inc|cpp/algorithm/ranges/dsc search}}
{{dsc inc|cpp/algorithm/ranges/dsc search_n}}
{{dsc inc|cpp/algorithm/ranges/dsc contains}}
{{dsc inc|cpp/algorithm/ranges/dsc starts_with}}
{{dsc inc|cpp/algorithm/ranges/dsc ends_with}}

{{dsc h2|修改序列的操作}}
{{dsc inc|cpp/algorithm/ranges/dsc copy}}
{{dsc inc|cpp/algorithm/ranges/dsc copy_n}}
{{dsc inc|cpp/algorithm/ranges/dsc copy_backward}}
{{dsc inc|cpp/algorithm/ranges/dsc move}}
{{dsc inc|cpp/algorithm/ranges/dsc move_backward}}
{{dsc inc|cpp/algorithm/ranges/dsc fill}}
{{dsc inc|cpp/algorithm/ranges/dsc fill_n}}
{{dsc inc|cpp/algorithm/ranges/dsc transform}}
{{dsc inc|cpp/algorithm/ranges/dsc generate}}
{{dsc inc|cpp/algorithm/ranges/dsc generate_n}}
{{dsc inc|cpp/algorithm/ranges/dsc remove}}
{{dsc inc|cpp/algorithm/ranges/dsc remove_copy}}
{{dsc inc|cpp/algorithm/ranges/dsc replace}}
{{dsc inc|cpp/algorithm/ranges/dsc replace_copy}}
{{dsc inc|cpp/algorithm/ranges/dsc swap_ranges}}
{{dsc inc|cpp/algorithm/ranges/dsc reverse}}
{{dsc inc|cpp/algorithm/ranges/dsc reverse_copy}}
{{dsc inc|cpp/algorithm/ranges/dsc rotate}}
{{dsc inc|cpp/algorithm/ranges/dsc rotate_copy}}
{{dsc inc|cpp/algorithm/ranges/dsc shuffle}}
{{dsc inc|cpp/algorithm/ranges/dsc shift}}
{{dsc inc|cpp/algorithm/ranges/dsc sample}}
{{dsc inc|cpp/algorithm/ranges/dsc unique}}
{{dsc inc|cpp/algorithm/ranges/dsc unique_copy}}

{{dsc h2|划分操作}}
{{dsc inc|cpp/algorithm/ranges/dsc is_partitioned}}
{{dsc inc|cpp/algorithm/ranges/dsc partition}}
{{dsc inc|cpp/algorithm/ranges/dsc partition_copy}}
{{dsc inc|cpp/algorithm/ranges/dsc stable_partition}}
{{dsc inc|cpp/algorithm/ranges/dsc partition_point}}

{{dsc h2|排序操作}}
{{dsc inc|cpp/algorithm/ranges/dsc is_sorted}}
{{dsc inc|cpp/algorithm/ranges/dsc is_sorted_until}}
{{dsc inc|cpp/algorithm/ranges/dsc sort}}
{{dsc inc|cpp/algorithm/ranges/dsc partial_sort}}
{{dsc inc|cpp/algorithm/ranges/dsc partial_sort_copy}}
{{dsc inc|cpp/algorithm/ranges/dsc stable_sort}}
{{dsc inc|cpp/algorithm/ranges/dsc nth_element}}

{{dsc h2|二分搜索操作（在有序范围上）}}
{{dsc inc|cpp/algorithm/ranges/dsc lower_bound}}
{{dsc inc|cpp/algorithm/ranges/dsc upper_bound}}
{{dsc inc|cpp/algorithm/ranges/dsc binary_search}}
{{dsc inc|cpp/algorithm/ranges/dsc equal_range}}

{{dsc h2|集合操作（在有序范围上）}}
{{dsc inc|cpp/algorithm/ranges/dsc merge}}
{{dsc inc|cpp/algorithm/ranges/dsc inplace_merge}}
{{dsc inc|cpp/algorithm/ranges/dsc includes}}
{{dsc inc|cpp/algorithm/ranges/dsc set_difference}}
{{dsc inc|cpp/algorithm/ranges/dsc set_intersection}}
{{dsc inc|cpp/algorithm/ranges/dsc set_symmetric_difference}}
{{dsc inc|cpp/algorithm/ranges/dsc set_union}}

{{dsc h2|堆操作}}
{{dsc inc|cpp/algorithm/ranges/dsc is_heap}}
{{dsc inc|cpp/algorithm/ranges/dsc is_heap_until}}
{{dsc inc|cpp/algorithm/ranges/dsc make_heap}}
{{dsc inc|cpp/algorithm/ranges/dsc push_heap}}
{{dsc inc|cpp/algorithm/ranges/dsc pop_heap}}
{{dsc inc|cpp/algorithm/ranges/dsc sort_heap}}

{{dsc h2|最小/最大操作}}
{{dsc inc|cpp/algorithm/ranges/dsc max}}
{{dsc inc|cpp/algorithm/ranges/dsc max_element}}
{{dsc inc|cpp/algorithm/ranges/dsc min}}
{{dsc inc|cpp/algorithm/ranges/dsc min_element}}
{{dsc inc|cpp/algorithm/ranges/dsc minmax}}
{{dsc inc|cpp/algorithm/ranges/dsc minmax_element}}
{{dsc inc|cpp/algorithm/ranges/dsc clamp}}

{{dsc h2|排列操作}}
{{dsc inc|cpp/algorithm/ranges/dsc is_permutation}}
{{dsc inc|cpp/algorithm/ranges/dsc next_permutation}}
{{dsc inc|cpp/algorithm/ranges/dsc prev_permutation}}
{{dsc end}}

===受约束的数值操作===
{{dsc begin}}
{{dsc header|numeric}}
{{dsc namespace|std::ranges}}
{{dsc inc|cpp/algorithm/ranges/dsc iota}}
{{dsc end}}

===受约束的折叠操作===
{{dsc begin}}
{{dsc header|algorithm}}
{{dsc namespace|std::ranges}}
{{dsc inc|cpp/algorithm/ranges/dsc fold_left}}
{{dsc inc|cpp/algorithm/ranges/dsc fold_left_first}}
{{dsc inc|cpp/algorithm/ranges/dsc fold_right}}
{{dsc inc|cpp/algorithm/ranges/dsc fold_right_last}}
{{dsc inc|cpp/algorithm/ranges/dsc fold_left_with_iter}}
{{dsc inc|cpp/algorithm/ranges/dsc fold_left_first_with_iter}}
&lt;!--
{{dsc inc|cpp/algorithm/ranges/dsc accumulate}}
{{dsc inc|cpp/algorithm/ranges/dsc inner_product}}
{{dsc inc|cpp/algorithm/ranges/dsc adjacent_difference}}
{{dsc inc|cpp/algorithm/ranges/dsc partial_sum}}
{{dsc inc|cpp/algorithm/ranges/dsc reduce}}
{{dsc inc|cpp/algorithm/ranges/dsc exclusive_scan}}
{{dsc inc|cpp/algorithm/ranges/dsc inclusive_scan}}
{{dsc inc|cpp/algorithm/ranges/dsc transform_reduce}}
{{dsc inc|cpp/algorithm/ranges/dsc transform_exclusive_scan}}
{{dsc inc|cpp/algorithm/ranges/dsc transform_inclusive_scan}}
--&gt;
{{dsc end}}

===受约束的未初始化内存算法===
{{dsc begin}}
{{dsc header|memory}}
{{dsc namespace|std::ranges}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_copy}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_copy_n}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_fill}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_fill_n}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_move}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_move_n}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_default_construct}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_default_construct_n}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_value_construct}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_value_construct_n}}
{{dsc inc|cpp/memory/ranges/dsc destroy}}
{{dsc inc|cpp/memory/ranges/dsc destroy_n}}
{{dsc inc|cpp/memory/ranges/dsc destroy_at}}
{{dsc inc|cpp/memory/ranges/dsc construct_at}}
{{dsc end}}

===受约束的随机数算法===
{{dsc begin}}
{{dsc header|random}}
{{dsc namespace|std::ranges}}
{{dsc inc|cpp/algorithm/ranges/dsc generate_random}}
{{dsc end}}

===返回类型===
{{dsc begin}}
{{dsc header|algorithm}}
{{dsc namespace|std::ranges}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_fun_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_in_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_out_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_in_out_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_out_out_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc min_max_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_found_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc in_value_result}}
{{dsc inc|cpp/algorithm/ranges/return_types/dsc out_value_result}}
{{dsc end}}

===注解===
{{ftm begin|std=1|sort=1|comment=1}}
{{ftm|std=C++26|value=202403L|__cpp_lib_algorithm_default_value_type|算法的[[cpp/language/list_initialization|列表初始化]]}}
{{ftm|std=C++20|value=201911L|__cpp_lib_ranges|[[cpp/ranges|范围库]]和[[#Top|受约束算法]]}}
{{ftm|std=C++23|value=202207L|__cpp_lib_ranges_contains|{{lc|std::ranges::contains}}}}
{{ftm|std=C++23|value=202207L|__cpp_lib_ranges_find_last|{{lc|std::ranges::find_last}}}}
{{ftm|std=C++23|value=202207L|__cpp_lib_ranges_fold|{{tt|std::ranges}} {{tt|fold}} algorithms}}
{{ftm|std=C++23|value=202202L|__cpp_lib_ranges_iota|{{lc|std::ranges::iota}}}}
{{ftm|std=C++23|value=202106L|__cpp_lib_ranges_starts_ends_with|{{lc|std::ranges::starts_with}}, {{lc|std::ranges::ends_with}}}}
{{ftm|std=C++20|value=201806L|rowspan="2"|__cpp_lib_shift|{{lc|std::shift_left}}, {{lc|std::shift_right}}}}
{{ftm|std=C++23|value=202202L|-|{{lc|std::ranges::shift_left}}, {{lc|std::ranges::shift_right}}}}
{{ftm|std=C++26|value=202403L|__cpp_lib_ranges_generate_random|{{lc|std::ranges::generate_random}}}}
{{ftm end}}

===缺陷报告===
{{dr list begin}}
{{dr list item|paper=P3136R1|std=C++20|before=允许将 niebloids 指定为并非函数对象的特殊实体|after=要求将之指定为函数对象}}
{{dr list end}}

{{langlinks|en|es|ja|ru}}