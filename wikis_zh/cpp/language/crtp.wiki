{{title|奇特重现模板模式}}
{{cpp/language/navbar}}

{{enwiki|Curiously Recurring Template Pattern|奇特重现模板模式}}（Curiously Recurring Template Pattern, CRTP）是一种惯用手法。其中类 {{tt|X}} 从接收模板形参 {{tt|Z}} 的类模板 {{tt|Y}} 派生，并且以 {{c|1=Z = X}} 实例化 {{tt|Y}}。例如：

{{source|1=
template&lt;class Z&gt;
class Y {};

class X : public Y&lt;X&gt; {};
}}

===示例===
{{example
| CRTP 可用于在基类暴露接口而派生类实现该接口时实现“编译期多态”。
|code=
#include &lt;cstdio&gt;

#ifndef __cpp_explicit_this_parameter // 传统语法

template &lt;class Derived&gt;
struct Base
{
    void name() { (static_cast&lt;Derived*&gt;(this))-&gt;impl(); }
protected:
    Base() = default; // 禁止创建 Base 对象，这是 UB
};
struct D1 : public Base&lt;D1&gt; { void impl() { std::puts("D1::impl()"); } };
struct D2 : public Base&lt;D2&gt; { void impl() { std::puts("D2::impl()"); } };

#else // C++23 的推导 this 语法

struct Base { void name(this auto&amp;&amp; self) { self.impl(); } };
struct D1 : public Base { void impl() { std::puts("D1::impl()"); } };
struct D2 : public Base { void impl() { std::puts("D2::impl()"); } };

#endif

int main()
{
    D1 d1; d1.name();
    D2 d2; d2.name();
}
|output=
D1::impl()
D2::impl()
}}

===参阅===
{{dsc begin}}
{{dsc|[[cpp/language/member functions#显式对象成员函数|显式对象成员函数（推导 {{tt|this}}）]] {{mark c++23}}}}
{{dsc inc|cpp/memory/dsc enable_shared_from_this}}
{{dsc inc|cpp/ranges/dsc view_interface}}
{{dsc end}}

===外部链接===
{{elink begin}}
{{elink|[https://www.sandordargo.com/blog/2024/12/04/crtp-vs-concepts Replace CRTP with concepts?] &amp;mdash; Sandor Drago's blog}}
{{elink|[https://www.sandordargo.com/blog/2019/03/13/the-curiously-recurring-templatep-pattern-CRTP The Curiously Recurring Template Pattern (CRTP)] &amp;mdash; Sandor Drago's blog}}
{{elink|[https://www.fluentcpp.com/2017/05/12/curiously-recurring-template-pattern/ The Curiously Recurring Template Pattern (CRTP) - 1] &amp;mdash; Fluent{{c/core|{C++}&lt;!----&gt;}}}}
{{elink|[https://www.fluentcpp.com/2017/05/16/what-the-crtp-brings-to-code/ What the CRTP can bring to your code - 2] &amp;mdash; Fluent{{c/core|{C++}&lt;!----&gt;}}}}
{{elink|[https://www.fluentcpp.com/2017/05/19/crtp-helper/ An implementation helper for the CRTP - 3] &amp;mdash; Fluent{{c/core|{C++}&lt;!----&gt;}}}}
{{elink|[https://stackoverflow.com/questions/4173254/what-is-the-curiously-recurring-template-pattern-crtp What is the Curiously Recurring Template Pattern (CRTP)] &amp;mdash; SO}}
{{elink end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}