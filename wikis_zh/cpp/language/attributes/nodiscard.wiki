{{cpp/language/attributes/title|nodiscard|notes={{mark since c++17}}}}
{{cpp/language/attributes/navbar}}

在转换到 {{c/core|void}} 之外的[[cpp/language/expressions#弃值表达式|弃值表达式]]中调用声明为 {{tt|nodiscard}} 的函数，或调用按值返回声明为 {{tt|nodiscard}} 的枚举或类的函数时，鼓励编译器发布警告。

===语法===
{{sdsc begin}}
{{sdsc|num=1|notes={{mark since c++17}}|
{{ttb|{{c/core|[[nodiscard]]}}}}
}}
{{sdsc|num=2|notes={{mark since c++20}}|
{{ttb|{{c/core|[&lt;!----&gt;[}}nodiscard{{c/core|(}}}} {{spar|字符串字面量}} {{ttb|{{c/core|)]&lt;!----&gt;]}}}}
}}
{{sdsc end}}

{{par begin}}
{{par|{{spar|字符串字面量}}|能用于解释结果不应被舍弃的理由的[[cpp/language/string literal#不求值字符串|不求值字符串字面量]]}}
{{par end}}

===解释===
出现在函数声明、枚举声明或类声明中。

在转换到 {{c/core|void}} 之外的[[cpp/language/expressions#弃值表达式|弃值表达式]]中，

* 调用声明为 {{tt|nodiscard}} 的函数，或
* 调用按值返回声明为 {{tt|nodiscard}} 的枚举或类的函数，或
* 以[[cpp/language/explicit_cast|显式类型转换]]或 {{ltt|cpp/language/static_cast}} 形式调用声明为 {{tt|nodiscard}} 的构造函数，或
* 以[[cpp/language/explicit_cast|显式类型转换]]或 {{ltt|cpp/language/static_cast}} 形式构造声明为 {{tt|nodiscard}} 的枚举或类的对象，

则鼓励编译器发布警告。

{{rrev|since=c++20|若指定了 {{spar|字符串字面量}}，则它通常被包含于警告中。}}

===示例===
{{example
|code=
struct [[nodiscard]] error_info { /*...*/ };

error_info enable_missile_safety_mode() { /*...*/ return {}; }

void launch_missiles() { /*...*/ }

void test_missiles()
{
    enable_missile_safety_mode(); // 编译器可在舍弃 nodiscard 值时发布警告
    launch_missiles();
}

error_info&amp; foo() { static error_info e; /*...*/ return e; }

void f1() { foo(); } // 并非按值返回 nodiscard 类型，无警告

// nodiscard( 字符串字面量 ) (C++20 起):
[[nodiscard("PURE FUN")]] int strategic_value(int x, int y) { return x ^ y; }

int main()
{
    strategic_value(4, 2); // 编译器可能对丢弃 nodiscard 值发出警告
    auto z = strategic_value(0, 0); // OK：未丢弃返回值
    return z;
}
|p=true
|output=
game.cpp:5:4: warning: ignoring return value of function declared with ⮠
 'nodiscard' attribute
game.cpp:17:5: warning: ignoring return value of function declared with ⮠
 'nodiscard' attribute: PURE FUN
}}

{{rrev|until=c++26|1=
===标准库===
下列标准函数声明为带 {{tt|nodiscard}} 属性：
{{cot}}
{{dsc begin}}

{{dsc h2|分配函数}}
{{dsc inc|cpp/memory/new/dsc operator new}}
{{dsc inc|cpp/memory/allocator/dsc allocate}}
{{dsc inc|cpp/memory/allocator_traits/dsc allocate}}
{{dsc inc|cpp/memory/memory_resource/dsc allocate}}
{{dsc inc|cpp/memory/polymorphic_allocator/dsc allocate}}
{{dsc inc|cpp/memory/scoped_allocator_adaptor/dsc allocate}}

{{dsc h2|间接访问}}
{{dsc inc|cpp/utility/dsc launder}}
{{dsc inc|cpp/memory/dsc assume_aligned}}

{{dsc h2|检查是否为空的函数}}
{{dsc inc|cpp/iterator/dsc empty}}
{{dsc|{{dsc member|cpp/container/node_handle#empty|empty}}|检查结点句柄是否为空&lt;br/&gt;{{mark mem fun|mem=''node handle''}}}}&lt;!-- 需要更好的描述 --&gt;
{{dsc inc|cpp/container/dsc empty|array}}
{{dsc inc|cpp/string/basic_string/dsc empty}}
{{dsc inc|cpp/string/basic_string_view/dsc empty}}
{{dsc inc|cpp/container/dsc empty|deque}}
{{dsc inc|cpp/container/dsc empty|forward_list}}
{{dsc inc|cpp/container/dsc empty|list}}
{{dsc inc|cpp/container/dsc empty|map}}
{{dsc inc|cpp/regex/match_results/dsc empty}}
{{dsc inc|cpp/container/dsc empty|multimap}}
{{dsc inc|cpp/container/dsc empty|multiset}}
{{dsc inc|cpp/container/dsc empty|priority_queue}}
{{dsc inc|cpp/container/dsc empty|queue}}
{{dsc inc|cpp/container/dsc empty|set}}
{{dsc inc|cpp/container/span/dsc empty}}
{{dsc inc|cpp/container/dsc empty|stack}}
{{dsc inc|cpp/container/dsc empty|unordered_map}}
{{dsc inc|cpp/container/dsc empty|unordered_multimap}}
{{dsc inc|cpp/container/dsc empty|unordered_multiset}}
{{dsc inc|cpp/container/dsc empty|unordered_set}}
{{dsc inc|cpp/container/dsc empty|vector}}
{{dsc inc|cpp/filesystem/path/dsc empty}}

{{dsc h2|杂项}}
{{dsc inc|cpp/thread/dsc async}}
&lt;!-- subrange::next, subrange::prev --&gt;

{{dsc end}}
{{cob}}
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|paper=P1771R1|std=C++17|before=构造函数上的 {{attr/core|nodiscard}} 无效果|after=若舍弃该对象则能导致警告}}
{{dr list end}}

===引用===
{{ref std c++23}}
{{ref std|section=9.12.9|title=Nodiscard attribute|id=dcl.attr.nodiscard}}
{{ref std end}}
{{ref std c++20}}
{{ref std|section=9.12.8|title=Nodiscard attribute|id=dcl.attr.nodiscard}}
{{ref std end}}
{{ref std c++17}}
{{ref std|section=10.6.7|title=Nodiscard attribute|id=dcl.attr.nodiscard}}
{{ref std end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/utility/tuple/dsc ignore}}
{{dsc see c|c/language/attributes/nodiscard}}
{{dsc end}}

{{langlinks|en|es|ja}}