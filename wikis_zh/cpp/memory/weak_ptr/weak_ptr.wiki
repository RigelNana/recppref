{{cpp/memory/weak_ptr/title|weak_ptr}}
{{cpp/memory/weak_ptr/navbar}}
{{dcl begin}}
{{dcl|num=1|since=c++11|
constexpr weak_ptr() noexcept;
}}
{{dcl|num=2|since=c++11|
weak_ptr( const weak_ptr&amp; r ) noexcept;
}}
{{dcl|num=2|since=c++11|
template&lt; class Y &gt; 
weak_ptr( const weak_ptr&lt;Y&gt;&amp; r ) noexcept;
}}
{{dcl|num=2|since=c++11|
template&lt; class Y &gt; 
weak_ptr( const std::shared_ptr&lt;Y&gt;&amp; r ) noexcept;
}}
{{dcl|num=3|since=c++11|
weak_ptr( weak_ptr&amp;&amp; r ) noexcept;
}}
{{dcl|num=3|since=c++11|
template&lt; class Y &gt; 
weak_ptr( weak_ptr&lt;Y&gt;&amp;&amp; r ) noexcept;
}}
{{dcl end}}

构造潜在地与 {{c|r}} 共享对象的新 {{tt|weak_ptr}}。

@1@ 默认构造函数。构造空 {{tt|weak_ptr}}。
@2@ 构造新的 {{tt|weak_ptr}}，它共享 {{c|r}} 所管理的对象。若 {{c|r}} 不管理对象，则 {{c|*this}} 亦不管理对象。除非 {{tt|Y*}} 可隐式转换为 {{tt|T*}}{{rev inl|since=c++17|，或 {{tt|Y}} 是某类型 {{tt|U}} 和某数 {{tt|N}} 的“{{tt|N}} 个 {{tt|U}} 的数组”类型，且 {{tt|T}} 是“（可有 cv 限定的）{{tt|U}} 的未知边界数组”类型}}，否则模板化重载不参与重载决议。
@3@ 移动构造函数。从 {{c|r}} 移动 {{tt|weak_ptr}} 实例到 {{tt|*this}}。之后，{{c|r}} 为空且 {{c|1=r.use_count()==0}}。除非 {{tt|Y*}} 可隐式转换为 {{tt|T*}}，否则模板重载不参与重载决议。

===参数===
{{par begin}}
{{par|r|将为此 {{lc|std::weak_ptr}} 所查看的 {{lc|std::shared_ptr}} 或 {{lc|std::weak_ptr}}}}
{{par end}} 

===注解===
因为默认构造函数是 {{tt|constexpr}}，所以静态 {{tt|weak_ptr}} 会在任何动态非局部初始化之前，作为[[cpp/language/initialization#非局部变量|静态非局部初始化]]的一部分初始化。这使得在任何静态对象的构造函数中使用 {{tt|weak_ptr}} 都是安全的。

===示例===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;memory&gt;

struct Foo {};

int main()
{
    std::weak_ptr&lt;Foo&gt; w_ptr;

    {
        auto ptr = std::make_shared&lt;Foo&gt;();
        w_ptr = ptr;
        std::cout &lt;&lt; "作用域内的 w_ptr.use_count(): " &lt;&lt; w_ptr.use_count() &lt;&lt; '\n';
    }

    std::cout &lt;&lt; "作用域外的 w_ptr.use_count(): " &lt;&lt; w_ptr.use_count() &lt;&lt; '\n';
    std::cout &lt;&lt; "作用域外的 w_ptr.expired(): "
              &lt;&lt; std::boolalpha &lt;&lt; w_ptr.expired() &lt;&lt; '\n';
}
|output=
作用域内的 w_ptr.use_count(): 1
作用域外的 w_ptr.use_count(): 0
作用域外的 w_ptr.expired(): true
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|dr=2315|std=C++11|before=移动语义未对 {{tt|weak_ptr}} 启用|after=已启用}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/memory/weak_ptr/dsc operator{{=}}}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}