{{cpp/title|bad_weak_ptr}}
{{cpp/memory/navbar}}
{{dcl begin}}
{{dcl header|memory}}
{{dcl|since=c++11|1=
class bad_weak_ptr;
}}
{{dcl end}}

{{tt|std::bad_weak_ptr}} 是 {{lc|std::shared_ptr}} 以 {{lc|std::weak_ptr}} 为参数的构造函数，在 {{lc|std::weak_ptr}} 指代已被删除的对象时，作为异常抛出的对象类型。

{{inheritance diagram/std-bad_weak_ptr}}

===成员函数===
{{cpp/error/exception/member of derived|bad_weak_ptr|std=c++11}}

{{cpp/error/exception/inherit}}

===示例===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;memory&gt;

int main()
{
    std::shared_ptr&lt;int&gt; p1(new int(42));
    std::weak_ptr&lt;int&gt; wp(p1);
    p1.reset();
    try
    {
        std::shared_ptr&lt;int&gt; p2(wp);
    }
    catch (const std::bad_weak_ptr&amp; e)
    {
        std::cout &lt;&lt; e.what() &lt;&lt; '\n';
    }
}
|p=true
|output=
std::bad_weak_ptr
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|wg=lwg|dr=2376|std=C++11|before=要求在默认构造的 {{tt|bad_weak_ptr}} 上调用 {{tt|what}} 返回 {{c|"bad_weak_ptr"}}|after=返回值为实现定义}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/memory/dsc shared_ptr}}
{{dsc inc|cpp/memory/dsc weak_ptr}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}