{{title|1=operator=={{petty|(std::expected)}}}}
{{cpp/utility/expected/navbar}}

{{dcl begin}}
{{dcl h|ä¸»æ¨¡æ¿}}
{{dcl|num=1|since=c++23|1=
template&lt; class T2, class E2 &gt;
    requires (!std::is_void_v&lt;T2&gt;)
friend constexpr bool operator==( const expected&amp; lhs,
                                  const std::expected&lt;T2, E2&gt;&amp; rhs );
}}
{{dcl|num=2|since=c++23|1=
template&lt; class E2 &gt;
friend constexpr bool operator==( const expected&amp; lhs,
                                  const std::unexpected&lt;E2&gt;&amp; unex );
}}
{{dcl|num=3|since=c++23|1=
template&lt; class T2 &gt;
friend constexpr bool operator==( const expected&amp; lhs, const T2&amp; val );
}}
{{dcl h|{{c/core|void}} éƒ¨åˆ†ç‰¹åŒ–}}
{{dcl|num=4|since=c++23|1=
template&lt; class T2, class E2 &gt;
  requires std::is_void_v&lt;T2&gt;
friend constexpr bool operator==( const expected&amp; lhs,
                                  const std::expected&lt;T2, E2&gt;&amp; rhs );
}}
{{dcl|num=5|since=c++23|1=
template&lt; class E2 &gt;
friend constexpr bool operator==( const expected&amp; lhs,
                                  const std::unexpected&lt;E2&gt;&amp; unex );
}}
{{dcl end}}

å¯¹ {{lc|std::expected}} å¯¹è±¡æ‰§è¡Œæ¯”è¾ƒæ“ä½œã€‚

@1@ æ¯”è¾ƒä¸¤ä¸ª {{lc|std::expected}} å¯¹è±¡ã€‚å½“ä¸”ä»…å½“ {{c|lhs}} å’Œ {{c|rhs}} éƒ½åŒ…å«ç›¸ç­‰çš„é¢„æœŸå€¼ï¼Œæˆ–è€…éƒ½åŒ…å«ç›¸ç­‰çš„éé¢„æœŸå€¼æ—¶ï¼Œå¯¹è±¡æ‰æ¯”è¾ƒç›¸ç­‰ã€‚
{{rev begin}}
{{rev|until=c++26|
å¦‚æœä»¥ä¸‹ä»»æ„è¡¨è¾¾å¼éè‰¯æ„æˆ–å®ƒï¼ˆä»¬ï¼‰çš„ç»“æœä¸å¯è½¬æ¢åˆ° {{c/core|bool}}ï¼Œé‚£ä¹ˆç¨‹åºéè‰¯æ„ï¼š
}}
{{rev|since=c++26|
{{cpp/enable if|ä»¥ä¸‹æ‰€æœ‰è¡¨è¾¾å¼éƒ½è‰¯æ„ä¸”å®ƒä»¬çš„ç»“æœå¯è½¬æ¢åˆ° {{c/core|bool}} }}ï¼š
}}
{{rev end}}
* {{c|1=*x == *y}}
* {{c|1=x.error() == y.error()}}

@2@ å°† {{lc|std::expected}} å¯¹è±¡ä¸ä¸€ä¸ª {{lc|std::unexpected}} å¯¹è±¡æ¯”è¾ƒã€‚å½“ä¸”ä»…å½“ {{c|lhs}} åŒ…å«ä¸€ä¸ªç­‰äº {{c|unex.error()}} çš„éé¢„æœŸå€¼æ—¶ï¼Œå¯¹è±¡æ‰æ¯”è¾ƒç›¸ç­‰ã€‚
{{rev begin}}
{{rev|until=c++26|
å¦‚æœè¡¨è¾¾å¼ {{c|1=lhs.error() == unex.error()}} éè‰¯æ„æˆ–å®ƒçš„ç»“æœä¸å¯è½¬æ¢åˆ° {{c/core|bool}}ï¼Œé‚£ä¹ˆç¨‹åºéè‰¯æ„ã€‚
}}
{{rev|since=c++26|
{{cpp/enable if|è¡¨è¾¾å¼ {{c|1=lhs.error() == unex.error()}} è‰¯æ„ä¸”å®ƒçš„ç»“æœå¯è½¬æ¢åˆ° {{c/core|bool}} }}ã€‚
}}
{{rev end}}

@3@ å°† {{lc|std::expected}} å¯¹è±¡ä¸ä¸€ä¸ªé¢„æœŸå€¼æ¯”è¾ƒã€‚å½“ä¸”ä»…å½“ {{c|lhs}} åŒ…å«ä¸€ä¸ªç­‰äº {{c|val}} çš„é¢„æœŸå€¼æ—¶ï¼Œå¯¹è±¡æ‰æ¯”è¾ƒç›¸ç­‰ã€‚
{{rev begin}}
{{rev|until=c++26|
å¦‚æœè¡¨è¾¾å¼ {{c|1=*lhs == val}} éè‰¯æ„æˆ–å®ƒçš„ç»“æœä¸å¯è½¬æ¢åˆ° {{c/core|bool}}ï¼Œé‚£ä¹ˆç¨‹åºéè‰¯æ„ã€‚
}}
{{rev|since=c++26|
{{cpp/enable if|æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶}}ï¼š
* {{tt|T2}} ä¸æ˜¯ {{lc|std::expected}} çš„ç‰¹åŒ–ã€‚
* è¡¨è¾¾å¼ {{c|1=*lhs == val}} è‰¯æ„ä¸”å®ƒçš„ç»“æœå¯è½¬æ¢åˆ° {{c/core|bool}}ã€‚
}}
{{rev end}}

@4@ æ¯”è¾ƒä¸¤ä¸ª {{lc|std::expected}} å¯¹è±¡ã€‚å½“ä¸”ä»…å½“ {{c|lhs}} å’Œ {{c|rhs}} éƒ½è¡¨ç¤ºé¢„æœŸå€¼ï¼Œæˆ–è€…éƒ½åŒ…å«ç›¸ç­‰çš„éé¢„æœŸå€¼æ—¶ï¼Œå¯¹è±¡æ‰æ¯”è¾ƒç›¸ç­‰ã€‚
{{rev begin}}
{{rev|until=c++26|
å¦‚æœè¡¨è¾¾å¼ {{c|1=lhs.error() == rhs.error()}} éè‰¯æ„æˆ–å®ƒçš„ç»“æœä¸å¯è½¬æ¢åˆ° {{c/core|bool}}ï¼Œé‚£ä¹ˆç¨‹åºéè‰¯æ„ã€‚
}}
{{rev|since=c++26|
{{cpp/enable if|è¡¨è¾¾å¼ {{c|1=lhs.error() == rhs.error()}} è‰¯æ„ä¸”å®ƒçš„ç»“æœå¯è½¬æ¢åˆ° {{c/core|bool}} }}ã€‚
}}
{{rev end}}

@5@ å°† {{lc|std::expected}} å¯¹è±¡ä¸ä¸€ä¸ª {{lc|std::unexpected}} å¯¹è±¡æ¯”è¾ƒã€‚å½“ä¸”ä»…å½“ {{c|lhs}} åŒ…å«ä¸€ä¸ªç­‰äº {{c|unex.error()}} çš„éé¢„æœŸå€¼æ—¶ï¼Œå¯¹è±¡æ‰æ¯”è¾ƒç›¸ç­‰ã€‚
{{rev begin}}
{{rev|until=c++26|
å¦‚æœè¡¨è¾¾å¼ {{c|1=lhs.error() == unex.error()}} éè‰¯æ„æˆ–å®ƒçš„ç»“æœä¸å¯è½¬æ¢åˆ° {{c/core|bool}}ï¼Œé‚£ä¹ˆç¨‹åºéè‰¯æ„ã€‚
}}
{{rev|since=c++26|
{{cpp/enable if|è¡¨è¾¾å¼ {{c|1=lhs.error() == unex.error()}} è‰¯æ„ä¸”å®ƒçš„ç»“æœå¯è½¬æ¢åˆ° {{c/core|bool}} }}ã€‚
}}
{{rev end}}

{{cpp/hidden friend|{{tt|std::expected&lt;T, E&gt;}}|plural=yes}}

{{cpp/note synthesized eq}}

===å‚æ•°===
{{par begin}}
{{par|lhs, rhs|ç”¨äºæ¯”è¾ƒçš„ {{lc|std::expected}} å¯¹è±¡}}
{{par|unex|è¦ä¸ {{c|lhs}} æ¯”è¾ƒçš„ {{lc|std::unexpected}} å¯¹è±¡}}
{{par|val|è¦ä¸ {{c|lhs}} ä¸­åŒ…å«çš„é¢„æœŸå€¼æ¯”è¾ƒçš„å€¼}}
{{par end}}

===è¿”å›å€¼===
@1@ {{c multi|lhs.has_value() !{{=}} rhs.has_value() ? false :|    (lhs.has_value() ? *lhs {{==}} *rhs : lhs.error() {{==}} rhs.error())}}

@2@ {{c|1=!lhs.has_value() &amp;&amp; static_cast&lt;bool&gt;(lhs.error() == unex.error())}}

@3@ {{c|1=lhs.has_value() &amp;&amp; static_cast&lt;bool&gt;(*lhs == val)}}

@4@ {{c multi|lhs.has_value() !{{=}} rhs.has_value() ? false :|    lhs.has_value() {{!!}} static_cast&lt;bool&gt;(lhs.error() {{==}} rhs.error())}}

@5@ {{c|1=!lhs.has_value() &amp;&amp; static_cast&lt;bool&gt;(lhs.error() == unex.error())}}

===å¼‚å¸¸===
æŠ›å‡ºæ¯”è¾ƒæ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚

===æ³¨è§£===
{{feature test macro|__cpp_lib_constrained_equality|å—çº¦æŸçš„ {{lc|std::expected}} ç›¸å…³æ¯”è¾ƒè¿ç®—ç¬¦|value=202411L|std=C++26}}

===ç¤ºä¾‹===
{{example
|code=
#include &lt;expected&gt;
#include &lt;iostream&gt;
#include &lt;string_view&gt;

using namespace std::string_view_literals;

int main()
{
    auto x1{"\N{GREEN HEART}"sv};
    auto x2{"\N{CROSS MARK}"sv};
    std::expected&lt;std::string_view, int&gt; e1{x1}, e2{x1}, e3{x2};
    std::unexpected u1{13};
    
    std::cout &lt;&lt; "é‡è½½ (1)ï¼š\n"
              &lt;&lt; e1.value() &lt;&lt; (e1 == e2 ? " == " : " != ") &lt;&lt; *e2 &lt;&lt; '\n'
              &lt;&lt; e1.value() &lt;&lt; (e1 != e3 ? " != " : " == ") &lt;&lt; *e3 &lt;&lt; "\n\n";
    
    std::cout &lt;&lt; "é‡è½½ (2)ï¼š\n"
              &lt;&lt; e1.value() &lt;&lt; (e1 == u1 ? " == " : " != ") &lt;&lt; u1.error() &lt;&lt; '\n';
    e1 = std::unexpected{13};
    std::cout &lt;&lt; e1.error() &lt;&lt; (e1 == u1 ? " == " : " != ") &lt;&lt; u1.error() &lt;&lt; '\n';
    e1 = std::unexpected{31};
    std::cout &lt;&lt; e1.error() &lt;&lt; (e1 != u1 ? " != " : " == ") &lt;&lt; u1.error() &lt;&lt; '\n';
    
    std::cout &lt;&lt; "é‡è½½ (3)ï¼š\n"
              &lt;&lt; *e1 &lt;&lt; (e1 == x1 ? " == " : " != ") &lt;&lt; x1 &lt;&lt; '\n'
              &lt;&lt; *e1 &lt;&lt; (e1 != x2 ? " != " : " == ") &lt;&lt; x2 &lt;&lt; "\n\n";
}
|output=
é‡è½½ (1)ï¼š
ğŸ’š == ğŸ’š
ğŸ’š != âŒ

é‡è½½ (2)ï¼š
ğŸ’š != 13
13 == 13
31 != 13

é‡è½½ (3)ï¼š
ğŸ’š == ğŸ’š
ğŸ’š != âŒ
}}

===å‚é˜…===
{{dsc begin}}
{{dsc inc|cpp/utility/expected/dsc unexpected}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}