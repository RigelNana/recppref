{{cpp/utility/variant/title|swap}}
{{cpp/utility/variant/navbar}}
{{dcl begin}}
{{dcla|since=c++17|constexpr=c++20|
void swap( variant&amp; rhs ) noexcept(/* 见下文 */);
}}
{{dcl end}}

交换两个 {{rlpt|/|variant}} 对象。

* 若 {{c|*this}} 和 {{c|rhs}} 均{{rlp|valueless_by_exception|因异常无值}}，则不做任何事；
* 否则，若 {{c|*this}} 与 {{c|rhs}} 保有同一可选项，则调用 {{c|swap(*std::get_if&lt;i&gt;(this), *std::get_if&lt;i&gt;(std::addressof(rhs)))}}，其中 {{c|i}} 为 {{rlpf|index}}。若抛出了异常，则值的状态取决于被调用交换函数的异常安全性；
* 否则，交换 {{c|rhs}} 与 {{c|*this}} 的值。若抛出了异常，则 {{c|*this}} 与 {{c|rhs}} 的状态取决于变体的移动构造函数的异常安全性。

除非对于所有 {{tt|Types...}} 中的 {{tt|T_i}}，{{tt|T_i}} {{named req|Swappable}}且 {{c|std::is_move_constructible_v&lt;T_i&gt;}} 是 {{c|true}}，否则程序非良构。

===参数===
{{par begin}}
{{par|rhs|要交换的 {{tt|variant}} 对象}}
{{par end}}

===返回值===
（无）

===异常===
若 {{c|1=this-&gt;index() == rhs.index()}}，则可能抛出 {{c|swap(*std::get_if&lt;i&gt;(this), *std::get_if&lt;i&gt;(std::addressof(rhs)))}} 所抛的任何异常，其中 {{c|i}} 为 {{rlpf|index}}。

否则，可能抛出当前 {{c|*this}} 与 {{c|rhs}} 所保有的可选项的移动构造函数所抛的任何异常。

{{noexcept|((std::is_nothrow_move_constructible_v&lt;Types&gt; &amp;&amp; 
           std::is_nothrow_swappable_v&lt;Types&gt;) &amp;&amp; ...)}}

===注解===
{{ftm begin}}
{{ftm|std=C++20|dr=yes|value=202106L|__cpp_lib_variant|完全 {{c/core|constexpr}} 的 {{tt|std::variant}}}}
{{ftm end}}

===示例===
{{example
|code =
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;variant&gt;

int main()
{
    std::variant&lt;int, std::string&gt; v1{2}, v2{"abc"}; 
    std::visit([] (auto&amp;&amp; x) { std::cout &lt;&lt; x &lt;&lt; ' '; }, v1);
    std::visit([] (auto&amp;&amp; x) { std::cout &lt;&lt; x &lt;&lt; '\n'; }, v2);
    v1.swap(v2);
    std::visit([] (auto&amp;&amp; x) { std::cout &lt;&lt; x &lt;&lt; ' '; }, v1);
    std::visit([] (auto&amp;&amp; x) { std::cout &lt;&lt; x &lt;&lt; '\n'; }, v2);
}
|output =
2 abc
abc 2
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|paper=P2231R1|std=C++20|before={{tt|swap}} 不是 {{c/core|constexpr}}，而非平凡析构函数在 C++20 中能为 {{c/core|constexpr}}|after=使之为 {{c/core|constexpr}}}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/utility/variant/dsc swap2}}
{{dsc end}}

{{langlinks|en|es|ja|ru}}