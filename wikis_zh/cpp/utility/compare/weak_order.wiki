{{cpp/title|weak_order}}
{{cpp/utility/navbar}}
{{dcl begin}}
{{dcl header|compare}}
{{dcl|since=c++20|1=
inline namespace /* 未指定 */ {
    inline constexpr /* 未指定 */ weak_order = /* 未指定 */;
}
}}
{{dcl h|调用签名}}
{{dcl|1=
template&lt; class T, class U &gt;
    requires /* 见下文 */
constexpr std::weak_ordering weak_order(T&amp;&amp; t, U&amp;&amp; u) noexcept(/* 见下文 */);
}}
{{dcl end}}

用三路比较比较两个值，并产生 {{rlpt|weak_ordering|std::weak_ordering}} 类型的结果。

设 {{c|t}} 与 {{c|u}} 为表达式，而 {{tt|T}} 与 {{tt|U}} 分别代表 {{c/core|decltype((t))}} 与 {{c/core|decltype((u))}} 类型的值，那么 {{c|std::weak_order(t, u)}} [[cpp/language/expressions#表达式等价|表达式等价]]于：
* 如果 {{c|std::is_same_v&lt;std::decay_t&lt;T&gt;, std::decay_t&lt;U&gt;&gt;}} 是 {{c|true}}：
** {{c|std::weak_ordering(weak_order(t, u))}}，那么在不包含 {{tt|std::weak_order}} 的声明的语境中进行重载决议的情况下它是良构的表达式，
** 否则，如果 {{tt|T}} 是浮点类型：
*** 如果 {{c|std::numeric_limits&lt;T&gt;::is_iec559}} 是 {{c|true}}，那么进行浮点值的弱序比较（见后述）并返回 {{rlpt|weak_ordering|std::weak_ordering}} 类型的值作为结果，
*** 否则，产生与 {{tt|T}} 的比较运算符所观察的顺序一致的 {{rlpt|weak_ordering|std::weak_ordering}} 类型的值，
** 否则是 {{c|std::weak_ordering(std::compare_three_way()(t, u))}}，如果它良构，
** 否则是 {{c|std::weak_ordering(std::strong_order(t, u))}}，如果它良构。
* 所有其他情况下，该表达式非良构，这能在出现于模板实例化的立即语境时导致[[cpp/language/sfinae|代换失败]]。

{{cpp/ranges/cpo|std}}

====IEEE 浮点类型的严格弱序====
设 {{c|x}} 和 {{c|y}} 为相同 IEEE 浮点类型的值，而 {{c|weak_order_less(x, y)}} 为指示在 C++ 标准定义的严格弱序中 {{c|x}} 是否前趋于 {{c|y}} 的布尔结果。

* 如果 {{c|x}} 和 {{c|y}} 均非 NaN，那么当且仅当 {{c|x &lt; y}} 时 {{c|1=weak_order_less(x, y) == true}}，即相等浮点值的所有表示等价；
* 如果 {{c|x}} 是负 NaN 且 {{c|y}} 不是负 NaN，那么 {{c|1=weak_order_less(x, y) == true}}；
* 如果 {{c|x}} 不是正 NaN 且 {{c|y}} 是正 NaN，那么 {{c|1=weak_order_less(x, y) == true}}；
* 如果 {{c|x}} 和 {{c|y}} 都是拥有同一符号的 NaN，那么 {{c|1=(weak_order_less(x, y) {{!!}} weak_order_less(y, x)) == false}}，即所有符号相同的 NaN 等价。

===示例===
{{example}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/utility/compare/dsc weak_ordering}}
{{dsc inc|cpp/utility/compare/dsc strong_order}}
{{dsc inc|cpp/utility/compare/dsc partial_order}}
{{dsc inc|cpp/utility/compare/dsc compare_weak_order_fallback}}
{{dsc end}}

{{langlinks|de|en|es|ja|ru}}