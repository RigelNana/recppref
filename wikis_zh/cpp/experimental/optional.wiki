{{cpp/experimental/title|optional}}
{{cpp/experimental/optional/navbar}}
{{fmbox|class=noprint|style=font-size: 0.8em|text='''已并入 ISO C++''' 此页面描述的功能已于 2016 年 3 月并入 ISO C++ 标准主线，参见 {{ltt|cpp/utility/optional|std::optional}} {{mark since c++17}}}}

{{ddcl|header=experimental/optional|since=libfund_ts|
template&lt; class T &gt;
class optional;
}}

类模板 {{tt|std::experimental::optional}} 管理一个''可选的''含有值，即可能存在也可能不存在的值。

{{tt|optional}} 的一种常见用法是作为可能失败的函数的返回值。与诸如 {{c|std::pair&lt;T,bool&gt;}} 等其他方案相反，{{tt|optional}} 可以很好处理构造昂贵的对象且更具可读性，其意图已明确表达。

{{tt|optional&lt;T&gt;}} 的任何对象在任意时间点要么''含有值''要么''不含有值''。

如果 {{tt|optional&lt;T&gt;}} ''含有值''，则该值保证作为 {{tt|optional}} 对象所占据空间的一部分进行分配，即不会发生任何动态内存分配。因此，{{tt|optional}} 对象模仿的是对象而非指针，即便定义了 {{lc|operator*()}} 和 {{lc|operator-&gt;()}}。

当 {{t||optional&lt;T&gt;}} 类型的对象被[[cpp/language/implicit_cast|按语境转换为 {{tt|bool}}]] 时，如果对象''含有值''则转换返回 {{c|true}}，而如果它''不含有值''则返回 {{c|false}}。

以下条件下 {{tt|optional}} 对象''含有值''：

* 对象以 {{tt|T}} 类型的值初始化。
* 对象从''含有值''的另一 {{tt|optional}} 对象赋值。

以下条件下对象''不含有值''：

* 对象为默认初始化。
* 对象以 {{lc|std::experimental::nullopt_t}} 类型的值或''不含有值''的 {{tt|optional}} 对象初始化。
* 对象以 {{lc|std::experimental::nullopt_t}} 类型的值或''不含有值''的 {{tt|optional}} 对象赋值。

===模板形参===
{{par begin}}
{{par|T|所要管理初始化状态的值的类型。该类型必须满足{{named req|Destructible}}的规定。}}
{{par end}}

===成员类型===
{{dsc begin}}
{{dsc hitem|成员类型|定义}}
{{dsc|{{tt|value_type}}|{{tt|T}}}}
{{dsc end}}

===成员函数===
{{dsc begin}}
{{dsc inc|cpp/experimental/optional/dsc constructor}}
{{dsc inc|cpp/experimental/optional/dsc destructor}}
{{dsc inc|cpp/experimental/optional/dsc operator{{=}}}}

{{dsc h2|观察器}}
{{dsc inc|cpp/experimental/optional/dsc operator*}}
{{dsc inc|cpp/experimental/optional/dsc operator bool}}
{{dsc inc|cpp/experimental/optional/dsc value}}
{{dsc inc|cpp/experimental/optional/dsc value_or}}

{{dsc h2|修改器}}
{{dsc inc|cpp/experimental/optional/dsc swap}}
{{dsc inc|cpp/experimental/optional/dsc emplace}}
{{dsc end}}

===成员对象===
{{dsc begin}}
{{dsc hitem|成员名|定义}}
{{dsc|{{tt|val}} {{mark|private}}|指向所含值的指针（它指向相同对象的数据成员），其名字仅用于阐释}}
{{dsc end}}

===非成员函数===
{{dsc begin}}
{{dsc inc|cpp/experimental/optional/dsc operator_cmp}}
{{dsc inc|cpp/experimental/optional/dsc make_optional}}
{{dsc inc|cpp/experimental/optional/dsc swap2}}
{{dsc end}}

===辅助类===
{{dsc begin}}
{{dsc inc|cpp/experimental/optional/dsc hash}}
{{dsc inc|cpp/experimental/optional/dsc nullopt_t}}
{{dsc inc|cpp/experimental/optional/dsc in_place_t}}
{{dsc inc|cpp/experimental/optional/dsc bad_optional_access}}
{{dsc end}}

===辅助对象===
{{dsc begin}}
{{dsc inc|cpp/experimental/optional/dsc nullopt}}
{{dsc inc|cpp/experimental/optional/dsc in_place}}
{{dsc end}}