{{cpp/filesystem/title|equivalent}}
{{cpp/filesystem/navbar}}
{{dcl begin}}
{{dcl header|filesystem}}
{{dcl|num=1|since=c++17|1=
bool equivalent( const std::filesystem::path&amp; p1,
                 const std::filesystem::path&amp; p2 );
}}
{{dcl|num=2|since=c++17|1=
bool equivalent( const std::filesystem::path&amp; p1,
                 const std::filesystem::path&amp; p2,
                 std::error_code&amp; ec ) noexcept;
}}
{{dcl end}}

检查路径 {{c|p1}} 与 {{c|p2}} 是否解析到同一文件系统实体。

若 {{c|p1}} 或 {{c|p2}} 不存在则报告错误。

不抛出重载在错误时返回 {{c|false}}。

===参数===
{{par begin}}
{{par | p1, p2 | 要检测等价性的路径}}
{{par | ec | 不抛出重载中报告错误的输出形参}}
{{par end}}

===返回值===
若 {{c|p1}} 与 {{c|p2}} 指代同一文件或目录且其文件状态相同则为 {{c|true}}。否则为 {{c|false}}。

===异常===
{{cpp/filesystem/error_handling|p1|p2|throw=1/2}}

===注解===
若两个路径解析到的候选实体位于同设备的同一位置，则认为它们解析到同一文件系统实体。对于 POSIX，这表明其如同以 POSIX [http://pubs.opengroup.org/onlinepubs/9699919799/functions/stat.html {{tt|stat()}}] 获得的 POSIX [http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_stat.h.html {{tt|stat}} 结构]的 {{tt|st_dev}} 与 {{tt|st_ino}} 成员相等。

特别是，同一文件或目录的所有硬链接等价，而同一文件系统上的符号链接与其目标等价。

===示例===
{{example
|code=
#include &lt;cstdint&gt;
#include &lt;filesystem&gt;
#include &lt;iostream&gt;
namespace fs = std::filesystem;

int main()
{
    // 硬链接等价
    fs::path p1 = ".";
    fs::path p2 = fs::current_path();
    if(fs::equivalent(p1, p2))
        std::cout &lt;&lt; p1 &lt;&lt; " is equivalent to " &lt;&lt; p2 &lt;&lt; '\n';

    // 符号链接等价
    for (const fs::path lib : {"/lib/libc.so.6", "/lib/x86_64-linux-gnu/libc.so.6"})
    {
        try
        {
            p2 = lib.parent_path() / fs::read_symlink(lib);
        }
        catch (std::filesystem::filesystem_error const&amp; ex)
        {
            std::cout &lt;&lt; ex.what() &lt;&lt; '\n';
            continue;
        }

        if (fs::equivalent(lib, p2))
            std::cout &lt;&lt; lib &lt;&lt; " is equivalent to " &lt;&lt; p2 &lt;&lt; '\n';
    }
}
|p=true
|output=
"." is equivalent to "/var/tmp/test"
filesystem error: read_symlink: No such file or directory [/lib/libc.so.6]
"/lib/x86_64-linux-gnu/libc.so.6" is equivalent to "/lib/x86_64-linux-gnu/libc-2.23.so"
}}

===缺陷报告===
{{dr list begin}}
{{dr list item|dr=2937|wg=lwg|std=C++17|before=未能正确制定错误条件|after=已修正}}
{{dr list end}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/filesystem/path/dsc compare}}
{{dsc inc|cpp/filesystem/path/dsc operator_cmp}}
{{dsc inc|cpp/filesystem/dsc status}}
{{dsc end}}

{{langlinks|en|es|ja|ru}}