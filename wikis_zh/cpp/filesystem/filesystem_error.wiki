{{cpp/filesystem/title|filesystem_error}}
{{cpp/filesystem/filesystem_error/navbar}}
{{dcl begin}}
{{dcl header|filesystem}}
{{dcl|since=c++17|1=
class filesystem_error;
}}
{{dcl end}}

类 {{tt|std::filesystem::filesystem_error}} 定义由文件系统库中各函数的抛出版重载所抛出的异常对象。

{{inheritance diagram/std-filesystem-filesystem_error}}

===成员函数===
{{dsc begin}}
{{dsc inc|cpp/filesystem/filesystem_error/dsc constructor}}
{{dsc inc|cpp/filesystem/filesystem_error/dsc operator{{=}}}}
{{dsc inc|cpp/filesystem/filesystem_error/dsc path}}
{{dsc inc|cpp/filesystem/filesystem_error/dsc what}}
{{dsc end}}

{{cpp/error/system_error/inherit}}
{{cpp/error/runtime_error/inherit}}
{{cpp/error/exception/inherit}}

===注解===
为确保 {{tt|filesystem_error}} 的复制函数为 noexcept，典型实现将保有 {{lc|what()}} 的返回值的对象和 {{lc|path1()}} 与 {{lc|path2()}} 所分别引用的两个 {{lc|std::filesystem::path}} 对象存储于分离分配的引用计数存储。

当前 [https://github.com/microsoft/STL/blob/master/stl/inc/filesystem#L1749 MS STL 实现]不合标准：上述对象被直接存储在 {{tt|filesystem}} 对象中，这使得复制函数不是 noexcept。

===示例===
{{example
|code=
#include &lt;filesystem&gt;
#include &lt;iostream&gt;
#include &lt;system_error&gt;

int main()
{
    const std::filesystem::path from{"/none1/a"}, to{"/none2/b"};

    try
    {
        std::filesystem::copy_file(from, to); // 抛出：文件不存在
    }
    catch (std::filesystem::filesystem_error const&amp; ex)
    {
        std::cout &lt;&lt; "what():  " &lt;&lt; ex.what() &lt;&lt; '\n'
                  &lt;&lt; "path1(): " &lt;&lt; ex.path1() &lt;&lt; '\n'
                  &lt;&lt; "path2(): " &lt;&lt; ex.path2() &lt;&lt; '\n'
                  &lt;&lt; "code().value():    " &lt;&lt; ex.code().value() &lt;&lt; '\n'
                  &lt;&lt; "code().message():  " &lt;&lt; ex.code().message() &lt;&lt; '\n'
                  &lt;&lt; "code().category(): " &lt;&lt; ex.code().category().name() &lt;&lt; '\n';
    }

    // 所有函数都有无抛出等价物
    std::error_code ec;
    std::filesystem::copy_file(from, to, ec); // 不抛出
    std::cout &lt;&lt; "\n不抛出形式设置的 error_code: " &lt;&lt; ec.message() &lt;&lt; '\n';
}
|p=true
|output=
what():  filesystem error: cannot copy file: No such file or directory [/none1/a] [/none2/b]
path1(): "/none1/a"
path2(): "/none2/b"
code().value():    2
code().message():  No such file or directory
code().category(): generic

不抛出形式设置的 error_code: No such file or directory
}}

{{langlinks|en|es|ja|ru}}