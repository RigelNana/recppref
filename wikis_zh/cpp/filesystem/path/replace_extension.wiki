{{cpp/filesystem/path/title|replace_extension}}
{{cpp/filesystem/path/navbar}}
{{dcl begin}}
{{dcl|since=c++17|1=
path&amp; replace_extension( const path&amp; replacement = path() );
}}
{{dcl end}}

以 {{c|replacement}} 替换扩展名，或在使用 {{c|replacement}} 的默认值时移除它。

首先，若此路径拥有 {{ltf|cpp/filesystem/path/extension}}，则首先从路径名的通用格式视角移除它。

然后若 {{c|replacement}} 非空且不以句点字符开始，则添加句点字符到路径名的通用格式视图。

然后如同用 {{c|operator+{{=}}(replacement)}} 后附 {{c|replacement}}。

===参数===
{{par begin}}
{{par | replacement | 要替换的扩展名}}
{{par end}}

===返回值===
{{c|*this}}

{{cpp/impldef exception}}

===注解===
{{c|replacement}} 的类型是 {{lc|std::filesystem::path}}，即使并非有意用它表示文件系统上的对象，这是为了正确认定文件系统字符编码。

===示例===
{{example
|code=
#include &lt;filesystem&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;utility&gt;

int main()
{
    const int width1{18}, width2{11}; // columns' width

    std::cout &lt;&lt; std::left &lt;&lt; std::setw(width1) &lt;&lt; "Path:"
              &lt;&lt; std::setw(width2) &lt;&lt; "Ext:" &lt;&lt; "Result:\n";
    for (const auto&amp; [p, e] : {
            std::make_pair("/foo/bar.jpg", ".png"),
            {"/foo/bar.jpg", "png"},
            {"/foo/bar.jpg", "."},
            {"/foo/bar.jpg", ""},
            {"/foo/bar.", "png"},
            {"/foo/bar", ".png"},
            {"/foo/bar", "png"},
            {"/foo/bar", "."},
            {"/foo/bar", ""},
            {"/foo/.", ".png"},
            {"/foo/.", "png"},
            {"/foo/.", "."},
            {"/foo/.", ""},
            {"/foo/", ".png"},
            {"/foo/", "png"}&lt;!----&gt;})
    {
        std::filesystem::path path{p}, ext{e};
        std::cout &lt;&lt; std::setw(width1) &lt;&lt; path &lt;&lt; std::setw(width2) &lt;&lt; ext;
        path.replace_extension(ext);
        std::cout &lt;&lt; path &lt;&lt; '\n';
    }
}
|output=
Path:             Ext:       Result:
"/foo/bar.jpg"    ".png"     "/foo/bar.png"
"/foo/bar.jpg"    "png"      "/foo/bar.png"
"/foo/bar.jpg"    "."        "/foo/bar."
"/foo/bar.jpg"    ""         "/foo/bar"
"/foo/bar."       "png"      "/foo/bar.png"
"/foo/bar"        ".png"     "/foo/bar.png"
"/foo/bar"        "png"      "/foo/bar.png"
"/foo/bar"        "."        "/foo/bar."
"/foo/bar"        ""         "/foo/bar"
"/foo/."          ".png"     "/foo/..png"
"/foo/."          "png"      "/foo/..png"
"/foo/."          "."        "/foo/.."
"/foo/."          ""         "/foo/."
"/foo/"           ".png"     "/foo/.png"
"/foo/"           "png"      "/foo/.png"
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/filesystem/path/dsc extension}}
{{dsc inc|cpp/filesystem/path/dsc filename}}
{{dsc inc|cpp/filesystem/path/dsc stem}}
{{dsc mem fun | cpp/filesystem/path/has_path | title=has_extension | 检查对应路径元素是否非空}}
{{dsc end}}

{{langlinks|en|es|ja|ru}}