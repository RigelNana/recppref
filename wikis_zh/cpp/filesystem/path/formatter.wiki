{{cpp/title|formatter{{small|&lt;std::filesystem::path&gt;}}}}
{{cpp/filesystem/path/navbar}}

{{ddcl|header=filesystem|since=c++26|
template&lt; class CharT &gt;
struct formatter&lt;std::filesystem::path, CharT&gt;;
}}

{{lc|std::formatter}} 针对 {{lc|std::filesystem::path}} 类的模板特化允许用户使用[[cpp/utility/format|格式化函数]]把路径名转换为其文本表示。这项特化是[[cpp/utility/format/formatter#基本标准特化|''启用调试'']]的。

===格式说明===
格式说明 {{spar|路径格式说明}} 的语法是：

{{sdsc begin}}
{{sdsc|{{spar optional|填充和对齐}} {{spar optional|宽度}} {{ttb|?}}{{mark optional}} {{ttb|g}}{{mark optional}}}}
{{sdsc end}}

{{spar|填充和对齐}} 与 {{spar|宽度}} 具有与[[cpp/utility/format/formatter#标准格式说明|标准格式说明]]中相同的含义。

{{ttb|?}} 选项用于把路径名格式化为[[cpp/utility/format/spec#格式化经转义字符和字符串|经转义字符串]]。

{{ttb|g}} 选项用于指定路径名具有{{rlp|format|通用格式表示}}。

===Member functions===
{{dsc begin}}
{{dsc mem fun|set_debug_format|nolink=true|启用把路径名格式化为[[cpp/utility/format/spec#格式化经转义字符和字符串|经转义字符串]]}}
{{dsc mem fun|parse|nolink=true|根据 {{spar|路径格式说明}} 解析格式说明符}}
{{dsc mem fun|format|nolink=true|根据 {{spar|路径格式说明}} 写入格式化输出}}
{{dsc end}}

{{member|1={{small|std::formatter&lt;std::filesystem::path&gt;::}}set_debug_format|2=
{{dcl begin}}
{{dcl|1=
constexpr void set_debug_format();
}}
{{dcl end}}

允许当前对象把路径名格式化为[[cpp/utility/format/spec#格式化经转义字符和字符串|经转义字符串]]。
}}

{{member|1={{small|std::formatter&lt;std::filesystem::path&gt;::}}parse|2=
{{dcl begin}}
{{dcl|1=
constexpr auto parse( std::basic_format_parse_context&lt;CharT&gt;&amp; ctx )
    -&gt; std::basic_format_parse_context&lt;CharT&gt;::iterator;
}}
{{dcl end}}

按照 {{spar|路径格式说明}} 解析各个格式说明符，并将解析到的说明符存储到当前对象中。

返回 {{spar|路径格式说明}} 的尾后迭代器。
}}

{{member|1={{small|std::formatter&lt;std::filesystem::path&gt;::}}format|2=
{{dcl begin}}
{{dcl|1=
template&lt; class FormatContext &gt;
auto format( const std::filesystem::path&amp; p, FormatContext&amp; ctx ) const 
    -&gt; FormatContext::iterator;
}}
{{dcl end}}

令 {{c|s}} 在使用 {{ttb|g}} 选项时为 {{c|p.generic&lt;std::filesystem::path::value_type&gt;()}}，否则为 {{c|p.native()}}。根据 {{spar|路径格式说明}} 的规定将 {{c|s}} 写入 {{c|ctx.out()}}。

对于路径名的字符转码：
* 以下情况下，将路径名从宽字符串的本机编码转码为 UTF-8，其中将最大非良构子序列的部分替换为 {{tt|U+FFFD}} REPLACEMENT CHARACTER：
** {{c|std::is_same_v&lt;CharT, char&gt;}} 为 {{c|true}}，
** {{c|std::is_same_v&lt;typename path::value_type, wchar_t&gt;}} 为 {{c|true}}，并且
** [[cpp/language/charset#代码单元与字面量编码|普通字面量编码]]为 UTF-8。
* 否则，当 {{c|std::is_same_v&lt;typename path::value_type, CharT&gt;}} 为 {{c|true}} 时不进行转码。
* 否则，转码由实现定义。

返回输出范围的尾后迭代器。
}}

===注解===
{{ftm begin}}
{{ftm|std=C++26|value=202403L|__cpp_lib_format_path|{{tt|std::filesystem::path}} 的格式化支持}}
{{ftm end}}

===示例===
{{example
|code=
}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/utility/format/dsc formatter}}
{{dsc end}}

{{langlinks|en|es|ja|ru}}