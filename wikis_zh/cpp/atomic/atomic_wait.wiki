{{cpp/title|atomic_wait|atomic_wait_explicit}}
{{cpp/thread/navbar}}
{{dcl begin}}
{{dcl header|atomic}}
{{dcl|num=1|since=c++20|
template&lt; class T &gt;
void atomic_wait( const std::atomic&lt;T&gt;* object,
                  typename std::atomic&lt;T&gt;::value_type old );
}}
{{dcl|num=2|since=c++20|
template&lt; class T &gt;
void atomic_wait( const volatile std::atomic&lt;T&gt;* object,
                  typename std::atomic&lt;T&gt;::value_type old );
}}
{{dcl|num=3|since=c++20|
template&lt; class T &gt;
void atomic_wait_explicit( const std::atomic&lt;T&gt;* object, 
                           typename std::atomic&lt;T&gt;::value_type old, 
                           std::memory_order order );
}}
{{dcl|num=4|since=c++20|
template&lt; class T &gt;
void atomic_wait_explicit( const volatile std::atomic&lt;T&gt;* object,
                           typename std::atomic&lt;T&gt;::value_type old, 
                           std::memory_order order );
}}
{{dcl end}}

进行原子等待操作。表现为重复进行下列步骤：
* 比较 {{c|object-&gt;load()}}（对于重载 {{v|1,2}}）或 {{c|object-&gt;load(order)}}（对于重载 {{v|3,4}}）与 {{c|old}} 的[[cpp/language/object|值表示]]。
** 如果它们逐位相等，那么阻塞直到 {{c|*this}} 被 {{lc|std::atomic::notify_one()}} 或 {{lc|std::atomic::notify_all()}} 提醒，或线程被虚假解除锁定。
** 否则返回。

允许这些函数虚假解除锁定，即由于值更改或提醒之外的原因返回。 
@1,2@ 等价于 {{c|object-&gt;wait(old)}}。
@3,4@ 等价于 {{c|object-&gt;wait(old, order)}}。
@@ 如果 {{c|order}} 是 {{c|std::memory_order::release}} 和 {{c|std::memory_order::acq_rel}} 之一，那么行为未定义。

===参数===
{{par begin}}
{{par|object|指向要检查并在它之上等待的原子对象的指针}}
{{par|old|要检测的原子对象不再含有的值}}
{{par|order|内存同步定序}}
{{par end}} 

===返回值===
（无）

===注解===
更改检测的这种形式通常比简单轮询或纯自旋锁高效。

由于 {{enwiki|ABA problem|ABA 问题}}，可能错失从 {{c|old}} 到另一值再回到 {{c|old}} 的更改，而不会解除锁定。

比较是逐位的（类似 {{lc|std::memcpy}}）；不使用比较运算符。忽略决不参与对象值表示的填充位。

===示例===
{{example}}

===参阅===
{{dsc begin}}
{{dsc inc|cpp/atomic/atomic/dsc wait|atomic}}
{{dsc inc|cpp/atomic/atomic/dsc notify_one|atomic}}
{{dsc inc|cpp/atomic/atomic/dsc notify_all|atomic}}
{{dsc inc|cpp/atomic/dsc atomic_notify_one}}
{{dsc inc|cpp/atomic/dsc atomic_notify_all}}
{{dsc end}}

{{langlinks|de|en|es|fr|it|ja|pt|ru}}