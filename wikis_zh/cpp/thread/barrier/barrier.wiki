{{cpp/thread/barrier/title|barrier}}
{{cpp/thread/barrier/navbar}}

{{dcl begin}}
{{dcl|num=1|since=c++20|1= 
constexpr explicit barrier( std::ptrdiff_t expected,
                            CompletionFunction f = CompletionFunction());
}}
{{dcl|num=2|since=c++20|1= 
barrier( const barrier&amp; ) = delete;
}}
{{dcl end}}

@1@ 设置每个阶段的初始期待计数及首阶段的当前期待计数为 {{c|expected}}，以 {{c|std::move(f)}} 初始化完成函数对象，然后开始第一阶段。若 {{c|expected}} 为负或大于 {{rlpf|max}} 则行为未定义。

@2@ 复制构造函数被弃置。{{c|barrier}} 既不可复制亦不可移动。

===参数===
{{par begin}}
{{par|expected|期待计数的初值}}
{{par|f|要在在阶段完成步骤调用的完成函数对象}}
{{par end}}

===异常===
@1@ {{tt|CompletionFunction}} 的移动构造函数所抛的任何异常。

===注解===
容许 {{c|expected}} 为零。然而在这种 {{tt|barrier}} 上调用析构函数以外的任何非静态成员函数导致未定义行为。换言之，这种 {{tt|barrier}} 只能被销毁。

{{langlinks|en|es|ja|ru}}