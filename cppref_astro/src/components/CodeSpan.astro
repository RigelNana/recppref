---
// src/components/Code.astro
import type { HTMLAttributes } from "astro/types";
interface Props extends HTMLAttributes<"code" | "pre"> {
  // Styling
  inline?: boolean;
  boxed?: boolean;
  highlighted?: boolean;
  serif?: boolean;
  bold?: boolean;
  italic?: boolean;
  overline?: boolean;
  underline?: boolean;

  // Content
  multiline?: boolean;
}

const {
  inline = false,
  boxed = false,
  highlighted = true,
  serif = false,
  bold = false,
  italic = false,
  overline = false,
  underline = false,
  multiline = false,
  ...rest
} = Astro.props;

const Tag = multiline || !inline ? "pre" : "code";
---

<Tag
  data-inline={inline}
  data-boxed={boxed}
  data-highlighted={highlighted}
  data-serif={serif}
  data-bold={bold}
  data-italic={italic}
  data-overline={overline}
  data-underline={underline}
  {...rest}
>
  <slot name="value" />
</Tag>
<style>
  pre,
  code {
    font-family: "Fira Code", monospace;
    font-size: 0.9em;
  }

  [data-inline="true"] {
    display: inline-block;
    padding: 0.1em 0.3em;
    border-radius: 4px;
  }

  [data-inline="false"] {
    display: block;
    width: 100%;
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
  }

  [data-boxed="true"] {
    border: 1px solid var(--vp-c-border);
  }

  [data-highlighted="true"][data-inline="true"] {
    background-color: var(--vp-c-bg-mute);
    color: var(--vp-c-text-2);
  }

  [data-highlighted="false"] {
    background-color: transparent;
  }

  [data-serif="true"] {
    font-family: serif;
  }

  [data-bold="true"] {
    font-weight: bold;
  }

  [data-italic="true"] {
    font-style: italic;
  }

  [data-overline="true"] {
    text-decoration: overline;
  }

  [data-underline="true"] {
    text-decoration: underline;
  }
</style>
