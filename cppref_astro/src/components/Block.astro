---
// src/components/Block.astro
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'details' | 'div'> {
  title?: string;
  collapsible?: boolean;
  default_state?: 'open' | 'collapsed';
}

const { 
  title, 
  collapsible = false, 
  default_state = 'open',
  ...rest 
} = Astro.props;
---

{collapsible ? (
  <details open={default_state === 'open'} {...rest}>
    <summary>
      {title || 'Details'}
    </summary>
    <div>
      <slot />
    </div>
  </details>
) : (
  <div {...rest}>
    {title && (
      <div>
        {title}
      </div>
    )}
    <div>
      <slot />
    </div>
  </div>
)}
<style>
  details, div {
    border: 1px solid var(--vp-c-border);
    border-radius: 8px;
    margin-bottom: 1rem;
    background-color: var(--vp-c-bg-soft);
  }

  summary, div > div:first-child {
    font-weight: 600;
    font-size: 1.125rem;
    padding: 1rem;
    background-color: var(--vp-c-bg-mute);
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
  }

  summary {
    cursor: pointer;
    user-select: none;
  }

  summary:focus {
    outline: 2px solid var(--vp-c-brand-1);
    outline-offset: 2px;
  }

  details > div, div > div:last-child {
    padding: 1rem;
  }

  details[open] > summary {
    border-bottom: 1px solid var(--vp-c-divider);
  }
</style>
