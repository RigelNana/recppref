{{cpp/thread/stop_callback/title|stop_callback}}
{{cpp/thread/stop_callback/navbar}}

{{dcl begin}}
{{dcl|since=c++20|num=1|
template&lt; class C &gt;
explicit stop_callback( const std::stop_token&amp; st, C&amp;&amp; cb ) noexcept(/*see below*/);
}}
{{dcl|since=c++20|num=2|
template&lt; class C &gt;
explicit stop_callback( std::stop_token&amp;&amp; st, C&amp;&amp; cb ) noexcept(/*see below*/);
}}
{{dcl|since=c++20|num=3|1=
stop_callback( const stop_callback&amp; ) = delete;
}}
{{dcl|since=c++20|num=4|1=
stop_callback( stop_callback&amp;&amp; ) = delete;
}}
{{dcl end}}

Constructs a new {{tt|stop_callback}} object, saving and registering the {{c|cb}} callback function into the given {{ltt|cpp/thread/stop_token|std::stop_token}}'s associated stop-state, for later invocation if stop is requested on the associated {{ltt|cpp/thread/stop_source|std::stop_source}}.

@1@ Constructs a {{tt|stop_callback}} for the given {{c|st}} {{ltt|cpp/thread/stop_token|std::stop_token}} (copied), with the given invocable callback function {{c|cb}}.
@2@ Constructs a {{tt|stop_callback}} for the given {{c|st}} {{ltt|cpp/thread/stop_token|std::stop_token}} (moved), with the given invocable callback function {{c|cb}}.
@3,4@ {{tt|stop_callback}} is neither {{named req|CopyConstructible}} nor {{named req|MoveConstructible}}.

Both constructors participate overload resolution only if {{tt|Callback}} and {{tt|C}} satisfy {{lconcept|constructible_from}} of {{c|std::constructible_from&lt;Callback, C&gt;}}. If {{tt|Callback}} and {{tt|C}} satisfy the concept but fail to satisfy its semantic requirement, the behavior is undefined.

===Parameters===
{{par begin}}
{{par|st|a {{ltt|cpp/thread/stop_token|std::stop_token}} object to register this {{tt|stop_callback}} object with}}
{{par|cb|the type to invoke if stop is requested}}
{{par end}}

===Exceptions===
@1,2@ {{noexcept|std::is_nothrow_constructible_v&lt;Callback, C&gt;}}
Any exception thrown by constructor-initializing the given callback into the {{tt|stop_callback}} object.

===Notes===
If {{c|1=st.stop_requested() == true}} for the passed-in {{ltt|cpp/thread/stop_token|std::stop_token}}, then the callback function is invoked in the current thread before the constructor returns.

{{langlinks|es|ja|ru|zh}}