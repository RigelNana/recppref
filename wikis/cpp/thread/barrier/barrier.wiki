{{cpp/thread/barrier/title|barrier}}
{{cpp/thread/barrier/navbar}}

{{dcl begin}}
{{dcl|num=1|since=c++20|1= 
constexpr explicit barrier( std::ptrdiff_t expected,
                            CompletionFunction f = CompletionFunction());
}}
{{dcl|num=2|since=c++20|1= 
barrier( const barrier&amp; ) = delete;
}}
{{dcl end}}

@1@ Sets the both initial expected count for each phase and the current expected count for the first phase to {{c|expected}}, initializes the completion function object with {{c|std::move(f)}}, and then starts the first phase. The behavior is undefined if {{c|expected}} is negative or greater than {{rlpf|max}}.

@2@ Copy constructor is deleted. {{tt|barrier}} is neither copyable nor movable.

===Parameters===
{{par begin}}
{{par|expected|initial value of the expected count}}
{{par|f|completion function object to be called on phase completion step}}
{{par end}}

===Exceptions===
@1@ Any exception thrown by {{tt|CompletionFunction}}'s move constructor.

===Notes===
{{c|expected}} is permitted to be zero. However, calling any non-static member function other than the destructor on such {{tt|barrier}} results in undefined behavior. In other words, such {{tt|barrier}} can only be destroyed.

{{langlinks|es|ja|ru|zh}}