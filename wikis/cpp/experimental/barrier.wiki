{{cpp/experimental/title|barrier}}
{{fmbox|class=noprint|style=font-size: 0.8em|text='''Merged into ISO C++''' The functionality described on this page was merged into the mainline ISO C++ standard as of 7/2019; see {{ltt|cpp/thread/barrier|std::barrier}} {{mark since c++20}}}}
{{cpp/experimental/concurrency/barrier/navbar}}
{{dcl begin}}
{{dcl header|experimental/barrier}}
{{dcl|since=concurrency|
class barrier;
}}
{{dcl end}}

The class {{tt|std::experimental::barrier}} provides a thread-coordination mechanism that allows a set of participating threads to block until an operation is completed. Unlike {{lc|std::experimental::latch}}, barriers are reusable; once the participating threads are released from a barrier's synchronization point, they can reuse the same barrier.

A barrier has a completion phase, which is executed by one of the participating threads once all threads in the set of participating threads arrive at the synchronization point. The {{tt|arrive_and_wait}} and {{tt|arrive_and_drop}} calls [[cpp/atomic/memory_order|synchronize with]] the start of the completion phase; the end of the completion phase synchronizes with the returns from all calls blocked by its completion.

For {{tt|std::experimental::barrier}}, the completion phase is empty. {{lc|std::experimental::flex_barrier}} allows the user to control the completion phase with a function object.

The set of participating threads for a {{tt|barrier}} constructed for {{tt|num_threads}} threads is the first {{tt|num_threads}} threads to arrive at its synchronization point after construction. The same set of threads (except for threads that called {{rlt|arrive_and_drop|arrive_and_drop()}}) must arrive at the {{tt|barrier}} each cycle.

===Member functions===
{{dsc begin}}
{{dsc inc|cpp/experimental/barrier/dsc constructor}}
{{dsc inc|cpp/experimental/barrier/dsc destructor}}
{{dsc inc|cpp/experimental/barrier/dsc operator{{=}}}}

{{dsc inc|cpp/experimental/barrier/dsc arrive_and_wait}}
{{dsc inc|cpp/experimental/barrier/dsc arrive_and_drop}}
{{dsc end}}

{{langlinks|ja|zh}}