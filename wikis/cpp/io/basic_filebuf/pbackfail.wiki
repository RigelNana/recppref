{{cpp/io/basic_filebuf/title | pbackfail }}
{{cpp/io/basic_filebuf/navbar}}
{{ddcl |1=
protected:
virtual int_type pbackfail( int_type c = Traits::eof() )
}}

This protected virtual function is called by the public functions {{l2tt|cpp/io/basic_streambuf/sungetc}} and {{l2tt|cpp/io/basic_streambuf/sputbackc}} (which, in turn, are called by {{l2tt|cpp/io/basic_istream/unget}} and {{l2tt|cpp/io/basic_istream/putback}}). 

@1@ The caller is requesting that the get area is backed up by one character ({{tt|pbackfail()}} is called with no arguments), in which case, this function re-reads the file starting one byte earlier and decrements {{l2tt|cpp/io/basic_streambuf/gptr|gptr()}}, e.g. by calling {{c|gbump(-1)}}.
@2@ The caller attempts to putback a different character from the one retrieved earlier ({{tt|pbackfail()}} is called with the character that needs to be put back), in which case
:@a@ First, checks if there is a putback position, and if there isn't, backs up the get area by re-reading the file starting one byte earlier.
:@a@ Then checks what character is in the putback position. If the character held there is already equal to {{tt|c}}, as determined by {{c|Traits::eq(to_char_type(c), gptr()[-1])}}, then simply decrements {{l2tt|cpp/io/basic_streambuf/gptr|gptr()}}.
:@b@ Otherwise, if the buffer is allowed to modify its own get area, decrements {{l2tt|cpp/io/basic_streambuf/gptr|gptr()}} and writes {{tt|c}} to the location pointed to gptr() after adjustment.

This function never modifies the file, only the get area of the in-memory buffer.

If the file is not open ({{c|1=is_open()==false}}, this function returns {{c|Traits::eof()}} immediately.

===Parameters===
{{par begin}}
{{par | c | the character to put back, or Traits::eof() to indicate that backing up of the get area is requested}}
{{par end}}

===Return value===
{{c|c}} on success except if {{tt|c}} was {{c|Traits::eof()}}, in which case {{c|Traits::not_eof(c)}} is returned.

{{c|Traits::eof()}} on failure.

===Example===
{{example
 |
 | code=
 | output=
}}

===See also===
{{dsc begin}}
{{dsc inc | cpp/io/basic_streambuf/dsc pbackfail}}
{{dsc inc | cpp/io/basic_streambuf/dsc sungetc}}
{{dsc inc | cpp/io/basic_streambuf/dsc sputbackc}}
{{dsc inc | cpp/io/basic_istream/dsc unget}}
{{dsc inc | cpp/io/basic_istream/dsc putback}}
{{dsc end}}

[[de:cpp/io/basic filebuf/pbackfail]]
[[es:cpp/io/basic filebuf/pbackfail]]
[[fr:cpp/io/basic filebuf/pbackfail]]
[[it:cpp/io/basic filebuf/pbackfail]]
[[ja:cpp/io/basic filebuf/pbackfail]]
[[pt:cpp/io/basic filebuf/pbackfail]]
[[ru:cpp/io/basic filebuf/pbackfail]]
[[zh:cpp/io/basic filebuf/pbackfail]]