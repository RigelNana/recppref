{{cpp/io/strstreambuf/title|pbackfail}}
{{cpp/io/strstreambuf/navbar}}
{{ddcl|deprecated=c++98|removed=c++26|1=
protected:
virtual int_type pbackfail( int_type c = EOF );
}}

This protected virtual function is called by the public functions {{l2tt|cpp/io/basic_streambuf/sungetc}} and {{l2tt|cpp/io/basic_streambuf/sputbackc}} (which, in turn, are called by {{l2tt|cpp/io/basic_istream/unget}} and {{l2tt|cpp/io/basic_istream/putback}}).

@1@ The caller is requesting that the get area is backed up by one character ({{tt|pbackfail()}} is called with no arguments or with {{lc|EOF}} as the argument)
:@a@ First, checks if there is a putback position, and if there really isn't, fails ({{tt|strstreambuf}} has no external character source to re-read).
:@b@ If the caller was wrong and the putback position is in fact available, simply decrements {{l2tt|cpp/io/basic_streambuf/gptr|gptr()}}, e.g. by calling {{c|gbump(-1)}}.
@2@ The caller attempts to putback a different character from the one retrieved earlier ({{tt|pbackfail()}} is called with the character that needs to be put back), in which case
:@a@ First, checks if there is a putback position, and if there isn't, fails.
:@b@ Then checks what character is in the putback position. If the character held there is already equal to {{c|(char)c}}, then simply decrements {{l2tt|cpp/io/basic_streambuf/gptr|gptr()}}.
:@c@ Otherwise, if the buffer is unmodifiable (this strstreambuf was constructed with a string literal or some other {{c|const}} array), fails.
:@d@ Otherwise, decrements {{l2tt|cpp/io/basic_streambuf/gptr|gptr()}} and writes {{c|c}} to the location pointed to {{c|gptr()}} after adjustment.

===Parameters===
{{par begin}}
{{par|c|the character to put back, or {{c|Traits::eof()}} to indicate that backing up of the get area is requested}}
{{par end}}

===Return value===
{{c|c}} on success except if {{c|c}} was {{lc|EOF}}, in which case unspecified value other than {{lc|EOF}} is returned.

{{lc|EOF}} on failure.

===Example===
{{example
|code=
|output=
}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/io/basic_streambuf/dsc pbackfail}}
{{dsc inc|cpp/io/basic_streambuf/dsc sungetc}}
{{dsc inc|cpp/io/basic_streambuf/dsc sputbackc}}
{{dsc inc|cpp/io/basic_istream/dsc unget}}
{{dsc inc|cpp/io/basic_istream/dsc putback}}
{{dsc end}}

{{langlinks|ja|zh}}