{{cpp/io/basic_spanbuf/title|setbuf}}
{{cpp/io/basic_spanbuf/navbar}}
{{ddcl|since=c++23|
protected:
std::basic_streambuf&lt;CharT, Traits&gt;* setbuf( CharT *s, std::streamsize n ) override;
}}

Makes the {{tt|basic_spanbuf}} perform I/O on the buffer {{range|s|s + n}}. Equivalently calls {{c|this-&gt;span(std::span&lt;CharT&gt;(s, n))}} and then returns {{c|this}}.

{|class="wikitable"
|-
!rowspan="2"|Set bits in open mode&lt;br&gt;(affecting pointers to get area)
!colspan="3"|Return value after setting
|-
|{{lc|std::basic_streambuf::eback|eback()}}
|{{lc|std::basic_streambuf::gptr|gptr()}}
|{{lc|std::basic_streambuf::egptr|egptr()}}
|-
|{{c|std::ios_base::in}}
|{{c|s}}
|{{c|s}}
|{{c|s + n}}
|-
|colspan="4"|&lt;nowiki/&gt;
|-
!rowspan="2"|Set bits in open mode&lt;br&gt;(affecting pointers to put area)
!colspan="3"|Return value after setting
|-
|{{lc|std::basic_streambuf::pbase|pbase()}}
|{{lc|std::basic_streambuf::pptr|pptr()}}
|{{lc|std::basic_streambuf::epptr|epptr()}}
|-
|{{c|std::ios_base::out &amp;&amp; !std::ios_base::ate}}
|{{c|s}}
|{{c|s}}
|{{c|s + n}}
|-
|{{c|std::ios_base::out &amp;&amp; std::ios_base::ate}}
|{{c|s}}
|{{c|s + n}}
|{{c|s + n}}
|}

This function is protected virtual, it may only be called through {{tt|pubsetbuf()}} or from member functions of a user-defined class derived from {{lc|std::basic_spanbuf}}.

===Parameters===
{{par begin}}
{{par|s|pointer to the first {{tt|CharT}} in the user-provided buffer}}
{{par|n|the number of {{tt|CharT}} elements in the user-provided buffer}}
{{par end}}

===Return value===
{{c|this}}

===Notes===
The deprecated stream buffer {{lc|std::strstreambuf}} or the boost.IOStreams device [https://www.boost.org/doc/libs/release/libs/iostreams/doc/classes/array.html#array {{tt|boost::basic_array}}] can also implement I/O buffering over a user-provided {{c|char}} array.

===Example===
{{example}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/io/basic_streambuf/dsc pubsetbuf}}
{{dsc inc|cpp/io/basic_stringbuf/dsc setbuf}}
{{dsc inc|cpp/io/strstreambuf/dsc setbuf}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}