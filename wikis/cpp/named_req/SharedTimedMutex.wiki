{{cpp/named req/title|SharedTimedMutex|notes={{mark since c++14}}}}
{{cpp/named req/navbar}}

The {{named req|SharedTimedMutex}} requirements extend the {{named req|TimedMutex}} requirements to include shared lock ownership mode.

===Requirements===

* {{named req|TimedMutex}}
* {{named req|SharedMutex}}

Additionally, an object {{ttb|m}} of {{named req/core|SharedTimedMutex}} type supports timed shared operations:

* The expression {{c|m.try_lock_shared_for(duration)}} has the following properties
:* Behaves as an atomic operation.
:* Attempts to obtain shared ownership of the mutex within the duration specified by {{tt|duration}}. If {{tt|duration}} is less or equal {{tt|duration.zero()}}, attempts to obtain the ownership without waiting (as if by {{tt|try_lock()}}). Otherwise, this function blocks until the mutex is acquired or until the time specified by {{tt|duration}} passes. It returns within {{tt|duration}} only if it succeeds, but it allowed to fail to acquire the mutex even if at some point in time during {{tt|duration}} it was not owned by another thread. In any case, it returns {{c|true}} if the mutex was acquired and {{c|false}} otherwise.
:* If {{tt|try_lock_shared_for(duration)}} succeeds, prior {{tt|unlock()}} operations on the same object ''synchronize-with'' this operation (equivalent to release-acquire {{lc|std::memory_order}}).
:* The behavior is undefined if the calling thread already owns the mutex in any mode.
:* An exception may be thrown by clock, time point, or duration during the execution (clocks, time points, and durations provided by the standard library never throw).
:* If an exception is thrown, the shared lock is not acquired.

* The expression {{c|m.try_lock_shared_until(time_point)}} has the following properties
:* Behaves as an atomic operation.
:* Attempts to obtain shared ownership of the mutex within the time left until {{tt|time_point}}. If {{tt|time_point}} already passed, attempts to obtain the ownership without locking (as if by {{tt|try_lock()}}). Otherwise, this function blocks until the mutex is acquired or until the time specified by {{tt|time_point}} passes. It returns before {{tt|time_point}} only if it succeeds, but it allowed to fail to acquire the mutex even if at some point in time before {{tt|time_point}} it was not owned by another thread. In any case, it returns {{c|true}} if the mutex was acquired and {{c|false}} otherwise.
:* If {{tt|try_lock_shared_until(time_point)}} succeeds, prior {{tt|unlock()}} operations on the same object ''synchronize-with'' this operation (equivalent to release-acquire {{lc|std::memory_order}}).
:* The behavior is undefined if the calling thread already owns the mutex in any mode.
:* An exception may be thrown by clock, time point, or duration during the execution (clocks, time points, and durations provided by the standard library never throw).
:* If an exception is thrown, the shared lock is not acquired.

===Standard library===
The following standard library types satisfy {{named req/core|SharedTimedMutex}} requirements:
{{dsc begin}}
{{dsc inc|cpp/thread/dsc shared_timed_mutex}}
{{dsc end}}

===See also===
* [[cpp/thread|Thread support library]]
* {{named req|Mutex}}
* {{named req|TimedMutex}}
* {{named req|SharedMutex}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}