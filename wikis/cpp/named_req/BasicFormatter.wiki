{{cpp/named req/title|BasicFormatter|notes={{mark since c++20}}}}
{{cpp/named req/navbar}}

{{named req|BasicFormatter}} is a type that abstracts formatting operations for a given formatting argument type and character type. Specializations of {{lc|std::formatter}} are required to meet the requirements of {{named req/core|BasicFormatter}}.

A {{named req/core|BasicFormatter}} is a {{named req|Formatter}} if it is able to format both const and non-const arguments.

===Requirements===
A type satisfies {{named req/core|BasicFormatter}} if it is semiregular, meaning it satisfies:
* {{named req|DefaultConstructible}}
* {{named req|CopyConstructible}}
* {{named req|CopyAssignable}}
* {{named req|Destructible}}
* {{named req|Swappable}}

And, given the following types and values, the expressions shown in the table below are valid and have the indicated semantics:
{{dsc begin}}
{{dsc hitem|Type|Definition}}
{{dsc|{{tt|CharT}}|a character type}}
{{dsc|{{tt|Arg}}|a formatting argument type}}
{{dsc|{{tt|Formatter}}|a {{named req/core|Formatter}} type for types {{tt|Arg}} and {{tt|CharT}}}}
{{dsc|{{tt|OutputIt}}|a {{named req|OutputIterator}} type}}
{{dsc|{{tt|ParseCtx}}|{{c/core|std::basic_format_parse_context&lt;CharT&gt;}}}}
{{dsc|{{tt|FmtCtx}}|{{c/core|std::basic_format_context&lt;OutputIt, CharT&gt;}}}}
{{dsc hitem|Value|Definition}}
{{dsc|{{c|f}}|a value of type (possibly const-qualified) {{tt|Formatter}}}}
{{dsc|{{c|g}}|a value of type {{tt|Formatter}}}}
{{dsc|{{c|arg}}|an lvalue of type {{tt|Arg}}}}
{{dsc|{{c|t}}|a value of type convertible to (possibly const-qualified)&lt;!-- LWG 3636 --&gt; {{tt|Arg}}}}
{{dsc|{{c|parse_ctx}}|an lvalue of type {{tt|ParseCtx}} satisfying all following conditions:
* {{c|parse_ctx.begin()}} points to the beginning of the {{spar|format-spec}} of the replacement field being formatted in the [[cpp/utility/format/basic_format_string#Format specification|format string]].
* If {{spar|format-spec}} is not present or empty, then either {{c|1=parse_ctx.begin() == parse_ctx.end()}} or {{c|1=*parse_ctx.begin() == '}'}}.}}
{{dsc|{{c|fmt_ctx}}|an lvalue of type {{tt|FmtCtx}}}}
{{dsc end}}

{|class=wikitable
!Expression
!Return type
!Semantics
|-
|{{c|g.parse(parse_ctx)}}
|{{tt|ParseCtx::iterator}}{{nbsp}}
|
* In the range {{range|parse_ctx.begin()|parse_ctx.end()}}, parses the {{spar|format-spec}} for type {{tt|Arg}} until the first unmatched character.
* Throws {{lc|std::format_error}} unless the whole range is parsed or the unmatched character is {{c|} }}. &lt;ref group="note"&gt;This allows formatters to emit meaningful error messages.&lt;/ref&gt;
* Stores the parsed format specifiers in {{c|g}} and returns an end iterator of the parsed range.
|-
|{{c|f.format(arg, fmt_ctx)}}
|{{tt|FmtCtx::iterator}}
|
* Formats {{c|arg}} according to the specifiers stored in {{c|f}}, writes the output to {{c|fmt_ctx.out()}} and returns an end iterator of the output range.
* The output shall only depend on
** {{c|arg}},
** {{c|fmt_ctx.locale()}},
** the range {{range|parse_ctx.begin()|parse_ctx.end()}} from the last call to {{c|f.parse(parse_ctx)}}, and
** {{c|fmt_ctx.arg(n)}} for any value {{c|n}} of type {{lc|std::size_t}}&lt;!-- LWG 3462 --&gt;.
|}
&lt;references group="note"/&gt;

===Defect reports===
{{dr list begin}}
{{dr list item|wg=lwg|dr=3892|std=C++20|before=the value of {{c|pc.begin()}} was unclear if {{spar|format-spec}} is not present|after=made clear}}
{{dr list end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}