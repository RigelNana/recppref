{{cpp/filesystem/title|recursive_directory_iterator}}
{{cpp/filesystem/recursive_directory_iterator/navbar}}
{{dcl begin}}
{{dcl header|filesystem}}
{{dcl|since=c++17|1=
class recursive_directory_iterator;
}}
{{dcl end}}

{{tt|recursive_directory_iterator}} is a {{named req|InputIterator}} that iterates over the {{ltt|cpp/filesystem/directory_entry|directory_entry}} elements of a directory, and, recursively, over the entries of all subdirectories. The iteration order is unspecified, except that each directory entry is visited only once.

By default, symlinks are not followed, but this can be enabled by specifying the directory option {{ltt|cpp/filesystem/directory_options|follow_directory_symlink}} at construction time.

The special pathnames {{spar|dot}} and {{spar|dot-dot}} are skipped.

If the {{tt|recursive_directory_iterator}} reports an error or is advanced past the last directory entry of the top-level directory, it becomes equal to the default-constructed iterator, also known as the end iterator. Two end iterators are always equal, dereferencing or incrementing the end iterator is undefined behavior.

If a file or a directory is deleted or added to the directory tree after the recursive directory iterator has been created, it is unspecified whether the change would be observed through the iterator.

If the directory structure contains cycles, the end iterator may be unreachable.

===Member types===
{{dsc begin}}
{{dsc hitem|Member type|Definition}}
{{dsc|{{tt|value_type}}|{{lc|std::filesystem::directory_entry}}}}
{{dsc|{{tt|difference_type}}|{{lc|std::ptrdiff_t}}}}
{{dsc|{{tt|pointer}}|{{c/core|const std::filesystem::directory_entry*}}}}
{{dsc|{{tt|reference}}|{{c/core|const std::filesystem::directory_entry&amp;}}}}
{{dsc|{{tt|iterator_category}}|{{lc|std::input_iterator_tag}}}}
{{dsc end}}

===Member functions===
{{dsc begin}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc constructor}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc destructor}}

{{dsc h2|Observers}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc operator*}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc options}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc depth}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc recursion_pending}}

{{dsc h2|Modifiers}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc operator{{=}}}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc increment}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc pop}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc disable_recursion_pending}}
{{dsc end}}

===Non-member functions===
{{dsc begin}}
{{dsc inc|cpp/filesystem/recursive_directory_iterator/dsc begin}}
{{dsc end}}

Additionally, {{rev inl|until=c++20|{{tt|1=operator==}} and {{tt|1=operator!=}} are}}{{rev inl|since=c++20|{{tt|1=operator==}} is}} provided as required by {{named req|InputIterator}}.

It is unspecified {{rev inl|since=c++20|whether {{tt|1=operator!=}} is provided because it can be synthesized from {{tt|1=operator==}}, and}} whether an equality operator is a member or non-member.

===Helper specializations===
{{dcl begin}}
{{dcl|since=c++20|1=
template&lt;&gt;
constexpr bool
    ranges::enable_borrowed_range&lt;std::filesystem::recursive_directory_iterator&gt; = true;
}}
{{dcl|since=c++20|1=
template&lt;&gt;
constexpr bool
    ranges::enable_view&lt;std::filesystem::recursive_directory_iterator&gt; = true;
}}
{{dcl end}}

These specializations for {{tt|recursive_directory_iterator}} make it a {{lconcept|borrowed_range}} and a {{lconcept|view}}.

===Notes===
A {{tt|recursive_directory_iterator}} typically holds a reference-counted ''pointer'' (to satisfy shallow-copy semantics of {{named req|InputIterator}}) to an implementation object, which holds:
* a container (such as {{lc|std::vector}}) of non-recursive {{ltt|cpp/filesystem/directory_iterator|directory_iterator}}s that forms the recursion stack,
* the recursion depth counter (accessible with {{ltt|cpp/filesystem/recursive_directory_iterator/depth|depth()}}),
* the directory options used at construction (accessible with {{ltt|cpp/filesystem/recursive_directory_iterator/options|options()}}),
* the pending recursion flag (accessible with {{ltt|cpp/filesystem/recursive_directory_iterator/recursion_pending|recursion_pending()}}, may be combined with the directory options to save space).

===Example===
{{example
|code=
#include &lt;filesystem&gt;
#include &lt;fstream&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
namespace fs = std::filesystem;

int main()
{
    std::filesystem::current_path(std::filesystem::temp_directory_path());
    std::filesystem::create_directories("sandbox/a/b");
    std::ofstream("sandbox/file1.txt");
    std::filesystem::create_symlink("a", "sandbox/syma");

    // Iterate over the std::filesystem::directory_entry elements explicitly
    auto entry_length{3UZ};
    for (const fs::directory_entry&amp; dir_entry :
            fs::recursive_directory_iterator("sandbox"))
    {
        std::cout &lt;&lt; dir_entry &lt;&lt; '\n';
        if (auto l{dir_entry.path().string().length()}; entry_length &lt; l)
            entry_length = l;
    }
    std::cout &lt;&lt; std::string(entry_length + 2, '-') &lt;&lt; '\n';

    // Iterate over the std::filesystem::directory_entry elements using `auto`
    for (auto const&amp; dir_entry : fs::recursive_directory_iterator("sandbox"))
        std::cout &lt;&lt; dir_entry &lt;&lt; '\n';

    std::filesystem::remove_all("sandbox");
}
|p=true
|output=
"sandbox/syma"
"sandbox/file1.txt"
"sandbox/a"
"sandbox/a/b"
-------------------
"sandbox/syma"
"sandbox/file1.txt"
"sandbox/a"
"sandbox/a/b"
}}

===Defect reports===
{{dr list begin}}
{{dr list item|wg=lwg|dr=3480|std=C++20|before={{tt|recursive_directory_iterator}} was neither a {{lconcept|borrowed_range}} nor a {{lconcept|view}}|after=it is both}}
{{dr list end}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/filesystem/dsc directory_iterator}}
{{dsc inc|cpp/filesystem/dsc directory_entry}}
{{dsc inc|cpp/filesystem/dsc directory_options}}
{{dsc end}}

{{langlinks|de|es|ja|ru|zh}}