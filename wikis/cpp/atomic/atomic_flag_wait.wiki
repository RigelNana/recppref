{{cpp/title|atomic_flag_wait|atomic_flag_wait_explicit}}
{{cpp/thread/navbar}}
{{dcl begin}}
{{dcl header|atomic}}
{{dcl|num=1|since=c++20|
void atomic_flag_wait( const atomic_flag* object, bool old ) noexcept;
}}
{{dcl|num=2|since=c++20|
void atomic_flag_wait( const volatile atomic_flag* object,
                       bool old ) noexcept;
}}
{{dcl|num=3|since=c++20|
void atomic_flag_wait_explicit( const atomic_flag* object, 
                                bool old, std::memory_order order ) noexcept;
}}
{{dcl|num=4|since=c++20|
void atomic_flag_wait_explicit( const volatile atomic_flag* object,
                                bool old, std::memory_order order ) noexcept;
}}
{{dcl end}}

Performs atomic waiting operations.

Compares {{c|object-&gt;test(std::memory_order_seq_cst)}} or {{c|object-&gt;test(order)}} with {{c|old}}, and if they are equal then blocks until {{c|*object}} is notified by {{l2tf std|cpp/atomic/atomic_flag/notify_one}} or {{l2tf std|cpp/atomic/atomic_flag/notify_all}} (or the thread is unblocked spuriously). This is repeated until the values compare unequal.
@1,2@ The memory synchronization order is {{c|std::memory_order_seq_cst}}.
@3,4@ The memory synchronization order is {{c|order}}.
@@ If {{c|order}} is one of {{c|std::memory_order_release}} and {{c|std::memory_order_acq_rel}}, the behavior is undefined.

These functions are guaranteed to return only if value has changed, even if underlying implementation unblocks spuriously.

===Parameters===
{{par begin}}
{{par|object|pointer to the atomic flag to check and wait on}}
{{par|old|the value to check the atomic flag no longer contains}}
{{par|order|the memory synchronization ordering}}
{{par end}}

===Return value===
(none)

===Notes===
This form of change-detection is often more efficient than simple polling or pure spinlocks.

Due to the {{enwiki|ABA problem}}, transient changes from {{c|old}} to another value and back to {{c|old}} might be missed, and not unblock.

===Example===
{{example}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/atomic/atomic/dsc notify_one|atomic_flag}}
{{dsc inc|cpp/atomic/atomic/dsc notify_all|atomic_flag}}
{{dsc inc|cpp/atomic/dsc atomic_flag_notify_one}}
{{dsc inc|cpp/atomic/dsc atomic_flag_notify_all}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}