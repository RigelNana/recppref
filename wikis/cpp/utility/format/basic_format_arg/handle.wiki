{{cpp/utility/format/basic_format_arg/title|handle}}
{{cpp/utility/format/navbar}}

{{ddcl|header=format|since=c++20|
template&lt; class Context &gt;
class basic_format_arg&lt;Context&gt;::handle;
}}

A type-erased wrapper that allows formatting an object of a user-defined type.

{{tt|handle}} objects are typically created by {{lc|std::make_format_args}} and accessed through {{lc|std::visit_format_arg}}{{rev inl|since=c++26| or the {{tt|visit}} member functions of {{lc|std::basic_format_arg}}}}.

===Data members===
A typical implementation of {{tt|handle}} is {{named req|TriviallyCopyable}} and only stores two non-static data members:
* a {{c|const void*}} pointer to the object to be formatted, and
* a {{c|void (*)(std::basic_format_parse_context&lt;Context::char_type&gt;&amp;, Context&amp;, const void*)}} function pointer to the function performing needed operations in the {{tt|format}} member function (see below).

===Member functions===
{{dsc begin}}
{{dsc mem fun|format|nolink=true|notes={{mark c++20}}|formats the referenced object with the given contexts}}
{{dsc end}}

{{member|{{small|std::basic_format_arg&lt;Context&gt;::handle::}}format|2=
{{ddcl|since=c++20|
void format( std::basic_format_parse_context&lt;Context::char_type&gt;&amp; parse_ctx,
             Context&amp; format_ctx ) const;
}}
Let
* {{tt|T}} be the type of the formatting argument,
* {{tt|TD}} be {{c|std::remove_const_t&lt;T&gt;}},
* {{tt|TQ}} be {{c|const TD}} if {{c|const TD}} satisfies {{lti|cpp/utility/format/formattable|__formattable_with}}{{c/core|&lt;Context&gt;}} or {{tt|TD}} otherwise, and
* {{tt|ref}} be a reference to the formatting argument.

Equivalent to:
{{cc|
typename Context::template formatter_type&lt;TD&gt; f;
parse_ctx.advance_to(f.parse(parse_ctx));
format_ctx.advance_to(f.format(const_cast&lt;TQ&amp;&gt;(static_cast&lt;const TD&amp;&gt;(ref)), format_ctx));
}}
}}

===Notes===
A {{tt|handle}} has reference semantics for the formatted argument and does not extend its lifetime. It is the programmer's responsibility to ensure that the argument outlives the {{tt|handle}}. Usually, a {{tt|handle}} is only used within formatting functions.

===See also===
{{dsc begin}}
{{dsc inc | cpp/utility/format/dsc basic_format_arg}}
{{dsc inc | cpp/utility/format/dsc make_format_args}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}