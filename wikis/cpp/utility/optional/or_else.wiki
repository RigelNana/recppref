{{cpp/utility/optional/title|or_else}}
{{cpp/utility/optional/navbar}}
{{dcl begin}}
{{dcl|num=1|since=c++23|
template&lt; class F &gt;
constexpr optional or_else( F&amp;&amp; f ) const&amp;;
}}
{{dcl|num=2|since=c++23|
template&lt; class F &gt;
constexpr optional or_else( F&amp;&amp; f ) &amp;&amp;;
}}
{{dcl end}}

Returns {{c|*this}} if it contains a value. Otherwise, returns the result of {{c|f}}.

The program is ill-formed if {{c|std::remove_cvref_t&lt;std::invoke_result_t&lt;F&gt;&gt;}} is not same as {{c|std::optional&lt;T&gt;}}.

@1@ Equivalent to {{c|return *this ? *this : std::forward&lt;F&gt;(f)();}}. {{cpp/enable_if|both {{c|std::copy_constructible&lt;T&gt;}} and {{c|std::invocable&lt;F&gt;}} are modeled}}.

@2@ Equivalent to {{c|return *this ? std::move(*this) : std::forward&lt;F&gt;(f)();}}. {{cpp/enable_if|both {{c|std::move_constructible&lt;T&gt;}} and {{c|std::invocable&lt;F&gt;}} are modeled}}.

===Parameters===
{{par begin}}
{{par|f|a function or {{named req|Callable}} object that returns an {{c|std::optional&lt;T&gt;}}}}
{{par end}}

===Return value===
{{c|*this}} or the result of {{c|f}}, as described above.

===Notes===
{{feature test macro|__cpp_lib_optional|std=C++23|value=202110L|{{rlps|/#Monadic operations}} in {{lc|std::optional}}}}

===Example===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;optional&gt;
#include &lt;string&gt;

int main()
{
    using maybe_int = std::optional&lt;int&gt;;

    auto valueless = []
    {
        std::cout &lt;&lt; "Valueless: ";
        return maybe_int{0};
    };

    maybe_int x;
    std::cout &lt;&lt; x.or_else(valueless).value() &lt;&lt; '\n';

    x = 42;
    std::cout &lt;&lt; "Has value: ";
    std::cout &lt;&lt; x.or_else(valueless).value() &lt;&lt; '\n';

    x.reset();
    std::cout &lt;&lt; x.or_else(valueless).value() &lt;&lt; '\n';
}
|output=
Valueless: 0
Has value: 42
Valueless: 0
}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/utility/optional/dsc value_or}}
{{dsc inc|cpp/utility/optional/dsc and_then}}
{{dsc inc|cpp/utility/optional/dsc transform}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}