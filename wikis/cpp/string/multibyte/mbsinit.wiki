{{cpp/title|mbsinit}}
{{cpp/string/multibyte/navbar}}
{{ddcl|header=cwchar|
int mbsinit( const std::mbstate_t* ps);
}}

If {{c|ps}} is not a null pointer, the {{tt|mbsinit}} function determines whether the pointed-to {{lc|std::mbstate_t}} object describes the initial conversion state. 

===Notes===
Although a zero-initialized {{lc|std::mbstate_t}} always represents the initial conversion state, there may be other values of {{lc|std::mbstate_t}} that also represent the initial conversion state.

===Parameters===
{{par begin}}
{{par|ps|pointer to the {{lc|std::mbstate_t}} object to examine}}
{{par end}}

===Return value===
{{c|0}} if {{c|ps}} is not a null pointer and does not represent the initial conversion state, nonzero value otherwise.

===Example===
{{example
|code=
#include &lt;clocale&gt;
#include &lt;cwchar&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

int main()
{
    // allow mbrlen() to work with UTF-8 multibyte encoding
    std::setlocale(LC_ALL, "en_US.utf8");
    // UTF-8 narrow multibyte encoding
    std::string str = "水"; // or u8"\u6c34" or "\xe6\xb0\xb4"
    std::mbstate_t mb = std::mbstate_t();
    (void)std::mbrlen(&amp;str[0], 1, &amp;mb);
    if (!std::mbsinit(&amp;mb))
        std::cout &lt;&lt; "After processing the first 1 byte of " &lt;&lt; str
                  &lt;&lt; " the conversion state is not initial\n";

    (void)std::mbrlen(&amp;str[1], str.size() - 1, &amp;mb);
    if (std::mbsinit(&amp;mb))
        std::cout &lt;&lt; "After processing the remaining 2 bytes of " &lt;&lt; str
                  &lt;&lt; ", the conversion state is initial conversion state\n";
}
|output=
After processing the first 1 byte of 水 the conversion state is not initial
After processing the remaining 2 bytes of 水, the conversion state is initial conversion state
}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/string/multibyte/dsc mbstate_t}}
{{dsc see c|c/string/multibyte/mbsinit}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}