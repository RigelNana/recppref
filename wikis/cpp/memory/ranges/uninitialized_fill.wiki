{{cpp/ranges/title|uninitialized_fill}}
{{cpp/memory/navbar}}
{{dcl begin}}
{{dcl header|memory}}
{{dcl h|Call signature}}
{{dcla|num=1|since=c++20|constexpr=c++26|
template&lt; no-throw-forward-iterator I, no-throw-sentinel-for&lt;I&gt; S,
          class T &gt;
    requires std::constructible_from&lt;std::iter_value_t&lt;I&gt;, const T&amp;&gt;
I uninitialized_fill( I first, S last, const T&amp; value );
}}
{{dcla|num=2|since=c++20|constexpr=c++26|
template&lt; no-throw-forward-range R, class T &gt;
    requires std::constructible_from&lt;ranges::range_value_t&lt;R&gt;,
                                     const T&amp;&gt;
ranges::borrowed_iterator_t&lt;R&gt; uninitialized_fill( R&amp;&amp; r,
                                                   const T&amp; value );
}}
{{dcl end}}

@1@ Copies {{c|value}} to an uninitialized memory area {{range|first|last}} as if by
{{box|
{{c/core|1=for (; first != last; ++first)}}&lt;br&gt;
{{nbspt|4}}{{c/core|::new (}}{{lti|cpp/memory/voidify}}{{c/core|(*first)) std::remove_reference_t&lt;std::iter_reference_t&lt;I&gt;&gt;(value);}}&lt;br&gt;
{{c/core|return first;}}
}}
@@ If an exception is thrown during the initialization, the objects already constructed are destroyed in an unspecified order.

@2@ Equivalent to {{c|return ranges::uninitialized_fill(ranges::begin(r), ranges::end(r), value);}}.

{{cpp/ranges/niebloid}}

===Parameters===
{{par begin}}
{{par|first, last|iterator-sentinel pair denoting the range of elements to initialize}}
{{par|r|the range of the elements to initialize}}
{{par|value|the value to construct the elements with}}
{{par end}}

===Return value===
As described above.

===Complexity===
Linear in the size of the uninitialized memory area.

===Exceptions===
Any exception thrown on construction of the elements in the destination range.

===Notes===
An implementation may improve the efficiency of the {{tt|ranges::uninitialized_fill}}, e.g. by using {{lc|ranges::fill}}, if the value type of the output range is {{named req|TrivialType}}.

{{feature test macro|__cpp_lib_raw_memory_algorithms|std=C++26|value=202411L|{{c/core|constexpr}} for [[cpp/memory#Uninitialized memory algorithms|specialized memory algorithms]], {{vl|1,2}}}}

===Possible implementation===
{{eq fun|1=
struct uninitialized_fill_fn
{
    template&lt;no-throw-forward-iterator I, no-throw-sentinel-for&lt;I&gt; S, class T&gt;
        requires std::constructible_from&lt;std::iter_value_t&lt;I&gt;, const T&amp;&gt;
    constexpr I operator()(I first, S last, const T&amp; value) const
    {
        I rollback{first};
        try
        {
            for (; !(first == last); ++first)
                ranges::construct_at(std::addressof(*first), value);
            return first;
        }
        catch (...)
        {   
            // rollback: destroy constructed elements
            for (; rollback != first; ++rollback)
                ranges::destroy_at(std::addressof(*rollback));
            throw;
        }
    }

    template&lt;no-throw-forward-range R, class T&gt;
        requires std::constructible_from&lt;ranges::range_value_t&lt;R&gt;, const T&amp;&gt;
    constexpr ranges::borrowed_iterator_t&lt;R&gt; operator()(R&amp;&amp; r, const T&amp; value) const
    {
        return (*this)(ranges::begin(r), ranges::end(r), value);
    }
};

inline constexpr uninitialized_fill_fn uninitialized_fill{};
}}

===Example===
{{example
|code=
#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;string&gt;

int main()
{
    constexpr int n{4};
    alignas(alignof(std::string)) char out[n * sizeof(std::string)];
    
    try
    {
        auto first{reinterpret_cast&lt;std::string*&gt;(out)};
        auto last{first + n};
        std::ranges::uninitialized_fill(first, last, "▄▀▄▀▄▀▄▀");
        
        int count{1};
        for (auto it{first}; it != last; ++it)
            std::cout &lt;&lt; count++ &lt;&lt; ' ' &lt;&lt; *it &lt;&lt; '\n';
        
        std::ranges::destroy(first, last);
    }
    catch(...)
    {
        std::cout &lt;&lt; "Exception!\n";
    }
}
|output=
1 ▄▀▄▀▄▀▄▀
2 ▄▀▄▀▄▀▄▀
3 ▄▀▄▀▄▀▄▀
4 ▄▀▄▀▄▀▄▀
}}

===Defect reports===
{{dr list begin}}
{{dr list item|wg=lwg|dr=3870|std=C++20|before=this algorithm might create objects on a {{c/core|const}} storage|after=kept disallowed}}
{{dr list end}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/memory/ranges/dsc uninitialized_fill_n}}
{{dsc inc|cpp/memory/dsc uninitialized_fill}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}