{{cpp/memory/weak_ptr/title|~weak_ptr}}
{{cpp/memory/weak_ptr/navbar}}
{{ddcl|since=c++11|
~weak_ptr();
}}

Destroys the {{tt|weak_ptr}} object. Results in no effect to the managed object.

===Example===
{{example
|The program shows the effect of "non-breaking" the cycle of {{lc|std::shared_ptr}}s.
|code=
#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;variant&gt;

class Node
{
    char id;
    std::variant&lt;std::weak_ptr&lt;Node&gt;, std::shared_ptr&lt;Node&gt;&gt; ptr;
public:
    Node(char id) : id{id} {}
    ~Node() { std::cout &lt;&lt; "  '" &lt;&lt; id &lt;&lt; "' reclaimed\n"; }
    /*...*/
    void assign(std::weak_ptr&lt;Node&gt; p) { ptr = p; }
    void assign(std::shared_ptr&lt;Node&gt; p) { ptr = p; }
};

enum class shared { all, some };

void test_cyclic_graph(const shared x)
{
    auto A = std::make_shared&lt;Node&gt;('A');
    auto B = std::make_shared&lt;Node&gt;('B');
    auto C = std::make_shared&lt;Node&gt;('C');

    A-&gt;assign(B);
    B-&gt;assign(C);

    if (shared::all == x)
    {
        C-&gt;assign(A);
        std::cout &lt;&lt; "All links are shared pointers";
    }
    else
    {
        C-&gt;assign(std::weak_ptr&lt;Node&gt;(A));
        std::cout &lt;&lt; "One link is a weak_ptr";
    }
    /*...*/
    std::cout &lt;&lt; "\nLeaving...\n";
}

int main()
{
    test_cyclic_graph(shared::some);
    test_cyclic_graph(shared::all); // produces a memory leak
}
|output=
One link is a weak_ptr
Leaving...
  'A' reclaimed
  'B' reclaimed
  'C' reclaimed
All links are shared pointers
Leaving...
}}

===See also===
{{dsc begin}}
{{dsc inc|cpp/memory/shared_ptr/dsc destructor}}
{{dsc end}}

{{langlinks|de|es|fr|it|ja|pt|ru|zh}}